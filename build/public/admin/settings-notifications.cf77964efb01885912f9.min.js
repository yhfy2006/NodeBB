"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[58087,99127,34271,13417,1091,49897,34405],{29821:(x,g,c)=>{var h,m;h=[c(34405)],m=function(y){const _={};return _.init=function(){const o=$('[data-field="welcomeUid"]');y.user(o,function(d,p){setTimeout(function(){o.val(p.item.user.uid)})})},_}.apply(g,h),m!==void 0&&(x.exports=m)},49897:(x,g,c)=>{c.r(g),c.d(g,{del:()=>i,get:()=>s,head:()=>a,patch:()=>f,post:()=>u,put:()=>r});var h=c(91749),m=c.n(h),y=c(40027),_=c.n(y);const o=config.relative_path+"/api/v3";async function d(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:o+t.url,typeof n=="function"){p(t).then(e=>n(null,e),e=>n(e));return}try{return await p(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,y.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go("login")});throw e}}async function p(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,h.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:E}=e,A=E.get("content-type"),v=A&&A.startsWith("application/json");let l;if(t.method!=="head"&&(v?l=await e.json():l=await e.text()),!e.ok)throw l?new Error(v?l.status.message:l):new Error(e.statusText);return v&&l&&l.hasOwnProperty("status")&&l.hasOwnProperty("response")?l.response:l}function s(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function a(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},e)}function u(t,n,e){return d({url:t,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function f(t,n,e){return d({url:t,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function r(t,n,e){return d({url:t,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function i(t,n,e){return d({url:t,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}},34405:(x,g,c)=>{var h,m;h=[c(49897),c(29930)],m=function(y,_){const o={},d={delay:200,appendTo:null};o.init=s=>{const a={...d,...s},{input:u,onSelect:f}=a;app.loadJQueryUI(function(){u.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,i){p(u,f,r,i)}})})},o.user=function(s,a,u){typeof a=="function"&&(u=a,a={}),a=a||{},o.init({input:s,onSelect:u,source:(f,r)=>{a.query=f.term,y.get("/api/users",a,function(i,t){if(i)return _.error(i);if(t&&t.users){const n=t.users.map(function(e){const E=$("<div></div>").html(e.username).text();return e&&{label:E,value:E,user:{uid:e.uid,name:e.username,slug:e.userslug,username:e.username,userslug:e.userslug,picture:e.picture,banned:e.banned,"icon:text":e["icon:text"],"icon:bgColor":e["icon:bgColor"]}}});r(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},o.group=function(s,a){o.init({input:s,onSelect:a,source:(u,f)=>{socket.emit("groups.search",{query:u.term},function(r,i){if(r)return _.error(r);if(i&&i.length){const t=i.map(function(n){return n&&{label:n.name,value:n.name,group:n}});f(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},o.tag=function(s,a){o.init({input:s,onSelect:a,delay:100,source:(u,f)=>{socket.emit("topics.autocompleteTags",{query:u.term,cid:ajaxify.data.cid||0},function(r,i){if(r)return _.error(r);i&&f(i),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function p(s,a,u,f){a=a||function(){};const r=jQuery.Event("keypress");r.which=13,r.keyCode=13,setTimeout(function(){s.trigger(r)},100),a(u,f)}return o}.apply(g,h),m!==void 0&&(x.exports=m)}}]);
