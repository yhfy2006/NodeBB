"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[53020,99127,34271,1091,49897],{86296:(E,c,n)=>{var o,u;o=[n(49897),n(40027),n(29930)],u=function(i,y,h){const s={};return s.init=function(l){const f=y.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(l.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const d=f.find("#newEmail").val();return i.post("/users/"+l.uid+"/emails",{skipConfirmation:!0,email:d}).then(()=>{f.modal("hide"),l.onSuccess(d)}).catch(h.error),!1}}}})},s}.apply(c,o),u!==void 0&&(E.exports=u)},49897:(E,c,n)=>{n.r(c),n.d(c,{del:()=>D,get:()=>f,head:()=>d,patch:()=>O,post:()=>p,put:()=>_});var o=n(91749),u=n.n(o),i=n(40027),y=n.n(i);const h=config.relative_path+"/api/v3";async function s(e,a){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:h+e.url,typeof a=="function"){l(e).then(t=>a(null,t),t=>a(t));return}try{return await l(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again.")return(0,i.confirm)("[[error:api.reauth-required]]",m=>{m&&ajaxify.go("login")});throw t}}async function l(e){const{url:a}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,o.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(a,e),{headers:m}=t,b=m.get("content-type"),g=b&&b.startsWith("application/json");let r;if(e.method!=="head"&&(g?r=await t.json():r=await t.text()),!t.ok)throw r?new Error(g?r.status.message:r):new Error(t.statusText);return g&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function f(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):"")},t)}function d(e,a,t){return s({url:e+(a&&Object.keys(a).length?"?"+$.param(a):""),method:"head"},t)}function p(e,a,t){return s({url:e,method:"post",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function O(e,a,t){return s({url:e,method:"patch",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function _(e,a,t){return s({url:e,method:"put",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}function D(e,a,t){return s({url:e,method:"delete",data:a,headers:{"x-csrf-token":config.csrf_token}},t)}}}]);
