(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[35007],{40403:(I,y,p)=>{"use strict";var C,A;C=[p(17459),p(67308),p(81335),p(29930),p(41758),p(79914),p(65285)],A=function(f,n,t,e){const i={};let a;i.init=function(){a=ajaxify.data.available,$("#available").find("li .drag-item").draggable({connectToSortable:"#active-navigation",helper:"clone",distance:10,stop:c}),$("#active-navigation").sortable().droppable({accept:$("#available li .drag-item")}),$("#enabled").on("click",".iconPicker",function(){const o=$(this).find("i");n.init(o,function(r){const l=r.attr("value"),g=o.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+g+'"] i.nav-icon').attr("class","fa fa-fw "+l),o.siblings('[name="iconClass"]').val(l),o.siblings(".change-icon-link").toggleClass("hidden",!!l)})}),$("#enabled").on("click",'[name="dropdown"]',function(){const o=$(this),r=o.parents("[data-index]").attr("data-index");$('#active-navigation [data-index="'+r+'"] i.dropdown-icon').toggleClass("hidden",!o.is(":checked"))}),$("#active-navigation").on("click","li",s),$("#enabled").on("click",".delete",x).on("click",".toggle",v),$("#save").on("click",b)};function s(){const o=$(this).attr("data-index");return d(o),!1}function d(o){$("#active-navigation li").removeClass("active"),$('#active-navigation [data-index="'+o+'"]').addClass("active");const r=$("#enabled").children('[data-index="'+o+'"]');$("#enabled li").addClass("hidden"),r.length&&r.removeClass("hidden")}function c(o,r){const l=r.helper.attr("data-id"),g=$('#active-navigation [data-id="'+l+'"]'),u=l==="custom"?{iconClass:"fa-navicon",groups:a[0].groups,enabled:!0}:a[l];u.index=(parseInt($("#enabled").children().last().attr("data-index"),10)||0)+1,u.title=f.escape(u.title),u.text=f.escape(u.text),u.groups=ajaxify.data.groups;const m=new Promise(E=>{t.parse("admin/settings/navigation","navigation",{navigation:[u]},function(P){f.translate(P,function(_){_=$(f.unescape(_)),g.after(_),g.remove(),E()})})}),h=new Promise(E=>{t.parse("admin/settings/navigation","enabled",{enabled:[u]},function(P){f.translate(P,function(_){_=$(f.unescape(_)),$("#enabled").append(_),E()})})});Promise.all([m,h]).then(()=>d(u.index))}function b(){const o=[],r=[];$("#active-navigation li").each(function(){r.push($(this).attr("data-index"))}),r.forEach(function(l){const u=$("#enabled").children('[data-index="'+l+'"]').find("form").serializeArray(),m={};u.forEach(function(h){m[h.name]?(Array.isArray(m[h.name])||(m[h.name]=[m[h.name]]),m[h.name].push(h.value)):m[h.name]=h.value}),o.push(m)}),socket.emit("admin.navigation.save",o,function(l){if(l)e.error(l);else{const g=document.getElementById("save");g.classList.toggle("saved",!0),setTimeout(()=>{g.classList.toggle("saved",!1)},5e3)}})}function x(){const o=$(this).parents("[data-index]").attr("data-index");return $('#active-navigation [data-index="'+o+'"]').remove(),$('#enabled [data-index="'+o+'"]').remove(),!1}function v(){const o=$(this),r=o.hasClass("enable"),l=o.parents("[data-index]").attr("data-index");return o.siblings(".toggle").removeClass("hidden"),o.addClass("hidden"),o.parents("li").find('[name="enabled"]').val(r?"on":""),$('#active-navigation [data-index="'+l+'"] a').toggleClass("text-muted",!r),!1}return i}.apply(y,C),A!==void 0&&(I.exports=A)},79914:(I,y,p)=>{var C,A,f;/*!
* jQuery UI Droppable 1.13.2
* http://jqueryui.com
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license.
* http://jquery.org/license
*/(function(n){"use strict";A=[p(74692),p(41758),p(23662),p(56883),p(69139)],C=n,f=typeof C=="function"?C.apply(y,A):C,f!==void 0&&(I.exports=f)})(function(n){"use strict";return n.widget("ui.droppable",{version:"1.13.2",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,e=this.options,i=e.accept;this.isover=!1,this.isout=!0,this.accept=typeof i=="function"?i:function(a){return a.is(i)},this.proportions=function(){if(arguments.length)t=arguments[0];else return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight})},this._addToManager(e.scope),e.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){n.ui.ddmanager.droppables[t]=n.ui.ddmanager.droppables[t]||[],n.ui.ddmanager.droppables[t].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var t=n.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,e){if(t==="accept")this.accept=typeof e=="function"?e:function(a){return a.is(e)};else if(t==="scope"){var i=n.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(e)}this._super(t,e)},_activate:function(t){var e=n.ui.ddmanager.current;this._addActiveClass(),e&&this._trigger("activate",t,this.ui(e))},_deactivate:function(t){var e=n.ui.ddmanager.current;this._removeActiveClass(),e&&this._trigger("deactivate",t,this.ui(e))},_over:function(t){var e=n.ui.ddmanager.current;!e||(e.currentItem||e.element)[0]===this.element[0]||this.accept.call(this.element[0],e.currentItem||e.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(e)))},_out:function(t){var e=n.ui.ddmanager.current;!e||(e.currentItem||e.element)[0]===this.element[0]||this.accept.call(this.element[0],e.currentItem||e.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(e)))},_drop:function(t,e){var i=e||n.ui.ddmanager.current,a=!1;return!i||(i.currentItem||i.element)[0]===this.element[0]||(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var s=n(this).droppable("instance");if(s.options.greedy&&!s.options.disabled&&s.options.scope===i.options.scope&&s.accept.call(s.element[0],i.currentItem||i.element)&&n.ui.intersect(i,n.extend(s,{offset:s.element.offset()}),s.options.tolerance,t))return a=!0,!1}),a)?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(i)),this.element):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}}),n.ui.intersect=function(){function t(e,i,a){return e>=i&&e<i+a}return function(e,i,a,s){if(!i.offset)return!1;var d=(e.positionAbs||e.position.absolute).left+e.margins.left,c=(e.positionAbs||e.position.absolute).top+e.margins.top,b=d+e.helperProportions.width,x=c+e.helperProportions.height,v=i.offset.left,o=i.offset.top,r=v+i.proportions().width,l=o+i.proportions().height;switch(a){case"fit":return v<=d&&b<=r&&o<=c&&x<=l;case"intersect":return v<d+e.helperProportions.width/2&&b-e.helperProportions.width/2<r&&o<c+e.helperProportions.height/2&&x-e.helperProportions.height/2<l;case"pointer":return t(s.pageY,o,i.proportions().height)&&t(s.pageX,v,i.proportions().width);case"touch":return(c>=o&&c<=l||x>=o&&x<=l||c<o&&x>l)&&(d>=v&&d<=r||b>=v&&b<=r||d<v&&b>r);default:return!1}}}(),n.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,e){var i,a,s=n.ui.ddmanager.droppables[t.options.scope]||[],d=e?e.type:null,c=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(i=0;i<s.length;i++)if(!(s[i].options.disabled||t&&!s[i].accept.call(s[i].element[0],t.currentItem||t.element))){for(a=0;a<c.length;a++)if(c[a]===s[i].element[0]){s[i].proportions().height=0;continue e}s[i].visible=s[i].element.css("display")!=="none",s[i].visible&&(d==="mousedown"&&s[i]._activate.call(s[i],e),s[i].offset=s[i].element.offset(),s[i].proportions({width:s[i].element[0].offsetWidth,height:s[i].element[0].offsetHeight}))}},drop:function(t,e){var i=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance,e)&&(i=this._drop.call(this,e)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,e)))}),i},dragStart:function(t,e){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,e)})},drag:function(t,e){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,e),n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var i,a,s,d=n.ui.intersect(t,this,this.options.tolerance,e),c=!d&&this.isover?"isout":d&&!this.isover?"isover":null;c&&(this.options.greedy&&(a=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return n(this).droppable("instance").options.scope===a}),s.length&&(i=n(s[0]).droppable("instance"),i.greedyChild=c==="isover")),i&&c==="isover"&&(i.isover=!1,i.isout=!0,i._out.call(i,e)),this[c]=!0,this[c==="isout"?"isover":"isout"]=!1,this[c==="isover"?"_over":"_out"].call(this,e),i&&c==="isout"&&(i.isout=!1,i.isover=!0,i._over.call(i,e)))}})},dragStop:function(t,e){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,e)}},n.uiBackCompat!==!1&&n.widget("ui.droppable",n.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),n.ui.droppable})}}]);
