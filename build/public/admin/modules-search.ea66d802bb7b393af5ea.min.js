"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[95903],{5117:(h,m,f)=>{var p,c;p=[f(6411),f(29930)],c=function(d,C){const g={};function v(o,l){return o.filter(function(e){return e.translations.toLowerCase().includes(l)}).map(function(e){const a=e.namespace,u=e.translations;let r=e.title;const n=utils.escapeRegexChars(l),s=u.replace(new RegExp("^(?:(?!"+n+").)*$","gmi"),"").replace(new RegExp("(^|\\n).*?"+r+".*?(\\n|$)","g"),"").replace(new RegExp("^[\\s\\S]*?(.{0,25})("+n+")(.{0,25})[\\s\\S]*?$","gmi"),'...$1<span class="search-match fw-bold">$2</span>$3...<br>').replace(/(?:\n ?)+/g,`
`).trim();return r=r.replace(new RegExp("(^.*?)("+n+")(.*?$)","gi"),'$1<span class="search-match">$2</span>$3'),'<li role="presentation" class="result"><a class="dropdown-item rounded-1" role="menuitem" href= "'+config.relative_path+"/"+a+'" >'+r+"<br>"+(s?"<small><code>"+s+"</small></code>":"")+"</a></li>"}).join("")}g.init=function(){app.user.privileges["admin:settings"]&&socket.emit("admin.getSearchDict",{},function(o,l){if(o)throw C.error(o),o;b(l)})};function b(o){$('[component="acp/search"]').each((i,e)=>{w(o,$(e))})}function w(o,l){const i=l.find(".dropdown"),e=l.find(".dropdown-menu"),a=l.find("input"),u=i.attr("data-text");config.searchEnabled||e.addClass("search-disabled"),a.on("keyup",function(){i.addClass("open")}),l.parents("form").on("submit",function(n){const s=a.val(),t=e.get(0).querySelector("li.result > a.focus")||e.get(0).querySelector("li.result > a"),x=t?t.getAttribute("href"):config.relative_path+"/search?in=titlesposts&term="+escape(s);return ajaxify.go(x.replace(/^\//,"")),setTimeout(function(){i.removeClass("open"),a.blur(),i.attr("data-text",s||u)},150),n.preventDefault(),!1}),d.bind("/",function(n){a.select(),n.preventDefault()}),d(a[0]).bind(["up","down"],function(n,s){let t;s==="up"?(t=e.find("li.result > a.focus").removeClass("focus").parent().prev(".result").children(),t.length||(t=e.find("li.result > a").last()),t.addClass("focus"),e[0].getBoundingClientRect().top>t[0].getBoundingClientRect().top&&t[0].scrollIntoView(!0)):s==="down"&&(t=e.find("li.result > a.focus").removeClass("focus").parent().next(".result").children(),t.length||(t=e.find("li.result > a").first()),t.addClass("focus"),e[0].getBoundingClientRect().bottom<t[0].getBoundingClientRect().bottom&&t[0].scrollIntoView(!1)),n.preventDefault()});let r;a.on("keyup focus",function(){const n=a.val().toLowerCase();if(n===r)return;r=n,e.children(".result").remove();const s=/\W/.test(n)?3:n.length;let t;e.toggleClass("state-start-typing",s===0),e.toggleClass("state-keep-typing",s>0&&s<3),s>=3?(e.prepend(v(o,n)),t=e.children(".result").length,e.toggleClass("state-no-results",!t),e.toggleClass("state-yes-results",!!t),e.find(".search-forum").not(".divider").find("a").attr("href",config.relative_path+"/search?in=titlesposts&term="+escape(n)).find("strong").text(n)):e.removeClass("state-no-results state-yes-results")})}return g}.apply(m,p),c!==void 0&&(h.exports=c)}}]);
