(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[20016],{25540:(T,b,l)=>{(function(i){"use strict";var h={tagClass:function(t){return"label label-info"},focusClass:"focus",itemValue:function(t){return t&&t.toString()},itemText:function(t){return this.itemValue(t)},itemTitle:function(t){return null},freeInput:!0,addOnBlur:!0,maxTags:void 0,maxChars:void 0,confirmKeys:[13,44],delimiter:",",delimiterRegex:null,cancelConfirmKeysOnEmpty:!1,onTagExists:function(t,e){e.hide().fadeIn()},trimValue:!1,allowDuplicates:!1,triggerChange:!0};function d(t,e){this.isInit=!0,this.itemsArray=[],this.$element=i(t),this.$element.hide(),this.isSelect=t.tagName==="SELECT",this.multiple=this.isSelect&&t.hasAttribute("multiple"),this.objectItems=e&&e.itemValue,this.placeholderText=t.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=i('<div class="bootstrap-tagsinput"></div>'),this.$input=i('<input type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.before(this.$container),this.build(e),this.isInit=!1}d.prototype={constructor:d,add:function(t,e,a){var n=this;if(!(n.options.maxTags&&n.itemsArray.length>=n.options.maxTags)&&!(t!==!1&&!t)){if(typeof t=="string"&&n.options.trimValue&&(t=i.trim(t)),typeof t=="object"&&!n.objectItems)throw"Can't add objects when itemValue option is not set";if(!t.toString().match(/^\s*$/)){if(n.isSelect&&!n.multiple&&n.itemsArray.length>0&&n.remove(n.itemsArray[0]),typeof t=="string"&&this.$element[0].tagName==="INPUT"){var o=n.options.delimiterRegex?n.options.delimiterRegex:n.options.delimiter,s=t.split(o);if(s.length>1){for(var c=0;c<s.length;c++)this.add(s[c],!0);e||n.pushVal(n.options.triggerChange);return}}var u=n.options.itemValue(t),f=n.options.itemText(t),C=n.options.tagClass(t),A=n.options.itemTitle(t),x=i.grep(n.itemsArray,function(V){return n.options.itemValue(V)===u})[0];if(x&&!n.options.allowDuplicates){if(n.options.onTagExists){var E=i(".tag",n.$container).filter(function(){return i(this).data("item")===x});n.options.onTagExists(t,E)}return}if(!(n.items().toString().length+t.length+1>n.options.maxInputLength)){var R=i.Event("beforeItemAdd",{item:t,cancel:!1,options:a});if(n.$element.trigger(R),!R.cancel){n.itemsArray.push(t);var I=i('<span class="tag '+p(C)+(A!==null?'" title="'+A:"")+'">'+p(f)+'<span data-role="remove"></span></span>');if(I.data("item",t),n.findInputWrapper().before(I),I.after(" "),n.isSelect){var K=i('option[value="'+encodeURIComponent(u)+'"]',n.$element).length||i('option[value="'+p(u)+'"]',n.$element).length;if(!K){var P=i("<option selected>"+p(f)+"</option>");P.data("item",t),P.attr("value",u),n.$element.append(P)}}e||n.pushVal(n.options.triggerChange),(n.options.maxTags===n.itemsArray.length||n.items().toString().length===n.options.maxInputLength)&&n.$container.addClass("bootstrap-tagsinput-max"),i(".typeahead, .twitter-typeahead",n.$container).length&&n.$input.typeahead("val",""),this.isInit?n.$element.trigger(i.Event("itemAddedOnInit",{item:t,options:a})):n.$element.trigger(i.Event("itemAdded",{item:t,options:a}))}}}}},remove:function(t,e,a){var n=this;if(n.objectItems&&(typeof t=="object"?t=i.grep(n.itemsArray,function(s){return n.options.itemValue(s)==n.options.itemValue(t)}):t=i.grep(n.itemsArray,function(s){return n.options.itemValue(s)==t}),t=t[t.length-1]),t){var o=i.Event("beforeItemRemove",{item:t,cancel:!1,options:a});if(n.$element.trigger(o),o.cancel)return;i(".tag",n.$container).filter(function(){return i(this).data("item")===t}).remove(),i("option",n.$element).filter(function(){return i(this).data("item")===t}).remove(),i.inArray(t,n.itemsArray)!==-1&&n.itemsArray.splice(i.inArray(t,n.itemsArray),1)}e||n.pushVal(n.options.triggerChange),n.options.maxTags>n.itemsArray.length&&n.$container.removeClass("bootstrap-tagsinput-max"),n.$element.trigger(i.Event("itemRemoved",{item:t,options:a}))},removeAll:function(){var t=this;for(i(".tag",t.$container).remove(),i("option",t.$element).remove();t.itemsArray.length>0;)t.itemsArray.pop();t.pushVal(t.options.triggerChange)},refresh:function(){var t=this;i(".tag",t.$container).each(function(){var e=i(this),a=e.data("item"),n=t.options.itemValue(a),o=t.options.itemText(a),s=t.options.tagClass(a);if(e.attr("class",null),e.addClass("tag "+p(s)),e.contents().filter(function(){return this.nodeType==3})[0].nodeValue=p(o),t.isSelect){var c=i("option",t.$element).filter(function(){return i(this).data("item")===a});c.attr("value",n)}})},items:function(){return this.itemsArray},pushVal:function(){var t=this,e=i.map(t.items(),function(a){return t.options.itemValue(a).toString()});t.$element.val(e,!0),t.options.triggerChange&&t.$element.trigger("change")},build:function(t){var e=this;if(e.options=i.extend({},h,t),e.objectItems&&(e.options.freeInput=!1),m(e.options,"itemValue"),m(e.options,"itemText"),v(e.options,"tagClass"),e.options.typeahead){var a=e.options.typeahead||{};v(a,"source"),e.$input.typeahead(i.extend({},a,{source:function(c,u){function f(x){for(var E=[],R=0;R<x.length;R++){var I=e.options.itemText(x[R]);C[I]=x[R],E.push(I)}u(E)}this.map={};var C=this.map,A=a.source(c);i.isFunction(A.success)?A.success(f):i.isFunction(A.then)?A.then(f):i.when(A).then(f)},updater:function(c){return e.add(this.map[c]),this.map[c]},matcher:function(c){return c.toLowerCase().indexOf(this.query.trim().toLowerCase())!==-1},sorter:function(c){return c.sort()},highlighter:function(c){var u=new RegExp("("+this.query+")","gi");return c.replace(u,"<strong>$1</strong>")}}))}if(e.options.typeaheadjs){var n=null,o={},s=e.options.typeaheadjs;i.isArray(s)?(n=s[0],o=s[1]):o=s,e.$input.typeahead(n,o).on("typeahead:selected",i.proxy(function(c,u){o.valueKey?e.add(u[o.valueKey]):e.add(u),e.$input.typeahead("val","")},e))}e.$container.on("click",i.proxy(function(c){e.$element.attr("disabled")||e.$input.removeAttr("disabled"),e.$input.focus()},e)),e.options.addOnBlur&&e.options.freeInput&&e.$input.on("focusout",i.proxy(function(c){i(".typeahead, .twitter-typeahead",e.$container).length===0&&(e.add(e.$input.val()),e.$input.val(""))},e)),e.$container.on({focusin:function(){e.$container.addClass(e.options.focusClass)},focusout:function(){e.$container.removeClass(e.options.focusClass)}}),e.$container.on("keydown","input",i.proxy(function(c){var u=i(c.target),f=e.findInputWrapper();if(e.$element.attr("disabled")){e.$input.attr("disabled","disabled");return}switch(c.which){case 8:if(y(u[0])===0){var C=f.prev();C.length&&e.remove(C.data("item"))}break;case 46:if(y(u[0])===0){var A=f.next();A.length&&e.remove(A.data("item"))}break;case 37:var x=f.prev();u.val().length===0&&x[0]&&(x.before(f),u.focus());break;case 39:var E=f.next();u.val().length===0&&E[0]&&(E.after(f),u.focus());break;default:}var R=u.val().length,I=Math.ceil(R/5),K=R+I+1;u.attr("size",Math.max(this.inputSize,u.val().length))},e)),e.$container.on("keypress","input",i.proxy(function(c){var u=i(c.target);if(e.$element.attr("disabled")){e.$input.attr("disabled","disabled");return}var f=u.val(),C=e.options.maxChars&&f.length>=e.options.maxChars;e.options.freeInput&&(r(c,e.options.confirmKeys)||C)&&(f.length!==0&&(e.add(C?f.substr(0,e.options.maxChars):f),u.val("")),e.options.cancelConfirmKeysOnEmpty===!1&&c.preventDefault());var A=u.val().length,x=Math.ceil(A/5),E=A+x+1;u.attr("size",Math.max(this.inputSize,u.val().length))},e)),e.$container.on("click","[data-role=remove]",i.proxy(function(c){e.$element.attr("disabled")||e.remove(i(c.target).closest(".tag").data("item"))},e)),e.options.itemValue===h.itemValue&&(e.$element[0].tagName==="INPUT"?e.add(e.$element.val()):i("option",e.$element).each(function(){e.add(i(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var t=this.$input[0],e=this.$container[0];t&&t.parentNode!==e;)t=t.parentNode;return i(t)}},i.fn.tagsinput=function(t,e,a){var n=[];return this.each(function(){var o=i(this).data("tagsinput");if(!o)o=new d(this,t),i(this).data("tagsinput",o),n.push(o),this.tagName==="SELECT"&&i("option",i(this)).attr("selected","selected"),i(this).val(i(this).val());else if(!t&&!e)n.push(o);else if(o[t]!==void 0){if(o[t].length===3&&a!==void 0)var s=o[t](e,null,a);else var s=o[t](e);s!==void 0&&n.push(s)}}),typeof t=="string"?n.length>1?n:n[0]:n},i.fn.tagsinput.Constructor=d;function m(t,e){if(typeof t[e]!="function"){var a=t[e];t[e]=function(n){return n[a]}}}function v(t,e){if(typeof t[e]!="function"){var a=t[e];t[e]=function(){return a}}}var g=i("<div />");function p(t){return t?g.text(t).html():""}function y(t){var e=0;if(document.selection){t.focus();var a=document.selection.createRange();a.moveStart("character",-t.value.length),e=a.text.length}else(t.selectionStart||t.selectionStart=="0")&&(e=t.selectionStart);return e}function r(t,e){var a=!1;return i.each(e,function(n,o){if(typeof o=="number"&&t.which===o)return a=!0,!1;if(t.which===o.which){var s=!o.hasOwnProperty("altKey")||t.altKey===o.altKey,c=!o.hasOwnProperty("shiftKey")||t.shiftKey===o.shiftKey,u=!o.hasOwnProperty("ctrlKey")||t.ctrlKey===o.ctrlKey;if(s&&c&&u)return a=!0,!1}}),a}i(function(){i("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})})(window.jQuery),jQuery.fn.serializeObject=function(){for(var i={},h=this.serializeArray(),d=0,m=h.length;d<m;d++){var v=h[d],g=v.name,p=v.value!=null?v.value:"";i[g]!==void 0?(i[g].push||(i[g]=[i[g]]),i[g].push(p)):i[g]=p}return i},function(i){T.exports?T.exports=i(l(74692)):i(window.jQuery)}(function(i){function h(t,e,a){var n=a[t];return n===void 0?a[t]=[e]:n.push(e),a}function d(t,e){var a={},n=t.map(function(){return this.elements?i.makeArray(this.elements):this}).filter(e||":input:not(:disabled)").get();return i.each(n,function(o,s){h(s.name,s,a)}),a}function m(t){return(t.type||t.nodeName).toLowerCase()}function v(t){var e={},a=/\+/g;return i.isPlainObject(t)?(i.extend(e,t),i.each(e,function(n,o){i.isArray(o)||(e[n]=[o])})):i.isArray(t)?i.each(t,function(n,o){h(o.name,o.value,e)}):typeof t=="string"&&i.each(t.split("&"),function(n,o){var s=o.split("="),c=decodeURIComponent(s[0].replace(a,"%20")),u=decodeURIComponent(s[1].replace(a,"%20"));h(c,u,e)}),e}var g={checked:["radio","checkbox"],selected:["option","select-one","select-multiple"],value:["button","color","date","datetime","datetime-local","email","hidden","month","number","password","range","reset","search","submit","tel","text","textarea","time","url","week"]};function p(t){var e=m(t),a=void 0;return i.each(g,function(n,o){if(i.inArray(e,o)>-1)return a=n,!1}),a}function y(t,e,a,n,o){var s=p(t);if(s=="value"&&e==n)t.value=a,o.call(t,a);else if(s=="checked"||s=="selected"){var c=[];t.options?i.each(t.options,function(u,f){c.push(f)}):c.push(t),t.multiple&&n==0&&(t.selectedIndex=-1),i.each(c,function(u,f){f.value==a&&(f[s]=!0,o.call(f,a))})}}var r={change:i.noop,complete:i.noop};i.fn.deserialize=function(t,e){i.isFunction(e)&&(e={complete:e}),e=i.extend(r,e||{}),t=v(t);var a=d(this,e.filter);return i.each(t,function(n,o){i.each(a[n],function(s,c){i.each(o,function(u,f){y(c,s,f,u,e.change)})})}),e.complete.call(this),this}}),Promise.resolve().then(function(){var i=[l(17459),l(40027)];(function(h,d){"use strict";Object.defineProperty?Object.defineProperty(window,"bootbox",{configurable:!0,enumerable:!0,get:function(){return console.warn('[deprecated] Accessing bootbox globally is deprecated. Use `require(["bootbox"], function (bootbox) { ... })` instead'),d}}):window.bootbox=d,d.setDefaults({locale:config.userLang});var m=h.Translator.create(),v=d.dialog,g=["placeholder","title","value","label"];d.dialog=function(p){var y=p.show!==!1;p.show=!1;var r=v.call(d,p),t=r[0];return/\[\[.+\]\]/.test(t.outerHTML)?m.translateInPlace(t,g).then(function(){y&&r.modal("show")}):y&&r.modal("show"),r},Promise.all([m.translateKey("modules:bootbox.ok",[]),m.translateKey("modules:bootbox.cancel",[]),m.translateKey("modules:bootbox.confirm",[])]).then(function(p){var y=h.getLanguage();d.addLocale(y,{OK:p[0],CANCEL:p[1],CONFIRM:p[2]}),d.setLocale(y)})}).apply(null,i)}).catch(l.oe),l.e(74953).then(function(){var i=[l(46243)];(function(h){$(window).on("composer:autocomplete:init chat:autocomplete:init",function(d,m){h.init(),m.strategies.push(h.strategy)}),$(window).on("action:chat.loaded",(d,m)=>{const v=$(m),g=v.find('[component="chat/input"]')[0];v.find('[data-action="emoji"]').on("click",y=>{l.e(86924).then(function(){var r=[l(86924)];(function(t){t.toggleForInsert(g,0,0,y)}).apply(null,r)}).catch(l.oe)})})}).apply(null,i)}).catch(l.oe)},7740:(T,b,l)=>{"use strict";l(67032),l(25540),app.onDomReady(),function(){let i=0,h;function d(){app.config.adminReloginDuration<=0||(i&&clearTimeout(i),h||Promise.resolve().then(function(){var r=[l(17459)];(function(t){t.translate("[[login:logged-out-due-to-inactivity]]",function(e){h=e})}).apply(null,r)}).catch(l.oe),i=setTimeout(function(){Promise.resolve().then(function(){var r=[l(40027)];(function(t){t.alert({closeButton:!1,message:h,callback:function(){window.location.reload()}})}).apply(null,r)}).catch(l.oe)},36e5))}Promise.all([l.e(6411),l.e(61396)]).then(function(){var r=[l(91749),l(54222)];((t,e)=>{t.on("action:ajaxify.end",a=>{p(a.url),y(),m(),d(),$('[data-bs-toggle="tooltip"]').tooltip({animation:!1,container:"#content"}),$(".settings").length&&e.prepare(),$('[component="settings/toc"]').length&&e.populateTOC()}),t.on("action:ajaxify.start",function(){Promise.resolve().then(function(){var a=[l(89336)];(function(n){const o=n.Offcanvas.getInstance("#offcanvas");o&&o.hide()}).apply(null,a)}).catch(l.oe)})}).apply(null,r)}).catch(l.oe);function m(){const r=$('[component="acp/accordion"]');let t=window.location.pathname;t==="/admin"&&(t="/admin/dashboard");const e=r.find(`a[href="${t}"]`);e.length&&(r.find("a").removeClass("active"),r.find(".accordion-collapse").removeClass("show"),e.addClass("active"),e.parents(".accordion-collapse").addClass("show"))}$(document).ready(function(){Promise.all([l.e(6411),l.e(95903)]).then(function(){var r=[l(5117)];(function(t){t.init()}).apply(null,r)}).catch(l.oe),$('[component="logout"]').on("click",function(){return l.e(20739).then(function(){var r=[l(75427)];(function(t){t()}).apply(null,r)}).catch(l.oe),!1}),g(),v()});function v(){const r=$("#offcanvas #accordionACP");r.attr("id","accordionACP-offcanvas"),r.find("[data-bs-target]").each((t,e)=>{$(e).attr("data-bs-target",$(e).attr("data-bs-target")+"-offcanvas")}),r.find("[data-bs-parent]").each((t,e)=>{$(e).attr("data-bs-parent","#accordionACP-offcanvas")}),r.find(".accordion-collapse").each((t,e)=>{$(e).attr("id",$(e).attr("id")+"-offcanvas")})}function g(){l.e(5947).then(function(){var r=[l(5947),l(91749)];(function(t,e){$(window).on("action:ajaxify.start",function(){t.set(.7)}),e.on("action:ajaxify.end",function(){t.done()})}).apply(null,r)}).catch(l.oe)}function p(r){Promise.resolve().then(function(){var t=[l(17459)];(function(e){r=r.replace(/\/\d+$/,"").split("/").slice(0,3).join("/").split(/[?#]/)[0].replace(/(\/+$)|(^\/+)/,""),r==="admin"&&(r="admin/dashboard"),r=[config.relative_path,r].join("/");let a;$(`[component="acp/accordion"] a[href="${r}"]`).each(function(){a=$(this).text()});let n,o;if(/admin\/plugins\//.test(r))n=a,o="[[admin/menu:section-plugins]] > "+n;else{const s=r.match(/admin\/(.+?)\/(.+?)$/);s?(n="[[admin/menu:"+s[1]+"/"+s[2]+"]]",o="[[admin/menu:section-"+(s[1]==="development"?"advanced":s[1])+"]]"+(s[2]?" > "+n:""),s[2]==="settings"&&(n=e.compile("admin/menu:settings.page-title",n))):(n="[[admin/menu:section-dashboard]]",o="[[admin/menu:section-dashboard]]")}o=e.compile("admin/admin:acp-title",o),e.translate(o,function(s){document.title=s.replace(/&gt;/g,">")})}).apply(null,t)}).catch(l.oe)}function y(){l.e(32050).then(function(){var r=[l(81335),l(40027),l(27270)];(function(t,e,a){t.render("partials/toast",{}).then(function(){$('[component="rebuild-and-restart"]').off("click").on("click",function(){e.confirm("[[admin/admin:alert.confirm-rebuild-and-restart]]",function(n){n&&a.rebuildAndRestart()})}),$('[component="restart"]').off("click").on("click",function(){e.confirm("[[admin/admin:alert.confirm-restart]]",function(n){n&&a.restart()})})})}).apply(null,r)}).catch(l.oe)}}()}}]);
