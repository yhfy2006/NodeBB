"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[78289,53020,99127,95737,34271,13417,1091,25432,15794,26174,49897,34405],{91847:(R,P,u)=>{var p,h;p=[u(17459),u(81335),u(34405),u(49897),u(13230),u(40027),u(29930),u(30637),u(30076),u(86296)],h=function(k,x,C,g,D,d,s,y,v,b){const w={};w.init=function(){$("#results-per-page").val(ajaxify.data.resultsPerPage).on("change",function(){const n=utils.params();n.resultsPerPage=$("#results-per-page").val();const t=M(n);ajaxify.go(window.location.pathname+"?"+t)}),$(".export-csv").on("click",function(){return socket.once("event:export-users-csv",function(){s.remove("export-users-start"),s.alert({alert_id:"export-users",type:"success",title:"[[global:alert.success]]",message:"[[admin/manage/users:export-users-completed]]",clickfn:function(){window.location.href=config.relative_path+"/api/admin/users/csv"},timeout:0})}),socket.emit("admin.user.exportUsersCSV",{},function(n){if(n)return s.error(n);s.alert({alert_id:"export-users-start",message:"[[admin/manage/users:export-users-started]]",timeout:ajaxify.data.userCount/5e3*500})}),!1});function i(){const n=[];return $('.users-table [component="user/select/single"]').each(function(){$(this).is(":checked")&&n.push($(this).attr("data-uid"))}),n}function l(n,t){$('.users-table [component="user/select/single"]:checked').parents(".user-row").find(n).each(function(){$(this).toggleClass("hidden",!t)})}function S(){$('.users-table [component="user/select/single"]').prop("checked",!1),$('.users-table [component="user/select/all"]').prop("checked",!1)}function I(n){const t=document.querySelector(`.users-table [component="user/select/single"][data-uid="${n}"]`);if(t){const r=t.closest(".user-row");r.parentNode.removeChild(r)}}function T(n,t,r){return function(o){if(o)return s.error(o);s.success(n),t&&l(t,r),S()}}function U(n,t,r){s.success(n),t&&l(t,r),S()}$('[component="user/select/all"]').on("click",function(){$('.users-table [component="user/select/single"]').prop("checked",$(this).is(":checked"))}),$(".manage-groups").on("click",function(){const n=i();if(!n.length)return s.error("[[error:no-users-selected]]"),!1;socket.emit("admin.user.loadGroups",n,function(t,r){if(t)return s.error(t);x.render("admin/partials/manage_user_groups",r).then(function(o){const m=d.dialog({message:o,title:"[[admin/manage/users:manage-groups]]",onEscape:!0});m.on("shown.bs.modal",function(){C.group(m.find(".group-search"),function(E,A){const N=$(E.target).attr("data-uid");g.put("/groups/"+A.item.group.slug+"/membership/"+N,void 0).then(()=>{A.item.group.nameEscaped=k.escape(A.item.group.displayName),app.parseAndTranslate("admin/partials/manage_user_groups",{users:[{groups:[A.item.group]}]},function(K){$("[data-uid="+N+"] .group-area").append(K.find(".group-area").html())})}).catch(s.error)})}),m.on("click",".group-area a",function(){m.modal("hide")}),m.on("click",".remove-group-icon",function(){const E=$(this).parents("[data-group-name]"),A=E.attr("data-group-name"),N=$(this).parents("[data-uid]").attr("data-uid");return g.del("/groups/"+D(A)+"/membership/"+N).then(()=>{E.remove()}).catch(s.error),!1})})})}),$(".set-reputation").on("click",function(){const n=i();if(!n.length)return s.error("[[error:no-users-selected]]"),!1;let t="";if(n.length===1){const o=ajaxify.data.users.find(m=>m&&m.uid===parseInt(n[0],10));o&&(t=String(o.reputation))}const r=d.dialog({message:`<input id="new-reputation" type="text" class="form-control" value="${t}">`,title:"[[admin/manage/users:set-reputation]]",onEscape:!0,buttons:{submit:{label:"[[global:save]]",callback:function(){const o=r.find("#new-reputation").val();if(!utils.isNumber(o))return s.error("[[error:invalid-data]]"),!1;socket.emit("admin.user.setReputation",{value:o,uids:n}).then(()=>{n.forEach(m=>{$(`[component="user/reputation"][data-uid="${m}"]`).text(v.formattedNumber(o));const E=ajaxify.data.users.find(A=>A&&A.uid===parseInt(m,10));E&&(E.reputation=o)})}).catch(s.error)}}}});r.on("shown.bs.modal",()=>{r.find("#new-reputation").selectRange(0,r.find("#new-reputation").val().length)})}),$(".ban-user").on("click",function(){const n=i();if(!n.length)return s.error("[[error:no-users-selected]]"),!1;d.confirm(n.length>1?"[[admin/manage/users:alerts.confirm-ban-multi]]":"[[admin/manage/users:alerts.confirm-ban]]",function(t){t&&Promise.all(n.map(function(r){return g.put("/users/"+r+"/ban")})).then(()=>{U("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(s.error)})}),$(".ban-user-temporary").on("click",function(){const n=i();if(!n.length)return s.error("[[error:no-users-selected]]"),!1;x.render("modals/temporary-ban",{}).then(function(t){d.dialog({className:"ban-modal",title:"[[user:ban-account]]",message:t,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[admin/manage/users:alerts.button-ban-x, "+n.length+"]]",callback:function(){const r=$(".ban-modal form").serializeArray().reduce(function(m,E){return m[E.name]=E.value,m},{}),o=r.length>0?Date.now()+r.length*1e3*60*60*(parseInt(r.unit,10)?24:1):0;Promise.all(n.map(function(m){return g.put("/users/"+m+"/ban",{until:o,reason:r.reason})})).then(()=>{U("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(s.error)}}}})})}),$(".unban-user").on("click",function(){const n=i();if(!n.length)return s.error("[[error:no-users-selected]]"),!1;Promise.all(n.map(function(t){return g.del("/users/"+t+"/ban")})).then(()=>{U("[[admin/manage/users:alerts.unban-success]]",".ban",!1)})}),$(".reset-lockout").on("click",function(){const n=i();n.length&&socket.emit("admin.user.resetLockouts",n,T("[[admin/manage/users:alerts.lockout-reset-success]]"))}),$(".change-email").on("click",function(){const n=i();if(n.length!==1)return s.error("[[admin/manage/users:alerts.select-a-single-user-to-change-email]]");b.init({uid:n[0],onSuccess:function(t){l(".notvalidated",!1),l(".pending",!1),l(".expired",!1),l(".validated",!1),l(".validated-by-admin",!!t),l(".no-email",!t),$('.users-table [component="user/select/single"]:checked').parents(".user-row").find(".validated-by-admin .email").text(t)}})}),$(".validate-email").on("click",function(){const n=i();n.length&&d.confirm("[[admin/manage/users:alerts.confirm-validate-email]]",function(t){t&&socket.emit("admin.user.validateEmail",n,function(r){if(r)return s.error(r);s.success("[[admin/manage/users:alerts.validate-email-success]]"),l(".notvalidated",!1),l(".pending",!1),l(".expired",!1),l(".validated",!1),l(".validated-by-admin",!0),S()})})}),$(".send-validation-email").on("click",function(){const n=i();n.length&&socket.emit("admin.user.sendValidationEmail",n,function(t){if(t)return s.error(t);s.success("[[notifications:email-confirm-sent]]")})}),$(".change-password").on("click",async function(){const n=i();if(!n.length)return;async function t(o){const m=o.find("#newPassword").val(),E=o.find("#confirmPassword").val();if(m!==E)throw new Error("[[[user:change-password-error-match]]");await Promise.all(n.map(A=>g.put("/users/"+A+"/password",{currentPassword:"",newPassword:m})))}const r=d.dialog({message:`<div class="d-flex flex-column gap-2">
					<label class="form-label">[[user:new-password]]</label>
					<input id="newPassword" class="form-control" type="text">
					<label class="form-label">[[user:confirm-password]]</label>
					<input id="confirmPassword" class="form-control" type="text">
				</div>`,title:"[[admin/manage/users:change-password]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){return t(r).then(()=>{r.modal("hide")}).catch(s.error),!1}}}})}),$(".password-reset-email").on("click",function(){const n=i();n.length&&d.confirm("[[admin/manage/users:alerts.password-reset-confirm]]",function(t){t&&socket.emit("admin.user.sendPasswordResetEmail",n,T("[[admin/manage/users:alerts.password-reset-email-sent]]"))})}),$(".force-password-reset").on("click",function(){const n=i();n.length&&d.confirm("[[admin/manage/users:alerts.confirm-force-password-reset]]",function(t){t&&socket.emit("admin.user.forcePasswordReset",n,T("[[admin/manage/users:alerts.validate-force-password-reset-success]]"))})}),$(".delete-user").on("click",()=>{F("[[admin/manage/users:alerts.confirm-delete]]","/account")}),$(".delete-user-content").on("click",()=>{F("[[admin/manage/users:alerts.confirm-delete-content]]","/content")}),$(".delete-user-and-content").on("click",()=>{F("[[admin/manage/users:alerts.confirm-purge]]","")});const j=document.querySelector(".users-table"),H=document.getElementById("action-dropdown");j.addEventListener("change",n=>{(n.target.closest('[component="user/select/single"]')||n.target.closest('[component="user/select/all"]'))&&(i().length?H.removeAttribute("disabled"):H.setAttribute("disabled","disabled"))});function F(n,t){const r=i();r.length&&d.confirm(n,function(o){o&&Promise.all(r.map(m=>g.del(`/users/${m}${t}`,{}).then(()=>{t!=="/content"&&I(m)}))).then(()=>{t!=="/content"?s.success("[[admin/manage/users:alerts.delete-success]]"):s.success("[[admin/manage/users:alerts.delete-content-success]]"),S(),$('.users-table [component="user/select/single"]').length||ajaxify.refresh()}).catch(s.error)})}function J(){$('[data-action="create"]').on("click",function(){return x.render("admin/partials/create_user_modal",{}).then(function(n){const t=d.dialog({message:n,title:"[[admin/manage/users:alerts.create]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},create:{label:"[[admin/manage/users:alerts.button-create]]",className:"btn-primary",callback:function(){return e.call(this),!1}}}});t.on("shown.bs.modal",function(){t.find("#create-user-name").focus()})}),!1})}function e(){const n=this,t=document.getElementById("create-user-name").value,r=document.getElementById("create-user-email").value,o=document.getElementById("create-user-password").value,m=document.getElementById("create-user-password-again").value,E=$("#create-modal-error");if(o!==m)return E.translateHtml("[[admin/manage/users:alerts.error-x, [[admin/manage/users:alerts.error-passwords-different]]]]").removeClass("hide");const A={username:t,email:r,password:o};g.post("/users",A).then(()=>{n.modal("hide"),n.on("hidden.bs.modal",function(){ajaxify.refresh()}),s.success("[[admin/manage/users:alerts.create-success]]")}).catch(N=>E.translateHtml("[[admin/manage/users:alerts.error-x, "+N.message+"]]").removeClass("hidden"))}a(),J(),L(),B(),y.handle()};function a(){function i(){$(".fa-spinner").removeClass("hidden"),f({searchBy:$("#user-search-by").val(),query:$("#user-search").val(),page:1})}$("#user-search").on("keyup",utils.debounce(i,250)),$("#user-search-by").on("change",i)}function f(i){const l=utils.params();l.searchBy=i.searchBy,l.query=i.query,l.page=i.page,l.sortBy=l.sortBy||"lastonline";const S=decodeURIComponent($.param(l));$.get(config.relative_path+"/api/admin/manage/users?"+S,function(I){c(I);const T=config.relative_path+"/admin/manage/users?"+S;history.pushState&&history.pushState({url:T},null,window.location.protocol+"//"+window.location.host+T)}).fail(function(I){I&&I.responseJSON&&I.responseJSON.error&&s.error(I.responseJSON.error)})}function c(i){x.render("partials/paginator",{pagination:i.pagination}).then(function(l){$(".pagination-container").replaceWith(l)}),app.parseAndTranslate("admin/manage/users","users",i,function(l){if($(".users-table tbody tr").remove(),$(".users-table tbody").append(l),l.find(".timeago").timeago(),$(".fa-spinner").addClass("hidden"),!$("#user-search").val()){$("#user-found-notify").addClass("hidden"),$("#user-notfound-notify").addClass("hidden");return}i&&i.users.length===0?($("#user-notfound-notify").translateHtml("[[admin/manage/users:search.not-found]]").removeClass("hidden"),$("#user-found-notify").addClass("hidden")):($("#user-found-notify").translateHtml(k.compile("admin/manage/users:alerts.x-users-found",i.matchCount,i.timing)).removeClass("hidden"),$("#user-notfound-notify").addClass("hidden"))})}function M(i){return $("#user-search").val()?(i.query=$("#user-search").val(),i.searchBy=$("#user-search-by").val()):(delete i.query,delete i.searchBy),decodeURIComponent($.param(i))}function L(){$(".users-table thead th").on("click",function(){const l=$(this).attr("data-sort");if(!l)return;const S=utils.params();S.sortBy=l,ajaxify.data.sortBy===l?S.sortDirection=ajaxify.data.reverse?"asc":"desc":S.sortDirection="desc";const I=M(S);ajaxify.go("admin/manage/users?"+I)})}function _(){const i=[];return $("#filter-by").find("[data-filter-by]").each(function(){$(this).find(".fa-check").length&&i.push($(this).attr("data-filter-by"))}),i}function B(){let i=_();$("#filter-by").on("click","li",function(){const l=$(this);return l.find("i").toggleClass("fa-check",!l.find("i").hasClass("fa-check")),!1}),$("#filter-by").on("hidden.bs.dropdown",function(){const l=_();let S=l.length!==i.length;if(l.length===i.length&&l.forEach(function(I,T){I!==i[T]&&(S=!0)}),i=_(),S){const I=utils.params();I.filters=l;const T=M(I);ajaxify.go("admin/manage/users?"+T)}})}return w}.apply(P,p),h!==void 0&&(R.exports=h)},86296:(R,P,u)=>{var p,h;p=[u(49897),u(40027),u(29930)],h=function(k,x,C){const g={};return g.init=function(D){const d=x.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(D.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const s=d.find("#newEmail").val();return k.post("/users/"+D.uid+"/emails",{skipConfirmation:!0,email:s}).then(()=>{d.modal("hide"),D.onSuccess(s)}).catch(C.error),!1}}}})},g}.apply(P,p),h!==void 0&&(R.exports=h)},30637:(R,P,u)=>{var p,h;p=[u(49897),u(81335),u(40027),u(29930)],h=function(k,x,C,g){const D={};function d(){return ajaxify.data.template.name.startsWith("admin/")}return D.handle=function(){$('[component="user/invite"]').on("click",function(s){s.preventDefault(),k.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(y=>{x.parse("modals/invite",{groups:y},function(v){C.dialog({message:v,title:`[[${d()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${d()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${d()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:D.send}}})})}).catch(g.error)})},D.send=function(){const s=$("#invite-modal-emails"),y=$("#invite-modal-groups"),v={emails:s.val().split(",").map(b=>b.trim()).filter(Boolean).filter((b,w,a)=>w===a.indexOf(b)).join(","),groupsToJoin:y.val()};v.emails&&k.post(`/users/${app.user.uid}/invites`,v).then(()=>{g.success(`[[${d()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${v.emails.replace(/,/g,"&#44; ")}]]`)}).catch(g.error)},D}.apply(P,p),h!==void 0&&(R.exports=h)},49897:(R,P,u)=>{u.r(P),u.d(P,{del:()=>w,get:()=>d,head:()=>s,patch:()=>v,post:()=>y,put:()=>b});var p=u(91749),h=u.n(p),k=u(40027),x=u.n(k);const C=config.relative_path+"/api/v3";async function g(a,f){if(a.url=a.url.startsWith("/api")?config.relative_path+a.url:C+a.url,typeof f=="function"){D(a).then(c=>f(null,c),c=>f(c));return}try{return await D(a)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again.")return(0,k.confirm)("[[error:api.reauth-required]]",M=>{M&&ajaxify.go("login")});throw c}}async function D(a){const{url:f}=a;delete a.url,a.data&&!(a.data instanceof FormData)&&(a.data=JSON.stringify(a.data||{}),a.headers["content-type"]="application/json; charset=utf-8"),{options:a}=await(0,p.fire)("filter:api.options",{options:a}),a.data&&(a.body=a.data,delete a.data);const c=await fetch(f,a),{headers:M}=c,L=M.get("content-type"),_=L&&L.startsWith("application/json");let B;if(a.method!=="head"&&(_?B=await c.json():B=await c.text()),!c.ok)throw B?new Error(_?B.status.message:B):new Error(c.statusText);return _&&B&&B.hasOwnProperty("status")&&B.hasOwnProperty("response")?B.response:B}function d(a,f,c){return g({url:a+(f&&Object.keys(f).length?"?"+$.param(f):"")},c)}function s(a,f,c){return g({url:a+(f&&Object.keys(f).length?"?"+$.param(f):""),method:"head"},c)}function y(a,f,c){return g({url:a,method:"post",data:f,headers:{"x-csrf-token":config.csrf_token}},c)}function v(a,f,c){return g({url:a,method:"patch",data:f,headers:{"x-csrf-token":config.csrf_token}},c)}function b(a,f,c){return g({url:a,method:"put",data:f,headers:{"x-csrf-token":config.csrf_token}},c)}function w(a,f,c){return g({url:a,method:"delete",data:f,headers:{"x-csrf-token":config.csrf_token}},c)}},34405:(R,P,u)=>{var p,h;p=[u(49897),u(29930)],h=function(k,x){const C={},g={delay:200,appendTo:null};C.init=d=>{const s={...g,...d},{input:y,onSelect:v}=s;app.loadJQueryUI(function(){y.autocomplete({...s,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(b,w){D(y,v,b,w)}})})},C.user=function(d,s,y){typeof s=="function"&&(y=s,s={}),s=s||{},C.init({input:d,onSelect:y,source:(v,b)=>{s.query=v.term,k.get("/api/users",s,function(w,a){if(w)return x.error(w);if(a&&a.users){const f=a.users.map(function(c){const M=$("<div></div>").html(c.username).text();return c&&{label:M,value:M,user:{uid:c.uid,name:c.username,slug:c.userslug,username:c.username,userslug:c.userslug,picture:c.picture,banned:c.banned,"icon:text":c["icon:text"],"icon:bgColor":c["icon:bgColor"]}}});b(f)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},C.group=function(d,s){C.init({input:d,onSelect:s,source:(y,v)=>{socket.emit("groups.search",{query:y.term},function(b,w){if(b)return x.error(b);if(w&&w.length){const a=w.map(function(f){return f&&{label:f.name,value:f.name,group:f}});v(a)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},C.tag=function(d,s){C.init({input:d,onSelect:s,delay:100,source:(y,v)=>{socket.emit("topics.autocompleteTags",{query:y.term,cid:ajaxify.data.cid||0},function(b,w){if(b)return x.error(b);w&&v(w),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function D(d,s,y,v){s=s||function(){};const b=jQuery.Event("keypress");b.which=13,b.keyCode=13,setTimeout(function(){d.trigger(b)},100),s(y,v)}return C}.apply(P,p),h!==void 0&&(R.exports=h)},29869:R=>{R.exports=function(P,u,p){u.setGlobal("true",!0),u.setGlobal("false",!1);const h=24*60*60*1e3,k={displayMenuItem:C,buildMetaTag:g,buildLinkTag:D,stringify:d,escape:s,stripTags:y,buildCategoryIcon:v,buildCategoryLabel:b,generateCategoryBackground:w,generateChildrenCategories:a,generateTopicClass:f,membershipBtn:c,spawnPrivilegeStates:M,localeToHTML:L,renderTopicImage:_,renderDigestAvatar:B,userAgentIcons:i,buildAvatar:l,increment:S,generateRepliedTo:I,generateWrote:T,isoTimeToLocaleString:U,shouldHideReplyContainer:j,humanReadableNumber:H,formattedNumber:F,register:J,__escape:x};function x(e){return e}function C(e,n){const t=e.navigation[n];return!(!t||t.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||t.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||t.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function g(e){const n=e.name?'name="'+e.name+'" ':"",t=e.property?'property="'+e.property+'" ':"",r=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+n+t+r+`/>
	`}function D(e){const n=["link","rel","as","type","href","sizes","title","crossorigin"],[t,r,o,m,E,A,N,K]=n.map(W=>e[W]?`${W}="${e[W]}" `:"");return"<link "+t+r+o+m+A+N+E+K+`/>
	`}function d(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function s(e){return P.escapeHTML(e)}function y(e){return P.stripHTMLTags(e)}function v(e,n,t){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${t}" style="${w(e)} width:${n}; height: ${n}; font-size: ${parseInt(n,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function b(e,n="a",t=""){if(!e)return"";const r=n==="a"?`href="${p}/category/${e.slug}"`:"";return`<${n} ${r} class="badge px-1 text-truncate text-decoration-none ${t}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${n}>`}function w(e){if(!e)return"";const n=[];return e.bgColor&&(n.push("background-color: "+e.bgColor),n.push(`border-color: ${e.bgColor}!important`)),e.color&&n.push("color: "+e.color),e.backgroundImage&&(n.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&n.push("background-size: "+e.imageClass)),n.join("; ")+";"}function a(e){let n="";return!e||!e.children||!e.children.length||(e.children.forEach(function(t){if(t&&!t.isSection){const r=t.link?t.link:p+"/category/"+t.slug;n+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+w(t)+'"><i class="fa fa-fw '+t.icon+'"></i></div><a href="'+r+'"><small>'+t.name+"</small></a></span>"}}),n=n&&'<span class="category-children">'+n+"</span>"),n}function f(e){return["locked","pinned","deleted","unread","scheduled"].filter(t=>!!e[t]).join(" ")}function c(e,n=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${n}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${n}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${n}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function M(e,n,t){const r=[];for(const o in n)n.hasOwnProperty(o)&&r.push({name:o,state:n[o],type:t[o]});return r.map(function(o){const m=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],E=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],A=["groups:moderate"],N=e==="guests"&&(m.includes(o.name)||o.name.startsWith("groups:admin:"))||e==="spiders"&&!E.includes(o.name)||e==="Global Moderators"&&A.includes(o.name);return`
				<td data-privilege="${o.name}" data-value="${o.state}" data-type="${o.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${o.state?" checked":""}${N?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function L(e,n){return e=e||n||"en-GB",e.replace("_","-")}function _(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function B(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function i(e){let n="";switch(e.platform){case"Linux":n+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":n+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":n+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":n+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":n+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":n+='<i class="fa fa-fw fa-mobile"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":n+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":n+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":n+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":n+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":n+='<i class="fa fa-fw fa-edge"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}return n}function l(e,n,t,r,o){e||(e=this);const m=new Map([["alt",e.username],["title",e.username],["data-uid",e.uid],["loading","lazy"],["aria-label",`[[aria:user-avatar-for, ${e.username}]]`]]),E=[`--avatar-size: ${n};`],A=K=>Array.from(K).reduce((W,[z,Y])=>(W+=` ${z}="${Y}"`,W),"");r=r||"",m.set("class",`avatar ${r}${t?" avatar-rounded":""}`);let N="";return e.picture&&(m.set("component",o||"avatar/picture"),N+="<img "+A(m)+' src="'+e.picture+'" style="'+E.join(" ")+'" onError="this.remove();" itemprop="image" />'),m.set("component",o||"avatar/icon"),E.push("background-color: "+e["icon:bgColor"]+";"),N+="<span "+A(m)+' style="'+E.join(" ")+'">'+e["icon:text"]+"</span>",N}function S(e,n){return String(e+parseInt(n,10))}function I(e,n){const t=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-n*h?"on":"ago"}, ${e.toPid}, ${p}/post/${e.toPid}, ${t}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function T(e,n){return`[[topic:wrote-${e.timestamp<Date.now()-n*h?"on":"ago"}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function U(e,n="en-GB"){return new Date(e).toLocaleString([n],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function j(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function H(e,n=1){return P.makeNumberHumanReadable(e,n)}function F(e){return P.addCommas(e)}function J(){Object.keys(k).forEach(function(e){u.registerHelper(e,k[e])})}return k}},30076:(R,P,u)=>{var p,h;const k=u(29869);p=[u(77918),u(81335)],h=function(x,C){return k(x,C,config.relative_path)}.apply(P,p),h!==void 0&&(R.exports=h)},13230:(R,P,u)=>{var p,h,k;(function(x){h=[u(53050)],p=x,k=typeof p=="function"?p.apply(P,h):p,k!==void 0&&(R.exports=k)})(function(x){const C=x("[^\\p{L}\\s\\d\\-_]","g"),g=/[^\w\s\d\-_]/g,D=/^\s+|\s+$/g,d=/\s+/g,s=/-+/g,y=/-$/g,v=/^-/g,b=/^[\w\d\s.,\-@]+$/;return function(a,f){return a?(a=String(a).replace(D,""),b.test(a)?a=a.replace(g,"-"):a=x.replace(a,C,"-"),a=f?a:a.toLocaleLowerCase(),a=a.replace(d,"-"),a=a.replace(s,"-"),a=a.replace(y,""),a=a.replace(v,""),a):""}})}}]);
