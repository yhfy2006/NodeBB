"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[26832],{26832:(r,h,o)=>{var i,c;i=[o(29930),o(49897),o(92619)],c=function(l,d,f){const s={};s.init=function(){Promise.all([o.e(6411),o.e(54516),o.e(60419),o.e(16255)]).then(function(){var n=[o(38636)];(function(e){$('[component="chat/nav-wrapper"]').on("click",'[component="chat/recent/room"], [component="chat/public/room"]',function(t){t.stopPropagation(),t.preventDefault();const a=this.getAttribute("data-roomid");e.switchChat(a)}).on("click",".mark-read",function(t){t.stopPropagation();const a=this.closest("[data-roomid]");f.toggleReadState(a)}),$('[component="chat/recent"]').on("scroll",utils.debounce(function(){const t=$(this),a=(t[0].scrollHeight-t.height())*.9;t.scrollTop()>a&&p()},100))}).apply(null,n)}).catch(o.oe)};async function p(){const n=$('[component="chat/recent"]');n.attr("loading")||(n.attr("loading",1),d.get("/chats",{uid:ajaxify.data.uid,after:n.attr("data-nextstart")}).then(({rooms:e,nextStart:t})=>{e.length?u({rooms:e,nextStart:t},function(){n.removeAttr("loading"),n.attr("data-nextstart",t)}):n.removeAttr("loading")}).catch(l.error))}function u(n,e){if(!n.rooms.length)return e();n.loadingMore=!0,app.parseAndTranslate("chats","rooms",n,function(t){$('[component="chat/recent"]').append(t),t.find(".timeago").timeago(),e()})}return s}.apply(h,i),c!==void 0&&(r.exports=c)}}]);
