"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[17205,38395,34405],{17205:(h,E,m)=>{var g,d;g=[m(16227),m(34405),m(29930)],d=function(r,o,u){const _={};let i,a,t=0;_.init=function(l){i||app.parseAndTranslate("modals/change-owner",{},function(f){i=f,a=i.find("#change_owner_commit"),$("body").append(i),i.find("#change_owner_cancel").on("click",p),i.find("#username").on("keyup",e),r.init(n,{allowMainPostSelect:!0}),s(),l&&r.togglePostSelection(l,l.attr("data-pid")),a.on("click",function(){c()}),o.user(i.find("#username"),{filters:["notbanned"]},function(b,k){t=k.item.user.uid,e()})})};function s(){r.pids.length?i.find("#pids").translateHtml("[[topic:fork-pid-count, "+r.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:fork-no-pids]]")}function e(){t&&i.find("#username").length&&i.find("#username").val().length&&r.pids.length?a.removeAttr("disabled"):a.attr("disabled",!0)}function n(){e(),s()}function c(){t&&socket.emit("posts.changeOwner",{pids:r.pids,toUid:t},function(l){if(l)return u.error(l);ajaxify.refresh(),p()})}function p(){i&&(i.remove(),i=null,r.disable())}return _}.apply(E,g),d!==void 0&&(h.exports=d)},34405:(h,E,m)=>{var g,d;g=[m(49897),m(29930)],d=function(r,o){const u={},_={delay:200,appendTo:null};u.init=a=>{const t={..._,...a},{input:s,onSelect:e}=t;app.loadJQueryUI(function(){s.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,c){i(s,e,n,c)}})})},u.user=function(a,t,s){typeof t=="function"&&(s=t,t={}),t=t||{},u.init({input:a,onSelect:s,source:(e,n)=>{t.query=e.term,r.get("/api/users",t,function(c,p){if(c)return o.error(c);if(p&&p.users){const l=p.users.map(function(f){const b=$("<div></div>").html(f.username).text();return f&&{label:b,value:b,user:{uid:f.uid,name:f.username,slug:f.userslug,username:f.username,userslug:f.userslug,picture:f.picture,banned:f.banned,"icon:text":f["icon:text"],"icon:bgColor":f["icon:bgColor"]}}});n(l)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},u.group=function(a,t){u.init({input:a,onSelect:t,source:(s,e)=>{socket.emit("groups.search",{query:s.term},function(n,c){if(n)return o.error(n);if(c&&c.length){const p=c.map(function(l){return l&&{label:l.name,value:l.name,group:l}});e(p)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},u.tag=function(a,t){u.init({input:a,onSelect:t,delay:100,source:(s,e)=>{socket.emit("topics.autocompleteTags",{query:s.term,cid:ajaxify.data.cid||0},function(n,c){if(n)return o.error(n);c&&e(c),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function i(a,t,s,e){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){a.trigger(n)},100),t(s,e)}return u}.apply(E,g),d!==void 0&&(h.exports=d)},16227:(h,E,m)=>{var g,d;g=[m(52473)],d=function(r){const o={};let u;o.pids=[];let _=!1;o.init=function(e,n){o.pids.length=0,u=e,n=n||{},_=n.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',i),t()};function i(e){e.stopPropagation();const n=$(this).attr("data-pid"),c=$('[component="topic"] [data-pid="'+n+'"]');!_&&parseInt($(this).attr("data-index"),10)===0||o.togglePostSelection(c,n)}o.disable=function(){o.pids.forEach(function(e){r.get("post","pid",e).toggleClass("selected",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',i),s()},o.togglePostSelection=function(e,n){if(n){const c=o.pids.indexOf(n);c===-1?(o.pids.push(n),e.toggleClass("selected",!0)):(o.pids.splice(c,1),e.toggleClass("selected",!1)),o.pids.length&&o.pids.sort(function(p,l){return p-l}),typeof u=="function"&&u()}};function a(){return!1}function t(){$("#content").on("click",'[component="post"] button, [component="post"] a',a)}function s(){$("#content").off("click",'[component="post"] button, [component="post"] a',a)}return o}.apply(E,g),d!==void 0&&(h.exports=d)}}]);
