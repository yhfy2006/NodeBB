"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[37147,99127,34271,1091,49897],{53309:(C,d,a)=>{var i,l;i=[a(52473),a(49897),a(29930)],l=function(h,O,g){const u={};let o=[];u.init=function(r){r=r||{},o.length=0,h.get("chat/search").on("keyup",utils.debounce(m,250));const s=$('[component="chat/search/list"]');s.on("click","[data-uid]",function(){r.onSelect&&r.onSelect(o.find(e=>parseInt(e.uid,10)===parseInt($(this).attr("data-uid"),10))),f(s)})};function f(r){h.get("chat/search").val(""),p(r),r.find('[component="chat/search/no-users"]').addClass("hidden"),r.find('[component="chat/search/start-typing"]').removeClass("hidden")}function m(){const r=$('[component="chat/search/list"]'),s=h.get("chat/search").val();if(!s)return f(r);r.find('[component="chat/search/start-typing"]').addClass("hidden"),O.get("/api/users",{query:s,searchBy:"username",paginate:!1}).then(y).catch(g.error)}function p(r){o.length=0,r.find("[data-uid]").remove()}async function y(r){const s=$('[component="chat/search/list"]');if(p(s),r.users=r.users.filter(function(n){return parseInt(n.uid,10)!==parseInt(app.user.uid,10)}),o=r.users,!r.users.length)return s.find('[component="chat/search/no-users"]').removeClass("hidden");s.find('[component="chat/search/no-users"]').addClass("hidden");const e=await app.parseAndTranslate("modals/create-room","searchUsers",{searchUsers:r.users});s.append(e),s.parent().toggleClass("show",!0)}return u}.apply(d,i),l!==void 0&&(C.exports=l)},49897:(C,d,a)=>{a.r(d),a.d(d,{del:()=>s,get:()=>f,head:()=>m,patch:()=>y,post:()=>p,put:()=>r});var i=a(91749),l=a.n(i),h=a(40027),O=a.n(h);const g=config.relative_path+"/api/v3";async function u(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:g+e.url,typeof n=="function"){o(e).then(t=>n(null,t),t=>n(t));return}try{return await o(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again.")return(0,h.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go("login")});throw t}}async function o(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,i.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:E}=t,_=E.get("content-type"),v=_&&_.startsWith("application/json");let c;if(e.method!=="head"&&(v?c=await t.json():c=await t.text()),!t.ok)throw c?new Error(v?c.status.message:c):new Error(t.statusText);return v&&c&&c.hasOwnProperty("status")&&c.hasOwnProperty("response")?c.response:c}function f(e,n,t){return u({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function m(e,n,t){return u({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},t)}function p(e,n,t){return u({url:e,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function y(e,n,t){return u({url:e,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function r(e,n,t){return u({url:e,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function s(e,n,t){return u({url:e,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}}}]);
