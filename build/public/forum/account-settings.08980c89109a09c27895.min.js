"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[92380],{18030:(k,m,a)=>{var f,c;f=[a(67910),a(52473),a(49897),a(29930),a(91749)],c=function(b,C,h,d,g){const r={};let s="";$(window).on("action:ajaxify.start",function(){const t=$("#bootswatchSkin");ajaxify.data.template.name==="account/settings"&&t.length&&t.val()!==s&&l(s)}),r.init=function(){s=$("#bootswatchSkin").length&&$("#bootswatchSkin").val(),b.init(),$("#submitBtn").on("click",function(){const t=v();return t.homePageRoute==="custom"&&t.homePageCustom?$.get(config.relative_path+"/"+t.homePageCustom,function(){p(t)}).fail(function(){d.error("[[error:invalid-home-page-route]]")}):p(t),!1}),$("#bootswatchSkin").on("change",function(){l($(this).val())}),$('[data-property="homePageRoute"]').on("change",y),y(),C.get("user/sessions").find(".timeago").timeago()};function v(){const t={};return $(".account").find("input, textarea, select").each(function(o,n){n=$(n);const e=n.attr("data-property");if(n.is("select")){t[e]=n.val();return}switch(n.attr("type")){case"checkbox":t[e]=n.is(":checked")?1:0;break;default:t[e]=n.val();break}}),t}function p(t){h.put(`/users/${ajaxify.data.uid}/settings`,{settings:t}).then(o=>{d.success("[[success:settings-saved]]");let n=!1;for(const e in o)o.hasOwnProperty(e)&&(e==="userLang"&&config.userLang!==o.userLang&&(n=!0),e==="bootswatchSkin"?(s=o.bootswatchSkin,config.bootswatchSkin=s==="noskin"?"":s):config.hasOwnProperty(e)&&(config[e]=o[e]));n&&parseInt(app.user.uid,10)===parseInt(ajaxify.data.theirid,10)&&window.location.reload()})}function y(){$('[data-property="homePageRoute"]').val()==="custom"?$("#homePageCustomContainer").show():($("#homePageCustomContainer").hide(),$('[data-property="homePageCustom"]').val(""))}function l(t){const o=Array.prototype.filter.call(document.querySelectorAll('link[rel="stylesheet"]'),function(u){return u.href.indexOf(config.relative_path+"/assets/client")!==-1})[0]||null;if(!o)return;t===""?t=config.defaultBootswatchSkin||"":t==="noskin"&&(t="");const n=$("body").attr("class").split(/\s+/).filter(function(u){return u.startsWith("skin-")});if(!n[0])return;let e=n[0].slice(5);if(e=e!=="noskin"?e:"",t===e){g.fire("action:skin.change",{skin:t,currentSkin:e});return}const S=$("html").attr("data-dir"),i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=config.relative_path+"/assets/client"+(t?"-"+t:"")+(S==="rtl"?"-rtl":"")+".css?"+config["cache-buster"],i.onload=function(){o.parentNode.removeChild(o),$("body").removeClass(n.join(" ")),$("body").addClass("skin-"+(t||"noskin")),g.fire("action:skin.change",{skin:t,currentSkin:e})},document.head.appendChild(i)}return r.changeSkin=async function(t){app.user.uid&&await h.put(`/users/${app.user.uid}/settings`,{settings:{bootswatchSkin:t}}),config.bootswatchSkin=t==="noskin"?"":t,s=t,l(t)},r}.apply(m,f),c!==void 0&&(k.exports=c)}}]);
