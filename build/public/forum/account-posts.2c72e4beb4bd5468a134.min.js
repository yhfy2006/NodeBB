"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[49016],{63984:(A,C,p)=>{var E,u;E=[p(67910),p(22410),p(91749)],u=function(w,v,_){const c={};let l,r=1;c.init=function(){w.init(),$('[component="post/content"] img:not(.not-responsive)').addClass("img-fluid"),c.handleInfiniteScroll("account/posts")},c.handleInfiniteScroll=function(i){l=i,r=ajaxify.data.pagination.currentPage,config.usePagination||v.init(e)};function e(i){if(i<0)return;const h=utils.params();r+=1,h.page=r,v.loadMoreXhr(h,function(a,o){a.posts&&a.posts.length?d(a.posts,o):o()})}function d(i,h){app.parseAndTranslate(l,"posts",{posts:i},function(a){$('[component="posts"]').append(a),a.find("img:not(.not-responsive)").addClass("img-fluid"),a.find(".timeago").timeago(),_.fire("action:posts.loaded",{posts:i}),h()})}return c}.apply(C,E),u!==void 0&&(A.exports=u)},22410:(A,C,p)=>{var E,u;E=[p(91749),p(29930),p(49897)],u=function(w,v,_){const c={};let l,r=0,e=!1,d,i=0;c.init=function(o,f){const t=$("body");typeof o=="function"?(l=o,d=t):(l=f,d=o||t),r=$(window).scrollTop(),$(window).off("scroll",h).on("scroll",h),t.height()<=$(window).height()&&l(1)};function h(){i&&clearTimeout(i),i=setTimeout(function(){i=0,a()},60)}function a(){const o=utils.findBootstrapEnvironment(),f=(o==="xs"||o==="sm")&&$("html").hasClass("composing");if(e||f||app.flags._glance)return;const t=$(window).scrollTop(),n=$(window).height(),s=d.height()-n,m=d.offset()?d.offset().top:0,g=100*(t-m)/(s<=0?n:s),D=15,S=85,T=t>r?1:-1;(g<D&&t<r||g>S&&t>r||g<0&&T>0&&s<0)&&l(T),r=t}return c.loadMore=function(o,f,t){if(e)return;e=!0;const n={method:o,data:f};w.fire("action:infinitescroll.loadmore",n),(n.method.startsWith("/")?_.get:socket.emit)(n.method,n.data,function(m,g){if(m)return e=!1,v.error(m);t(g,function(){e=!1})})},c.loadMoreXhr=function(o,f){if(e)return;e=!0;const t=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),n={url:t,data:o};w.fire("action:infinitescroll.loadmore.xhr",n),$.get(t,o,function(s){f(s,function(){e=!1})}).fail(function(s){e=!1,v.error(String(s.responseJSON||"[[error:no-connection]]"))})},c.removeExtra=function(o,f,t){let n=$();if(o.length<=t)return n;const s=o.length-t;if(f>0){const m=$(document).height(),g=$(window).scrollTop();n=o.slice(0,s).remove(),$(window).scrollTop(g+($(document).height()-m))}else n=o.slice(o.length-s).remove();return n},c}.apply(C,E),u!==void 0&&(A.exports=u)}}]);
