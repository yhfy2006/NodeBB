"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[82858,99127,34271,1091,49897],{22410:(O,p,c)=>{var g,E;g=[c(91749),c(29930),c(49897)],E=function(m,y,T){const a={};let f,u=0,i=!1,h,d=0;a.init=function(t,o){const e=$("body");typeof t=="function"?(f=t,h=e):(f=o,h=t||e),u=$(window).scrollTop(),$(window).off("scroll",w).on("scroll",w),e.height()<=$(window).height()&&f(1)};function w(){d&&clearTimeout(d),d=setTimeout(function(){d=0,_()},60)}function _(){const t=utils.findBootstrapEnvironment(),o=(t==="xs"||t==="sm")&&$("html").hasClass("composing");if(i||o||app.flags._glance)return;const e=$(window).scrollTop(),n=$(window).height(),s=h.height()-n,l=h.offset()?h.offset().top:0,r=100*(e-l)/(s<=0?n:s),D=15,x=85,v=e>u?1:-1;(r<D&&e<u||r>x&&e>u||r<0&&v>0&&s<0)&&f(v),u=e}return a.loadMore=function(t,o,e){if(i)return;i=!0;const n={method:t,data:o};m.fire("action:infinitescroll.loadmore",n),(n.method.startsWith("/")?T.get:socket.emit)(n.method,n.data,function(l,r){if(l)return i=!1,y.error(l);e(r,function(){i=!1})})},a.loadMoreXhr=function(t,o){if(i)return;i=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),n={url:e,data:t};m.fire("action:infinitescroll.loadmore.xhr",n),$.get(e,t,function(s){o(s,function(){i=!1})}).fail(function(s){i=!1,y.error(String(s.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(t,o,e){let n=$();if(t.length<=e)return n;const s=t.length-e;if(o>0){const l=$(document).height(),r=$(window).scrollTop();n=t.slice(0,s).remove(),$(window).scrollTop(r+($(document).height()-l))}else n=t.slice(t.length-s).remove();return n},a}.apply(p,g),E!==void 0&&(O.exports=E)},49897:(O,p,c)=>{c.r(p),c.d(p,{del:()=>_,get:()=>u,head:()=>i,patch:()=>d,post:()=>h,put:()=>w});var g=c(91749),E=c.n(g),m=c(40027),y=c.n(m);const T=config.relative_path+"/api/v3";async function a(t,o){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:T+t.url,typeof o=="function"){f(t).then(e=>o(null,e),e=>o(e));return}try{return await f(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,m.confirm)("[[error:api.reauth-required]]",n=>{n&&ajaxify.go("login")});throw e}}async function f(t){const{url:o}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,g.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(o,t),{headers:n}=e,s=n.get("content-type"),l=s&&s.startsWith("application/json");let r;if(t.method!=="head"&&(l?r=await e.json():r=await e.text()),!e.ok)throw r?new Error(l?r.status.message:r):new Error(e.statusText);return l&&r&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r}function u(t,o,e){return a({url:t+(o&&Object.keys(o).length?"?"+$.param(o):"")},e)}function i(t,o,e){return a({url:t+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"head"},e)}function h(t,o,e){return a({url:t,method:"post",data:o,headers:{"x-csrf-token":config.csrf_token}},e)}function d(t,o,e){return a({url:t,method:"patch",data:o,headers:{"x-csrf-token":config.csrf_token}},e)}function w(t,o,e){return a({url:t,method:"put",data:o,headers:{"x-csrf-token":config.csrf_token}},e)}function _(t,o,e){return a({url:t,method:"delete",data:o,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
