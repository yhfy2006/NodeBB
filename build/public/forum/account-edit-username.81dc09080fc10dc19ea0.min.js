"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[95512,26174],{20182:(p,f,t)=>{var a,o;a=[t(67910),t(49897),t(13230),t(29930)],o=function(c,s,h,u){const l={};return l.init=function(){c.init(),$("#submitBtn").on("click",function(){const n={uid:$("#inputUID").val(),username:$("#inputNewUsername").val(),password:$("#inputCurrentPassword").val()};if(!n.username)return;if(n.username===n.password)return u.error("[[user:username-same-as-password]]");const d=$(this);return d.addClass("disabled").find("i").removeClass("hide"),s.put("/users/"+n.uid,n).then(r=>{const i=h(n.username);n.username&&i&&parseInt(n.uid,10)===parseInt(app.user.uid,10)&&($('[component="header/profilelink"]').attr("href",config.relative_path+"/user/"+i),$('[component="header/profilelink/edit"]').attr("href",config.relative_path+"/user/"+i+"/edit"),$('[component="header/profilelink/settings"]').attr("href",config.relative_path+"/user/"+i+"/settings"),$('[component="header/username"]').text(n.username),$('[component="header/usericon"]').css("background-color",r["icon:bgColor"]).text(r["icon:text"]),$('[component="avatar/icon"]').css("background-color",r["icon:bgColor"]).text(r["icon:text"])),ajaxify.go("user/"+i+"/edit")}).catch(u.error).finally(()=>{d.removeClass("disabled").find("i").addClass("hide")}),!1})},l}.apply(f,a),o!==void 0&&(p.exports=o)},13230:(p,f,t)=>{var a,o,c;(function(s){o=[t(53050)],a=s,c=typeof a=="function"?a.apply(f,o):a,c!==void 0&&(p.exports=c)})(function(s){const h=s("[^\\p{L}\\s\\d\\-_]","g"),u=/[^\w\s\d\-_]/g,l=/^\s+|\s+$/g,_=/\s+/g,n=/-+/g,d=/-$/g,r=/^-/g,i=/^[\w\d\s.,\-@]+$/;return function(e,m){return e?(e=String(e).replace(l,""),i.test(e)?e=e.replace(u,"-"):e=s.replace(e,h,"-"),e=m?e:e.toLocaleLowerCase(),e=e.replace(_,"-"),e=e.replace(n,"-"),e=e.replace(d,""),e=e.replace(r,""),e):""}})}}]);
