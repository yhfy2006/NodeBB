"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1852,34405],{43930:(p,y,s)=>{var r,l;r=[s(67910),s(29930),s(49897),s(91749),s(34405)],l=function(h,f,i,m,E){const o={};return o.init=function(){h.init();const t=$('[component="tags/watch"]');t.tagsinput({tagClass:"badge text-bg-info",confirmKeys:[13,44],trimValue:!0});const e=t.siblings(".bootstrap-tagsinput").find("input");e.translateAttr("aria-label","[[aria:user-watched-tags]]"),E.tag(e),ajaxify.data.tags.forEach(function(a){t.tagsinput("add",a)}),t.on("itemAdded",function(a){e.length&&e.autocomplete("close"),i.put(`/tags/${a.item}/follow`,{}).then(()=>{f.alert({alert_id:"follow_tag",message:"[[tags:following-tag.message]]",type:"success",timeout:5e3}),m.fire("action:tags.changeWatching",{tag:ajaxify.data.tag,type:"follow"})}).catch(n=>f.error(n))}),t.on("itemRemoved",function(a){i.del(`/tags/${a.item}/follow`,{}).then(()=>{f.alert({alert_id:"follow_tag",message:"[[tags:not-following-tag.message]]",type:"info",timeout:5e3}),m.fire("action:tags.changeWatching",{tag:ajaxify.data.tag,type:"unfollow"})}).catch(n=>f.error(n))})},o}.apply(y,r),l!==void 0&&(p.exports=l)},34405:(p,y,s)=>{var r,l;r=[s(49897),s(29930)],l=function(h,f){const i={},m={delay:200,appendTo:null};i.init=o=>{const t={...m,...o},{input:e,onSelect:a}=t;app.loadJQueryUI(function(){e.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(n,c){E(e,a,n,c)}})})},i.user=function(o,t,e){typeof t=="function"&&(e=t,t={}),t=t||{},i.init({input:o,onSelect:e,source:(a,n)=>{t.query=a.term,h.get("/api/users",t,function(c,d){if(c)return f.error(c);if(d&&d.users){const g=d.users.map(function(u){const x=$("<div></div>").html(u.username).text();return u&&{label:x,value:x,user:{uid:u.uid,name:u.username,slug:u.userslug,username:u.username,userslug:u.userslug,picture:u.picture,banned:u.banned,"icon:text":u["icon:text"],"icon:bgColor":u["icon:bgColor"]}}});n(g)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.group=function(o,t){i.init({input:o,onSelect:t,source:(e,a)=>{socket.emit("groups.search",{query:e.term},function(n,c){if(n)return f.error(n);if(c&&c.length){const d=c.map(function(g){return g&&{label:g.name,value:g.name,group:g}});a(d)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.tag=function(o,t){i.init({input:o,onSelect:t,delay:100,source:(e,a)=>{socket.emit("topics.autocompleteTags",{query:e.term,cid:ajaxify.data.cid||0},function(n,c){if(n)return f.error(n);c&&a(c),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function E(o,t,e,a){t=t||function(){};const n=jQuery.Event("keypress");n.which=13,n.keyCode=13,setTimeout(function(){o.trigger(n)},100),t(e,a)}return i}.apply(y,r),l!==void 0&&(p.exports=l)}}]);
