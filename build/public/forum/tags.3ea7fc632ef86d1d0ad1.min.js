"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[95738,99127,82858,34271,1091,49897],{22410:(v,T,f)=>{var d,g;d=[f(91749),f(29930),f(49897)],g=function(p,_,m){const i={};let u,s=0,o=!1,c,E=0;i.init=function(t,n){const e=$("body");typeof t=="function"?(u=t,c=e):(u=n,c=t||e),s=$(window).scrollTop(),$(window).off("scroll",w).on("scroll",w),e.height()<=$(window).height()&&u(1)};function w(){E&&clearTimeout(E),E=setTimeout(function(){E=0,M()},60)}function M(){const t=utils.findBootstrapEnvironment(),n=(t==="xs"||t==="sm")&&$("html").hasClass("composing");if(o||n||app.flags._glance)return;const e=$(window).scrollTop(),r=$(window).height(),l=c.height()-r,h=c.offset()?c.offset().top:0,a=100*(e-h)/(l<=0?r:l),A=15,D=85,y=e>s?1:-1;(a<A&&e<s||a>D&&e>s||a<0&&y>0&&l<0)&&u(y),s=e}return i.loadMore=function(t,n,e){if(o)return;o=!0;const r={method:t,data:n};p.fire("action:infinitescroll.loadmore",r),(r.method.startsWith("/")?m.get:socket.emit)(r.method,r.data,function(h,a){if(h)return o=!1,_.error(h);e(a,function(){o=!1})})},i.loadMoreXhr=function(t,n){if(o)return;o=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),r={url:e,data:t};p.fire("action:infinitescroll.loadmore.xhr",r),$.get(e,t,function(l){n(l,function(){o=!1})}).fail(function(l){o=!1,_.error(String(l.responseJSON||"[[error:no-connection]]"))})},i.removeExtra=function(t,n,e){let r=$();if(t.length<=e)return r;const l=t.length-e;if(n>0){const h=$(document).height(),a=$(window).scrollTop();r=t.slice(0,l).remove(),$(window).scrollTop(a+($(document).height()-h))}else r=t.slice(t.length-l).remove();return r},i}.apply(T,d),g!==void 0&&(v.exports=g)},31042:(v,T,f)=>{var d,g;d=[f(22410),f(29930)],g=function(p,_){const m={};m.init=function(){app.enterRoom("tags"),$("#tag-search").on("input propertychange",utils.debounce(function(){if(!$("#tag-search").val().length)return i();socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},function(s,o){if(s)return _.error(s);u(o.tags,!0)})},250)),p.init(m.loadMoreTags)},m.loadMoreTags=function(s){s<0||!$(".tag-list").length||$("#tag-search").val()||p.loadMore("topics.loadMoreTags",{after:$(".tag-list").attr("data-nextstart")},function(o,c){o&&o.tags&&o.tags.length?(u(o.tags,!1,c),$(".tag-list").attr("data-nextstart",o.nextStart)):c()})};function i(){socket.emit("topics.loadMoreTags",{after:0},function(s,o){if(s)return _.error(s);u(o.tags,!0)})}function u(s,o,c){c=c||function(){},app.parseAndTranslate("tags","tags",{tags:s},function(E){$(".tag-list")[o?"html":"append"](E),c()})}return m}.apply(T,d),g!==void 0&&(v.exports=g)},49897:(v,T,f)=>{f.r(T),f.d(T,{del:()=>M,get:()=>s,head:()=>o,patch:()=>E,post:()=>c,put:()=>w});var d=f(91749),g=f.n(d),p=f(40027),_=f.n(p);const m=config.relative_path+"/api/v3";async function i(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:m+t.url,typeof n=="function"){u(t).then(e=>n(null,e),e=>n(e));return}try{return await u(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,p.confirm)("[[error:api.reauth-required]]",r=>{r&&ajaxify.go("login")});throw e}}async function u(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,d.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:r}=e,l=r.get("content-type"),h=l&&l.startsWith("application/json");let a;if(t.method!=="head"&&(h?a=await e.json():a=await e.text()),!e.ok)throw a?new Error(h?a.status.message:a):new Error(e.statusText);return h&&a&&a.hasOwnProperty("status")&&a.hasOwnProperty("response")?a.response:a}function s(t,n,e){return i({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function o(t,n,e){return i({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},e)}function c(t,n,e){return i({url:t,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function E(t,n,e){return i({url:t,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function w(t,n,e){return i({url:t,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function M(t,n,e){return i({url:t,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
