"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[98391],{86296:(p,g,n)=>{var u,o;u=[n(49897),n(40027),n(29930)],o=function(h,b,l){const c={};return c.init=function(r){const d=b.dialog({message:`
				<label class="form-label">[[admin/manage/users:new-email]]</label>
				<input id="newEmail" class="form-control" type="text" value="${utils.escapeHTML(r.email||"")}">
			`,title:"[[admin/manage/users:change-email]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},change:{label:"[[admin/manage/users:alerts.button-change]]",className:"btn-primary",callback:function(){const a=d.find("#newEmail").val();return h.post("/users/"+r.uid+"/emails",{skipConfirmation:!0,email:a}).then(()=>{d.modal("hide"),r.onSuccess(a)}).catch(l.error),!1}}}})},c}.apply(g,u),o!==void 0&&(p.exports=o)},63387:(p,g,n)=>{var u,o;u=[n(67910),n(7524),n(17459),n(49897),n(91749),n(40027),n(29930),n(86296)],o=function(h,b,l,c,r,d,a,y){const C={};C.init=function(){h.init(),$("#submitBtn").on("click",x),ajaxify.data.groupTitleArray.length===1&&ajaxify.data.groupTitleArray[0]===""&&$('#groupTitle option[value=""]').attr("selected",!0),E(),A(),j(),v(),L(),!ajaxify.data.isSelf&&ajaxify.data.canEdit&&$(`a[href="${config.relative_path}/user/${ajaxify.data.userslug}/edit/email"]`).on("click",()=>(y.init({uid:ajaxify.data.uid,email:ajaxify.data.email,onSuccess:function(){a.success("[[user:email-updated]]")}}),!1))};function x(){function e(){return $('[component="group/badge/list"] [component="group/badge/item"][data-selected="true"]').map((s,m)=>$(m).attr("data-value")).get()}const t=$('form[component="profile/edit/form"]').serializeObject();return t.uid=ajaxify.data.uid,t.groupTitle=t.groupTitle||"",t.groupTitle=JSON.stringify(e()),r.fire("action:profile.update",t),c.put("/users/"+t.uid,t).then(i=>{a.success("[[user:profile-update-success]]"),i.picture&&$("#user-current-picture").attr("src",i.picture),b.updateHeader(i.picture)}).catch(a.error),!1}function E(){$("#deleteAccountBtn").on("click",function(){return l.translate("[[user:delete-account-confirm]]",function(e){const t=d.confirm(e+'<p><input type="password" class="form-control" id="confirm-password" /></p>',function(i){if(!i)return;const s=t.find(".btn-primary");return s.html('<i class="fa fa-spinner fa-spin"></i>'),s.prop("disabled",!0),c.del(`/users/${ajaxify.data.uid}/account`,{password:$("#confirm-password").val()},function(m){function M(){l.translate("[[modules:bootbox.confirm]]",function(k){s.text(k),s.prop("disabled",!1)})}if(m)return M(),a.error(m);s.html('<i class="fa fa-check"></i>'),window.location.href=`${config.relative_path}/`}),!1});t.on("shown.bs.modal",function(){t.find("input").focus()})}),!1})}function A(){$("#confirm-email").on("click",function(){const e=$(this).attr("disabled",!0);socket.emit("user.emailConfirm",{},function(t){if(e.removeAttr("disabled"),t)return a.error(t);a.success("[[notifications:email-confirm-sent]]")})})}function f(e,t){return e.length?"("+e.val().length+"/"+t+")":""}function j(){const e=$("#signature");$("#signatureCharCountLeft").html(f(e,ajaxify.data.maximumSignatureLength)),e.on("keyup change",function(){$("#signatureCharCountLeft").html(f(e,ajaxify.data.maximumSignatureLength))})}function v(){const e=$("#aboutme");$("#aboutMeCharCountLeft").html(f(e,ajaxify.data.maximumAboutMeLength)),e.on("keyup change",function(){$("#aboutMeCharCountLeft").html(f(e,ajaxify.data.maximumAboutMeLength))})}function L(){const{allowMultipleBadges:e}=ajaxify.data;$('[component="group/toggle/hide"]').on("click",function(){const t=$(this).parents('[component="group/badge/item"]');t.attr("data-selected","false"),$(this).addClass("hidden"),t.find('[component="group/toggle/show"]').removeClass("hidden")}),$('[component="group/toggle/show"]').on("click",function(){e||($('[component="group/badge/list"] [component="group/toggle/show"]').removeClass("hidden"),$('[component="group/badge/list"] [component="group/toggle/hide"]').addClass("hidden"),$('[component="group/badge/list"] [component="group/badge/item"]').attr("data-selected","false"));const t=$(this).parents('[component="group/badge/item"]');t.attr("data-selected","true"),$(this).addClass("hidden"),t.find('[component="group/toggle/hide"]').removeClass("hidden")}),$('[component="group/order/up"]').on("click",function(){const t=$(this).parents('[component="group/badge/item"]');t.insertBefore(t.prev())}),$('[component="group/order/down"]').on("click",function(){const t=$(this).parents('[component="group/badge/item"]');t.insertAfter(t.next())})}return C}.apply(g,u),o!==void 0&&(p.exports=o)}}]);
