"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[20644,99127,34271,1091,25432,15794,49897],{89664:(A,h,u)=>{var m,b;m=[u(49897),u(40027),u(29930),u(30076)],b=function(p,M,y,g){const x={};let T;x.init=function(n){T=n||"groups/details",D(),R(),L()},x.refresh=async function(){const{group:n}=await p.get(`/api/groups/${ajaxify.data.group.slug}`),i=await s(n.members);$('[component="groups/members"] tbody').html(i),$('[component="group/member/count"]').text(g.humanReadableNumber(n.memberCount)),$('[component="group/pending/count"]').text(g.humanReadableNumber(n.pending.length)),$('[component="group/invited/count"]').text(g.humanReadableNumber(n.invited.length)),ajaxify.data.group.members=n.members,ajaxify.data.group.memberCount=n.memberCount,ajaxify.data.group.invited=n.invited,ajaxify.data.group.pending=n.pending};function D(){$('[component="groups/members/add"]').on("click",function(){app.parseAndTranslate("admin/partials/groups/add-members",{},function(n){const i=[],l=M.dialog({title:"[[groups:details.add-member]]",message:n,buttons:{OK:{label:"[[groups:details.add-member]]",callback:function(){const o=[];l.find("[data-uid][data-selected]").each(function(d,v){o.push(i[$(v).attr("data-uid")])}),P(o).then(()=>{l.modal("hide")})}}}});l.on("click","[data-username]",function(){$(this).attr("data-selected")==="1"?$(this).removeAttr("data-selected"):$(this).attr("data-selected",1),$(this).find("i").toggleClass("invisible")}),l.find("input").on("keyup",function(){p.get("/api/users",{query:$(this).val(),paginate:!1},function(o,d){if(o)return y.error(o);d.users.forEach(function(v){i[v.uid]=v}),app.parseAndTranslate("admin/partials/groups/add-members","users",{users:d.users},function(v){l.find("#search-result").html(v)})})})})})}async function P(n){const i=n.map(o=>o.uid);ajaxify.data.group.name==="administrators"?await socket.emit("admin.user.makeAdmins",i).catch(y.error):await Promise.all(i.map(o=>p.put("/groups/"+ajaxify.data.group.slug+"/membership/"+o))).catch(y.error),n=n.filter(o=>!$('[component="groups/members"] [data-uid="'+o.uid+'"]').length);const l=await s(n);$('[component="groups/members"] tbody').prepend(l)}function R(){const n=$('[component="groups/members/search"]');n.on("keyup",utils.debounce(async function(){const i=n.val(),l=await p.get(`/groups/${ajaxify.data.group.slug}/members`,{query:i}),o=await s(l.users);$('[component="groups/members"] tbody').html(o),$('[component="groups/members"]').attr("data-nextstart",20)},250))}function L(){$('[component="groups/members"]').on("scroll",utils.debounce(function(){const n=$(this),i=(n[0].scrollHeight-n.innerHeight())*.9;n.scrollTop()>i&&!$('[component="groups/members/search"]').val()&&k()},250))}async function k(){const n=$('[component="groups/members"]');if(n.attr("loading"))return;n.attr("loading",1);const i=await p.get(`/groups/${ajaxify.data.group.slug}/members`,{after:n.attr("data-nextstart")}).catch(y.error);i&&i.users.length?(await a(i.users),n.removeAttr("loading"),n.attr("data-nextstart",i.nextStart)):n.removeAttr("loading")}async function a(n){n=n.filter(function(l){return!$('[component="groups/members"] [data-uid="'+l.uid+'"]').length});const i=await s(n);$('[component="groups/members"] tbody').append(i)}async function s(n){return await app.parseAndTranslate(T,"group.members",{group:{members:n,isOwner:ajaxify.data.group.isOwner}})}return x}.apply(h,m),b!==void 0&&(A.exports=b)},49897:(A,h,u)=>{u.r(h),u.d(h,{del:()=>k,get:()=>T,head:()=>D,patch:()=>R,post:()=>P,put:()=>L});var m=u(91749),b=u.n(m),p=u(40027),M=u.n(p);const y=config.relative_path+"/api/v3";async function g(a,s){if(a.url=a.url.startsWith("/api")?config.relative_path+a.url:y+a.url,typeof s=="function"){x(a).then(n=>s(null,n),n=>s(n));return}try{return await x(a)}catch(n){if(n.message==="A valid login session was not found. Please log in and try again.")return(0,p.confirm)("[[error:api.reauth-required]]",i=>{i&&ajaxify.go("login")});throw n}}async function x(a){const{url:s}=a;delete a.url,a.data&&!(a.data instanceof FormData)&&(a.data=JSON.stringify(a.data||{}),a.headers["content-type"]="application/json; charset=utf-8"),{options:a}=await(0,m.fire)("filter:api.options",{options:a}),a.data&&(a.body=a.data,delete a.data);const n=await fetch(s,a),{headers:i}=n,l=i.get("content-type"),o=l&&l.startsWith("application/json");let d;if(a.method!=="head"&&(o?d=await n.json():d=await n.text()),!n.ok)throw d?new Error(o?d.status.message:d):new Error(n.statusText);return o&&d&&d.hasOwnProperty("status")&&d.hasOwnProperty("response")?d.response:d}function T(a,s,n){return g({url:a+(s&&Object.keys(s).length?"?"+$.param(s):"")},n)}function D(a,s,n){return g({url:a+(s&&Object.keys(s).length?"?"+$.param(s):""),method:"head"},n)}function P(a,s,n){return g({url:a,method:"post",data:s,headers:{"x-csrf-token":config.csrf_token}},n)}function R(a,s,n){return g({url:a,method:"patch",data:s,headers:{"x-csrf-token":config.csrf_token}},n)}function L(a,s,n){return g({url:a,method:"put",data:s,headers:{"x-csrf-token":config.csrf_token}},n)}function k(a,s,n){return g({url:a,method:"delete",data:s,headers:{"x-csrf-token":config.csrf_token}},n)}},29869:A=>{A.exports=function(h,u,m){u.setGlobal("true",!0),u.setGlobal("false",!1);const b=24*60*60*1e3,p={displayMenuItem:y,buildMetaTag:g,buildLinkTag:x,stringify:T,escape:D,stripTags:P,buildCategoryIcon:R,buildCategoryLabel:L,generateCategoryBackground:k,generateChildrenCategories:a,generateTopicClass:s,membershipBtn:n,spawnPrivilegeStates:i,localeToHTML:l,renderTopicImage:o,renderDigestAvatar:d,userAgentIcons:v,buildAvatar:N,increment:W,generateRepliedTo:_,generateWrote:K,isoTimeToLocaleString:U,shouldHideReplyContainer:H,humanReadableNumber:z,formattedNumber:F,register:G,__escape:M};function M(e){return e}function y(e,t){const r=e.navigation[t];return!(!r||r.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||r.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||r.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function g(e){const t=e.name?'name="'+e.name+'" ':"",r=e.property?'property="'+e.property+'" ':"",f=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+t+r+f+`/>
	`}function x(e){const t=["link","rel","as","type","href","sizes","title","crossorigin"],[r,f,c,w,E,S,C,B]=t.map(I=>e[I]?`${I}="${e[I]}" `:"");return"<link "+r+f+c+w+S+C+E+B+`/>
	`}function T(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function D(e){return h.escapeHTML(e)}function P(e){return h.stripHTMLTags(e)}function R(e,t,r){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${r}" style="${k(e)} width:${t}; height: ${t}; font-size: ${parseInt(t,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function L(e,t="a",r=""){if(!e)return"";const f=t==="a"?`href="${m}/category/${e.slug}"`:"";return`<${t} ${f} class="badge px-1 text-truncate text-decoration-none ${r}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${t}>`}function k(e){if(!e)return"";const t=[];return e.bgColor&&(t.push("background-color: "+e.bgColor),t.push(`border-color: ${e.bgColor}!important`)),e.color&&t.push("color: "+e.color),e.backgroundImage&&(t.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&t.push("background-size: "+e.imageClass)),t.join("; ")+";"}function a(e){let t="";return!e||!e.children||!e.children.length||(e.children.forEach(function(r){if(r&&!r.isSection){const f=r.link?r.link:m+"/category/"+r.slug;t+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+k(r)+'"><i class="fa fa-fw '+r.icon+'"></i></div><a href="'+f+'"><small>'+r.name+"</small></a></span>"}}),t=t&&'<span class="category-children">'+t+"</span>"),t}function s(e){return["locked","pinned","deleted","unread","scheduled"].filter(r=>!!e[r]).join(" ")}function n(e,t=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${t}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${t}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${t}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function i(e,t,r){const f=[];for(const c in t)t.hasOwnProperty(c)&&f.push({name:c,state:t[c],type:r[c]});return f.map(function(c){const w=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],E=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],S=["groups:moderate"],C=e==="guests"&&(w.includes(c.name)||c.name.startsWith("groups:admin:"))||e==="spiders"&&!E.includes(c.name)||e==="Global Moderators"&&S.includes(c.name);return`
				<td data-privilege="${c.name}" data-value="${c.state}" data-type="${c.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${c.state?" checked":""}${C?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function l(e,t){return e=e||t||"en-GB",e.replace("_","-")}function o(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function d(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function v(e){let t="";switch(e.platform){case"Linux":t+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":t+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":t+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":t+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":t+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":t+='<i class="fa fa-fw fa-mobile"></i>';break;default:t+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":t+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":t+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":t+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":t+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":t+='<i class="fa fa-fw fa-edge"></i>';break;default:t+='<i class="fa fa-fw fa-question-circle"></i>';break}return t}function N(e,t,r,f,c){e||(e=this);const w=new Map([["alt",e.username],["title",e.username],["data-uid",e.uid],["loading","lazy"],["aria-label",`[[aria:user-avatar-for, ${e.username}]]`]]),E=[`--avatar-size: ${t};`],S=B=>Array.from(B).reduce((I,[J,j])=>(I+=` ${J}="${j}"`,I),"");f=f||"",w.set("class",`avatar ${f}${r?" avatar-rounded":""}`);let C="";return e.picture&&(w.set("component",c||"avatar/picture"),C+="<img "+S(w)+' src="'+e.picture+'" style="'+E.join(" ")+'" onError="this.remove();" itemprop="image" />'),w.set("component",c||"avatar/icon"),E.push("background-color: "+e["icon:bgColor"]+";"),C+="<span "+S(w)+' style="'+E.join(" ")+'">'+e["icon:text"]+"</span>",C}function W(e,t){return String(e+parseInt(t,10))}function _(e,t){const r=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-t*b?"on":"ago"}, ${e.toPid}, ${m}/post/${e.toPid}, ${r}, ${m}/post/${e.pid}, ${e.timestampISO}]]`}function K(e,t){return`[[topic:wrote-${e.timestamp<Date.now()-t*b?"on":"ago"}, ${m}/post/${e.pid}, ${e.timestampISO}]]`}function U(e,t="en-GB"){return new Date(e).toLocaleString([t],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function H(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function z(e,t=1){return h.makeNumberHumanReadable(e,t)}function F(e){return h.addCommas(e)}function G(){Object.keys(p).forEach(function(e){u.registerHelper(e,p[e])})}return p}},30076:(A,h,u)=>{var m,b;const p=u(29869);m=[u(77918),u(81335)],b=function(M,y){return p(M,y,config.relative_path)}.apply(h,m),b!==void 0&&(A.exports=b)}}]);
