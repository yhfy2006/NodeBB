"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[21374,99127,63154,34271,1091,25432,15794,57490,49897],{8454:(W,M,i)=>{var w,C;w=[i(24962),i(96352),i(52473),i(17459),i(34342),i(49897),i(40027),i(29930),i(91749),i(30076)],C=function(k,U,S,x,b,E,y,d,p,N){const P={};let l=!1;P.init=function(n){l=!1,u(),c(n),k.addShareHandlers(ajaxify.data.titleRaw),b.addVoteHandler(),P.updatePostCount(ajaxify.data.postcount)};function u(){document.querySelector('[component="topic"]')&&$('[component="topic"]').on("show.bs.dropdown",".moderator-tools",function(){const e=$(this),a=e.find(".dropdown-menu"),{top:o}=this.getBoundingClientRect();if(e.toggleClass("dropup",o>window.innerHeight/2),a.attr("data-loaded"))return;const s=e.parents("[data-pid]"),r=s.attr("data-pid"),A=parseInt(s.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:r},async(f,D)=>{if(f)return d.error(f);D.posts.display_move_tools=D.posts.display_move_tools&&A!==0;const I=await app.parseAndTranslate("partials/topic/post-menu-list",D),T=i(57576);a.attr("data-loaded","true").html(I),new T("[data-clipboard-text]"),p.fire("action:post.tools.load",{element:a})})})}P.toggle=function(n,e){const a=S.get("post","pid",n);a.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",e),a.find('[component="post/delete"]').toggleClass("hidden",e).parent().attr("hidden",e?"":null),a.find('[component="post/restore"]').toggleClass("hidden",!e).parent().attr("hidden",e?null:""),a.find('[component="post/purge"]').toggleClass("hidden",!e).parent().attr("hidden",e?null:""),P.removeMenu(a)},P.removeMenu=function(n){n.find('[component="post/tools"] .dropdown-menu').removeAttr("data-loaded").html("")},P.updatePostCount=function(n){S.get("topic/post-count").attr("title",n).html(N.humanReadableNumber(n)),U.setCount(n)};function c(n){const e=S.get("topic");Y(),e.on("click",'[component="post/quote"]',function(){m($(this),n)}),e.on("click",'[component="post/reply"]',function(){h($(this),n)}),$(".topic").on("click",'[component="topic/reply"]',function(o){o.preventDefault(),h($(this),n)}),$(".topic").on("click",'[component="topic/reply-as-topic"]',function(){x.translate(`[[topic:link-back, ${ajaxify.data.titleRaw}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(o){p.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:o})})}),e.on("click",'[component="post/bookmark"]',function(){return v($(this),R($(this),"data-pid"))}),e.on("click",'[component="post/upvote"]',function(){return b.toggleVote($(this),".upvoted",1)}),e.on("click",'[component="post/downvote"]',function(){return b.toggleVote($(this),".downvoted",-1)}),e.on("click",'[component="post/vote-count"]',function(){b.showVotes(R($(this),"data-pid"))}),e.on("click",'[component="post/flag"]',function(){const o=R($(this),"data-pid");i.e(6574).then(function(){var s=[i(6574)];(function(r){r.showFlagModal({type:"post",id:o})}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/flagUser"]',function(){const o=R($(this),"data-uid");i.e(6574).then(function(){var s=[i(6574)];(function(r){r.showFlagModal({type:"user",id:o})}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/flagResolve"]',function(){const o=$(this).attr("data-flagId");i.e(6574).then(function(){var s=[i(6574)];(function(r){r.resolve(o)}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/edit"]',function(){const o=$(this),s=parseInt(R(o,"data-timestamp"),10),r=parseInt(ajaxify.data.postEditDuration,10);a(r,s,"post-edit-duration-expired")&&p.fire("action:composer.post.edit",{pid:R(o,"data-pid")})}),config.enablePostHistory&&ajaxify.data.privileges["posts:history"]&&e.on("click",'[component="post/view-history"], [component="post/edit-indicator"]',function(){const o=$(this);i.e(92747).then(function(){var s=[i(92747)];(function(r){r.open(R(o,"data-pid"))}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/delete"]',function(){const o=$(this),s=parseInt(R(o,"data-timestamp"),10),r=parseInt(ajaxify.data.postDeleteDuration,10);a(r,s,"post-delete-duration-expired")&&j($(this))});function a(o,s,r){if(!ajaxify.data.privileges.isAdminOrMod&&o&&Date.now()-s>o*1e3){const A=Math.floor(o/86400),f=Math.floor(o%86400/3600),D=Math.floor(o%86400%3600/60),I=o%86400%3600%60;let T="[[error:"+r+", "+o+"]]";return A?f?T="[[error:"+r+"-days-hours, "+A+", "+f+"]]":T="[[error:"+r+"-days, "+A+"]]":f?D?T="[[error:"+r+"-hours-minutes, "+f+", "+D+"]]":T="[[error:"+r+"-hours, "+f+"]]":D&&(I?T="[[error:"+r+"-minutes-seconds, "+D+", "+I+"]]":T="[[error:"+r+"-minutes, "+D+"]]"),d.error(T),!1}return!0}e.on("click",'[component="post/restore"]',function(){j($(this))}),e.on("click",'[component="post/purge"]',function(){F($(this))}),e.on("click",'[component="post/move"]',function(){const o=$(this);i.e(90677).then(function(){var s=[i(90677)];(function(r){r.init(o.parents("[data-pid]"))}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/change-owner"]',function(){const o=$(this);i.e(17205).then(function(){var s=[i(17205)];(function(r){r.init(o.parents("[data-pid]"))}).apply(null,s)}).catch(i.oe)}),e.on("click",'[component="post/ban-ip"]',function(){const o=$(this).attr("data-ip");socket.emit("blacklist.addRule",o,function(s){if(s)return d.error(s);d.success("[[admin/manage/blacklist:ban-ip]]")})}),e.on("click",'[component="post/chat"]',function(){Q($(this))})}async function h(n,e){const a=await g();H(async function(){let o=await B(n);(R(n,"data-uid")==="0"||!R(n,"data-userslug"))&&(o="");const s=n.is('[component="post/reply"]')?R(n,"data-pid"):null,r=!s||!a.pid||s===a.pid;a.text&&r?(o=o||a.username,p.fire("action:composer.addQuote",{tid:e,pid:s,title:ajaxify.data.titleRaw,username:o,body:a.text,selectedPid:a.pid})):p.fire("action:composer.post.new",{tid:e,pid:s,title:ajaxify.data.titleRaw,body:o?o+" ":$('[component="topic/quickreply/text"]').val()||""})})}async function m(n,e){const a=await g();H(async function(){const o=await B(n),s=R(n,"data-pid");function r(f){p.fire("action:composer.addQuote",{tid:e,pid:s,username:o,title:ajaxify.data.titleRaw,text:f})}if(a.text&&s&&s===a.pid)return r(a.text);const{content:A}=await E.get(`/posts/${s}/raw`);r(A)})}async function g(){let n="",e,a="";const o=window.getSelection?window.getSelection():document.selection.createRange(),s=$('[component="post"] [component="post/content"]');let r;return s.each(function(A,f){o&&o.containsNode&&f&&o.containsNode(f,!0)&&(r=f)}),r&&o&&(n=o.toString(),e=$(r).parents('[component="post"]').attr("data-pid"),a=await B($(r))),{text:n,pid:e,username:a}}function v(n,e){const a=n.attr("data-bookmarked")==="false"?"put":"del";return E[a](`/posts/${e}/bookmark`,void 0,function(o){if(o)return d.error(o);const s=a==="put"?"bookmark":"unbookmark";p.fire(`action:post.${s}`,{pid:e})}),!1}function R(n,e){return n.parents("[data-pid]").attr(e)}function B(n){return new Promise(e=>{let a="";if(n.attr("component")==="topic/reply"){e(a);return}const o=n.parents("[data-pid]");if(o.length){Promise.all([i.e(53050),i.e(26174)]).then(function(){var s=[i(13230)];(function(r){a=r(o.attr("data-username"),!0),a||(o.attr("data-uid")!=="0"?a="[[global:former-user]]":a="[[global:guest]]"),a&&a!=="[[global:former-user]]"&&a!=="[[global:guest]]"&&(a="@"+a),e(a)}).apply(null,s)}).catch(i.oe);return}e(a)})}function j(n){const e=R(n,"data-pid"),o=S.get("post","pid",e).hasClass("deleted")?"restore":"delete";L(o,e)}function F(n){L("purge",R(n,"data-pid"))}async function L(n,e){({action:n}=await p.fire(`static:post.${n}`,{action:n,pid:e})),n&&y.confirm("[[topic:post-"+n+"-confirm]]",function(a){if(!a)return;const o=n==="purge"?"":"/state";E[n==="restore"?"put":"del"](`/posts/${e}${o}`).catch(d.error)})}function Q(n){const e=n.parents("[data-pid]");return i.e(92619).then(function(){var a=[i(92619)];(function(o){o.newChat(e.attr("data-uid"))}).apply(null,a)}).catch(i.oe),n.parents(".btn-group").find(".dropdown-toggle").click(),!1}function H(n){if(!parseInt(ajaxify.data.topicStaleDays,10))return n();const a=Math.min(Date.now()-1e3*60*60*24*ajaxify.data.topicStaleDays,864e13);if(l||ajaxify.data.lastposttime>=a)return n();y.dialog({title:"[[topic:stale.title]]",message:"[[topic:stale.warning]]",buttons:{reply:{label:"[[topic:stale.reply-anyway]]",className:"btn-link",callback:function(){l=!0,n()}},create:{label:"[[topic:stale.create]]",className:"btn-primary",callback:function(){x.translate(`[[topic:link-back, ${ajaxify.data.title}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(s){p.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:s,fromStaleTopic:!0})})}}}}).modal()}const K=utils.debounce(V,250);function Y(){ajaxify.data.privileges["topics:reply"]&&(p.onPage("action:posts.loaded",t),$(document).off("selectionchange"),$(document).on("selectionchange",function(){window.getSelection().toString()===""&&$('[component="selection/tooltip"]').addClass("hidden")}),$(document).on("selectionchange",K))}function V(){window.getSelection().toString()===""||t()}async function t(){let n=$('[component="selection/tooltip"]');if(n.addClass("hidden"),n.attr("data-ajaxify")==="1"){n.remove();return}const e=window.getSelection();if(e.focusNode&&e.type==="Range"&&ajaxify.data.template.topic){const a=$(e.focusNode),o=$(e.anchorNode),s=o.parents("[data-pid]").attr("data-pid"),r=a.parents("[data-pid]").attr("data-pid");if(s!==r||!a.parents('[component="post/content"]').length||!o.parents('[component="post/content"]').length)return;const A=a.parents("[data-pid]"),f=e.getRangeAt(0);if(!A.length||f.collapsed)return;const D=f.getClientRects(),I=D[D.length-1];n.length||(n=await app.parseAndTranslate("partials/topic/selection-tooltip",ajaxify.data),$('[component="selection/tooltip"]').remove(),n.addClass("hidden").appendTo("body")),n.off("click").on("click",'[component="selection/tooltip/quote"]',function(){n.addClass("hidden"),m(A.find('[component="post/quote"]'),ajaxify.data.tid)}),n.removeClass("hidden"),$(window).one("action:ajaxify.start",function(){n.attr("data-ajaxify",1).addClass("hidden"),$(document).off("selectionchange",K)});const T=n.outerWidth(!0);n.css({top:I.bottom+$(window).scrollTop(),left:T>I.width?I.left:I.left+I.width-T})}}return P}.apply(M,w),C!==void 0&&(W.exports=C)},34342:(W,M,i)=>{var w,C;w=[i(52473),i(17459),i(49897),i(91749),i(40027),i(29930),i(89336)],C=function(k,U,S,x,b,E,y){const d={};let p={};d.addVoteHandler=function(){p={},k.get("topic").on("mouseenter",'[data-pid] [component="post/vote-count"]',P),k.get("topic").on("mouseleave",'[data-pid] [component="post/vote-count"]',N)};function N(){const u=$(this),c=u.parents("[data-pid]").attr("data-pid"),h=y.Tooltip.getInstance(this);h&&(h.dispose(),u.attr("title","")),p[c]=!1}function P(){const u=$(this),h=u.parent().parents("[data-pid]").attr("data-pid");p[h]=!0;const m=y.Tooltip.getInstance(this);m&&(m.dispose(),u.attr("title","")),socket.emit("posts.getUpvoters",[h],function(g,v){if(g)return E.error(g);p[h]&&v.length&&l(u,v[0])})}function l(u,c){function h(g){u.attr("title",g),new y.Tooltip(u,{container:"#content",html:!0}).show()}let m=c.usernames.filter(g=>g!=="[[global:former-user]]");m.length&&(m.length+c.otherCount>c.cutoff?(m=m.join(", ").replace(/,/g,"|"),U.translate("[[topic:users-and-others, "+m+", "+c.otherCount+"]]",function(g){g=g.replace(/\|/g,","),h(g)})):(m=m.join(", "),h(m)))}return d.toggleVote=function(u,c,h){const m=u.closest("[data-pid]"),v=m.find(c).length?"del":"put",R=m.attr("data-pid");return S[v](`/posts/${R}/vote`,{delta:h},function(B){if(B){if(!app.user.uid){ajaxify.go("login");return}return E.error(B)}x.fire("action:post.toggleVote",{pid:R,delta:h,unvote:v==="del"})}),!1},d.showVotes=function(u){socket.emit("posts.getVoters",{pid:u,cid:ajaxify.data.cid},function(c,h){if(c)return c.message==="[[error:no-privileges]]"?void 0:E.error(c);app.parseAndTranslate("modals/votes",h,function(m){const g=b.dialog({title:"[[global:voters]]",message:m,className:"vote-modal",show:!0,onEscape:!0,backdrop:!0});g.on("click",function(){g.modal("hide")})})})},d}.apply(M,w),C!==void 0&&(W.exports=C)},49897:(W,M,i)=>{i.r(M),i.d(M,{del:()=>P,get:()=>E,head:()=>y,patch:()=>p,post:()=>d,put:()=>N});var w=i(91749),C=i.n(w),k=i(40027),U=i.n(k);const S=config.relative_path+"/api/v3";async function x(l,u){if(l.url=l.url.startsWith("/api")?config.relative_path+l.url:S+l.url,typeof u=="function"){b(l).then(c=>u(null,c),c=>u(c));return}try{return await b(l)}catch(c){if(c.message==="A valid login session was not found. Please log in and try again.")return(0,k.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go("login")});throw c}}async function b(l){const{url:u}=l;delete l.url,l.data&&!(l.data instanceof FormData)&&(l.data=JSON.stringify(l.data||{}),l.headers["content-type"]="application/json; charset=utf-8"),{options:l}=await(0,w.fire)("filter:api.options",{options:l}),l.data&&(l.body=l.data,delete l.data);const c=await fetch(u,l),{headers:h}=c,m=h.get("content-type"),g=m&&m.startsWith("application/json");let v;if(l.method!=="head"&&(g?v=await c.json():v=await c.text()),!c.ok)throw v?new Error(g?v.status.message:v):new Error(c.statusText);return g&&v&&v.hasOwnProperty("status")&&v.hasOwnProperty("response")?v.response:v}function E(l,u,c){return x({url:l+(u&&Object.keys(u).length?"?"+$.param(u):"")},c)}function y(l,u,c){return x({url:l+(u&&Object.keys(u).length?"?"+$.param(u):""),method:"head"},c)}function d(l,u,c){return x({url:l,method:"post",data:u,headers:{"x-csrf-token":config.csrf_token}},c)}function p(l,u,c){return x({url:l,method:"patch",data:u,headers:{"x-csrf-token":config.csrf_token}},c)}function N(l,u,c){return x({url:l,method:"put",data:u,headers:{"x-csrf-token":config.csrf_token}},c)}function P(l,u,c){return x({url:l,method:"delete",data:u,headers:{"x-csrf-token":config.csrf_token}},c)}},29869:W=>{W.exports=function(M,i,w){i.setGlobal("true",!0),i.setGlobal("false",!1);const C=24*60*60*1e3,k={displayMenuItem:S,buildMetaTag:x,buildLinkTag:b,stringify:E,escape:y,stripTags:d,buildCategoryIcon:p,buildCategoryLabel:N,generateCategoryBackground:P,generateChildrenCategories:l,generateTopicClass:u,membershipBtn:c,spawnPrivilegeStates:h,localeToHTML:m,renderTopicImage:g,renderDigestAvatar:v,userAgentIcons:R,buildAvatar:B,increment:j,generateRepliedTo:F,generateWrote:L,isoTimeToLocaleString:Q,shouldHideReplyContainer:H,humanReadableNumber:K,formattedNumber:Y,register:V,__escape:U};function U(t){return t}function S(t,n){const e=t.navigation[n];return!(!e||e.route.match("/users")&&t.user&&!t.user.privileges["view:users"]||e.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"]||e.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])}function x(t){const n=t.name?'name="'+t.name+'" ':"",e=t.property?'property="'+t.property+'" ':"",a=t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"";return"<meta "+n+e+a+`/>
	`}function b(t){const n=["link","rel","as","type","href","sizes","title","crossorigin"],[e,a,o,s,r,A,f,D]=n.map(I=>t[I]?`${I}="${t[I]}" `:"");return"<link "+e+a+o+s+A+f+r+D+`/>
	`}function E(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function y(t){return M.escapeHTML(t)}function d(t){return M.stripHTMLTags(t)}function p(t,n,e){return t?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${e}" style="${P(t)} width:${n}; height: ${n}; font-size: ${parseInt(n,10)/2}px;">${t.icon?`<i class="fa fa-fw ${t.icon}"></i>`:""}</span>`:""}function N(t,n="a",e=""){if(!t)return"";const a=n==="a"?`href="${w}/category/${t.slug}"`:"";return`<${n} ${a} class="badge px-1 text-truncate text-decoration-none ${e}" style="color: ${t.color};background-color: ${t.bgColor};border-color: ${t.bgColor}!important; max-width: 70vw;">
			${t.icon&&t.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${t.icon}"></i>`:""}
			${t.name}
		</${n}>`}function P(t){if(!t)return"";const n=[];return t.bgColor&&(n.push("background-color: "+t.bgColor),n.push(`border-color: ${t.bgColor}!important`)),t.color&&n.push("color: "+t.color),t.backgroundImage&&(n.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&n.push("background-size: "+t.imageClass)),n.join("; ")+";"}function l(t){let n="";return!t||!t.children||!t.children.length||(t.children.forEach(function(e){if(e&&!e.isSection){const a=e.link?e.link:w+"/category/"+e.slug;n+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+P(e)+'"><i class="fa fa-fw '+e.icon+'"></i></div><a href="'+a+'"><small>'+e.name+"</small></a></span>"}}),n=n&&'<span class="category-children">'+n+"</span>"),n}function u(t){return["locked","pinned","deleted","unread","scheduled"].filter(e=>!!t[e]).join(" ")}function c(t,n=""){return t.isMember&&t.name!=="administrators"?`<button class="btn btn-danger ${n}" data-action="leave" data-group="${t.displayName}" ${t.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:t.isPending&&t.name!=="administrators"?`<button class="btn btn-warning disabled ${n}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:t.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${t.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${t.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!t.disableJoinRequests&&t.name!=="administrators"?`<button class="btn btn-success ${n}" data-action="join" data-group="${t.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function h(t,n,e){const a=[];for(const o in n)n.hasOwnProperty(o)&&a.push({name:o,state:n[o],type:e[o]});return a.map(function(o){const s=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],r=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],A=["groups:moderate"],f=t==="guests"&&(s.includes(o.name)||o.name.startsWith("groups:admin:"))||t==="spiders"&&!r.includes(o.name)||t==="Global Moderators"&&A.includes(o.name);return`
				<td data-privilege="${o.name}" data-value="${o.state}" data-type="${o.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${o.state?" checked":""}${f?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function m(t,n){return t=t||n||"en-GB",t.replace("_","-")}function g(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.username+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.username+'" />'}function v(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"}function R(t){let n="";switch(t.platform){case"Linux":n+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":n+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":n+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":n+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":n+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":n+='<i class="fa fa-fw fa-mobile"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(t.browser){case"Chrome":n+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":n+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":n+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":n+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":n+='<i class="fa fa-fw fa-edge"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}return n}function B(t,n,e,a,o){t||(t=this);const s=new Map([["alt",t.username],["title",t.username],["data-uid",t.uid],["loading","lazy"],["aria-label",`[[aria:user-avatar-for, ${t.username}]]`]]),r=[`--avatar-size: ${n};`],A=D=>Array.from(D).reduce((I,[T,z])=>(I+=` ${T}="${z}"`,I),"");a=a||"",s.set("class",`avatar ${a}${e?" avatar-rounded":""}`);let f="";return t.picture&&(s.set("component",o||"avatar/picture"),f+="<img "+A(s)+' src="'+t.picture+'" style="'+r.join(" ")+'" onError="this.remove();" itemprop="image" />'),s.set("component",o||"avatar/icon"),r.push("background-color: "+t["icon:bgColor"]+";"),f+="<span "+A(s)+' style="'+r.join(" ")+'">'+t["icon:text"]+"</span>",f}function j(t,n){return String(t+parseInt(n,10))}function F(t,n){const e=t.parent&&t.parent.displayname?t.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${t.timestamp<Date.now()-n*C?"on":"ago"}, ${t.toPid}, ${w}/post/${t.toPid}, ${e}, ${w}/post/${t.pid}, ${t.timestampISO}]]`}function L(t,n){return`[[topic:wrote-${t.timestamp<Date.now()-n*C?"on":"ago"}, ${w}/post/${t.pid}, ${t.timestampISO}]]`}function Q(t,n="en-GB"){return new Date(t).toLocaleString([n],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function H(t){return!!(t.replies.count<=0||t.replies.hasSingleImmediateReply)}function K(t,n=1){return M.makeNumberHumanReadable(t,n)}function Y(t){return M.addCommas(t)}function V(){Object.keys(k).forEach(function(t){i.registerHelper(t,k[t])})}return k}},30076:(W,M,i)=>{var w,C;const k=i(29869);w=[i(77918),i(81335)],C=function(U,S){return k(U,S,config.relative_path)}.apply(M,w),C!==void 0&&(W.exports=C)},24962:(W,M,i)=>{var w,C;w=[i(91749)],C=function(k){const U={},S=window.location.protocol+"//"+window.location.host;U.addShareHandlers=function(E){function y(d,p,N,P){return window.open(d,"_blank","width="+N+",height="+P+",scrollbars=no,status=no"),k.fire("action:share.open",{url:d,urlToPost:p}),!1}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){const d=$(this).find(".post-link");d.val(S+b($(this))),setTimeout(function(){d.putCursorAtEnd().select()},50)}),x(".post-link",function(d){return d.preventDefault(),!1}),x('[component="share/twitter"]',function(){const d=b($(this)),p=`https://twitter.com/intent/tweet?text=${encodeURIComponent(E)}&url=${encodeURIComponent(d)}`;return y(p,d,550,420)}),x('[component="share/facebook"]',function(){const d=b($(this)),p=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(d)}`;return y(p,d,626,436)}),x('[component="share/whatsapp"]',function(){const d=b($(this)),p=encodeURIComponent(E)+" - "+encodeURIComponent(d),N=config.useragent.isMobile?`whatsapp://send?text=${p}`:`https://wa.me/?text=${p}`;return y(N,d,626,436)}),x('[component="share/telegram"]',function(){const d=b($(this)),p=`https://t.me/share/url?text=${encodeURIComponent(E)}&url=${encodeURIComponent(d)}`;return y(p,d,626,436)}),x('[component="share/linkedin"]',function(){const d=b($(this)),p=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(d)}`;return y(p,d,626,436)}),k.fire("action:share.addHandlers",{openShare:y})};function x(E,y){$("#content").off("click",E).on("click",E,y)}function b(E){const y=parseInt(E.parents("[data-pid]").attr("data-pid"),10),d="/post"+(y?"/"+y:"");return S+config.relative_path+d}return U}.apply(M,w),C!==void 0&&(W.exports=C)}}]);
