"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[89393,99127,34271,1091,49897],{65161:(A,C,o)=>{var f,v;f=[o(52473),o(29930),o(60419)],v=function(y,O,E){const l={};let m=0,d,a,h,i,u,g;l.init=function(r,s){m=r,a=s.find('[component="chat/message/search/results"]'),h=s.find('[component="chat/message/content"]'),i=s.find('[component="chat/room/search/clear"]'),g=s.find('[component="chat/room/search/container"]'),u=s.find('[component="chat/room/search/toggle"'),d=s.find('[component="chat/room/search"]'),d.on("keyup",utils.debounce(n,250)).on("focus",()=>{d.val()&&n()}),s.find('[component="chat/input"]').on("focus",()=>{a.addClass("hidden"),h.removeClass("hidden")}),i.on("click",e),u.on("click",()=>{g.removeClass("hidden"),u.addClass("hidden"),d.trigger("focus")}),d.on("blur",()=>{d.val()||e()})};function e(){d.val(""),t(),a.addClass("hidden"),i.addClass("hidden"),g.addClass("hidden"),h.removeClass("hidden"),u.removeClass("hidden")}async function n(){const r=d.val();!r||r.length<=2||(i.removeClass("hidden"),socket.emit("modules.chats.searchMessages",{content:r,roomId:m}).then(p).catch(O.error))}function t(){a.children("[data-mid]").remove()}async function p(r){if(t(),!r.length)return a.removeClass("hidden"),h.addClass("hidden"),a.find('[component="chat/message/search/no-results"]').removeClass("hidden");a.find('[component="chat/message/search/no-results"]').addClass("hidden");const s=await app.parseAndTranslate("partials/chats/messages",{messages:r,isAdminOrGlobalMod:app.user.isAdmin||app.user.isGlobalMod});a.append(s),E.onMessagesAddedToDom(a.find('[component="chat/message"]')),h.addClass("hidden"),a.removeClass("hidden")}return l}.apply(C,f),v!==void 0&&(A.exports=v)},49897:(A,C,o)=>{o.r(C),o.d(C,{del:()=>g,get:()=>d,head:()=>a,patch:()=>i,post:()=>h,put:()=>u});var f=o(91749),v=o.n(f),y=o(40027),O=o.n(y);const E=config.relative_path+"/api/v3";async function l(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:E+e.url,typeof n=="function"){m(e).then(t=>n(null,t),t=>n(t));return}try{return await m(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again.")return(0,y.confirm)("[[error:api.reauth-required]]",p=>{p&&ajaxify.go("login")});throw t}}async function m(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,f.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:p}=t,r=p.get("content-type"),s=r&&r.startsWith("application/json");let c;if(e.method!=="head"&&(s?c=await t.json():c=await t.text()),!t.ok)throw c?new Error(s?c.status.message:c):new Error(t.statusText);return s&&c&&c.hasOwnProperty("status")&&c.hasOwnProperty("response")?c.response:c}function d(e,n,t){return l({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function a(e,n,t){return l({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},t)}function h(e,n,t){return l({url:e,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function i(e,n,t){return l({url:e,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function u(e,n,t){return l({url:e,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function g(e,n,t){return l({url:e,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}}}]);
