(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[47061,97650,33085],{96349:(u,p,c)=>{"use strict";var y,m;y=[c(29930),c(89336),c(49897)],m=function(C,g,s){const d={};return d.init=function(o,e){let i=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","tracking","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let f=[];Array.isArray(e.localCategories)&&(f=e.localCategories.map(l=>({...l}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const t=o.find('[component="category-selector-search"]');if(!t.length)return;const r=t.parent('[component="category/dropdown"]').length>0||t.parent('[component="category-selector"]').length>0;o.on("show.bs.dropdown",function(){r&&(o.find(".dropdown-toggle").css({visibility:"hidden"}),t.removeClass("hidden"),t.css({"z-index":o.find(".dropdown-toggle").css("z-index")+1}));function l(){const h=t.find("input").val();h.length>1||!h&&!i?n(h,function(E){i=e.cacheList&&(i||E),a(E)}):!h&&i&&a(i)}t.on("click",function(h){h.preventDefault(),h.stopPropagation()}),t.find("input").val("").on("keyup",utils.debounce(l,300)),l()}),o.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||t.find("input").focus()}),o.on("hide.bs.dropdown",function(){r&&(o.find(".dropdown-toggle").css({visibility:"inherit"}),t.addClass("hidden")),t.off("click"),t.find("input").off("keyup")});function n(l,h){s.get("/search/categories",{search:l,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(E,{categories:v}){if(E)return C.error(E);h(f.concat(v))})}function a(l){const h=e.selectedCids.map(String);l.forEach(function(E){E.selected=h.includes(String(E.cid))}),app.parseAndTranslate(e.template,{categoryItems:l.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(E){o.find('[component="category/list"]').html(E.find('[component="category/list"]').html()),o.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!l.length);const v=g.Dropdown.getInstance(o.find(".dropdown-toggle").get(0));v&&v.update()})}},d}.apply(p,y),m!==void 0&&(u.exports=m)},65348:(u,p,c)=>{"use strict";var y,m;y=[c(96349),c(40027),c(91749),c(17459)],m=function(C,g,s,d){const o={};return o.init=function(e,i){if(!e||!e.length)return;i=i||{};const f=i.onSelect||function(){};i.states=i.states||["watching","tracking","notwatching","ignoring"],i.template=i.template||"partials/category/selector-dropdown-left",s.fire("action:category.selector.options",{el:e,options:i}),C.init(e,i);const t={el:e,selectedCategory:null};e.on("click","[data-cid]",function(){const n=$(this);return n.hasClass("disabled")?!1:(t.selectCategory(n.attr("data-cid")),f(t.selectedCategory))});let r=t.el.find('[component="category-selector-selected"]').html();return d.translate(r,n=>{r=n}),t.selectCategory=function(n){const a=t.el.find('[data-cid="'+n+'"]');t.selectedCategory={cid:n,name:a.attr("data-name")},a.length?t.el.find('[component="category-selector-selected"]').html(a.find('[component="category-markup"]').html()):t.el.find('[component="category-selector-selected"]').html(r)},t.getSelectedCategory=function(){return t.selectedCategory},t.getSelectedCid=function(){return t.selectedCategory?t.selectedCategory.cid:0},i.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(i.template,{selectedCategory:i.selectedCategory},function(n){t.el.find('[component="category-selector-selected"]').html(n.find('[component="category-selector-selected"]').html())}),t},o.modal=function(e){e=e||{},e.onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},function(i){const f=g.dialog({title:e.title||"[[modules:composer.select-category]]",message:i,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:r}}}),t=o.init(f.find('[component="category-selector"]'),e);function r(n){return n.preventDefault(),t.selectedCategory&&(e.onSubmit(t.selectedCategory),f.modal("hide")),!1}e.openOnLoad&&f.on("shown.bs.modal",function(){f.find(".dropdown-toggle").dropdown("toggle")}),f.find("form").on("submit",r)})},o}.apply(p,y),m!==void 0&&(u.exports=m)},71431:(u,p,c)=>{u.exports=c(49641)},88518:(u,p,c)=>{u.exports=c(54516)},13342:(u,p,c)=>{u.exports=c(41644)},92762:(u,p,c)=>{u.exports=c(94252)},72573:(u,p,c)=>{u.exports=c(59367)},52543:(u,p,c)=>{u.exports=c(28721)},31494:(u,p,c)=>{u.exports=c(36244)},10870:(u,p,c)=>{"use strict";var y,m;y=[c(40027),c(17459),c(68636),c(29930),c(91749)],m=function(C,g,s,d,o){const e={};let i,f;e.show=function(){o.one("action:ajaxify.end",()=>{r(),t(),e.showEmailConfirmWarning()})},e.showEmailConfirmWarning=function(n){if(!config.emailPrompt||!app.user.uid||parseInt(s.getItem("email-confirm-dismiss"),10)===1)return;const a={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{s.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(a.message="[[error:no-email-to-confirm]]",a.clickfn=function(){d.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},d.alert(a)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(a.message=n||"[[error:email-not-confirmed]]",a.clickfn=function(){d.remove("email_confirm"),ajaxify.go("/me/edit/email")},d.alert(a)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(a.message="[[error:email-not-confirmed-email-sent]]",d.alert(a))};function t(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||s.getItem("cookieconsent")==="1"||(config.cookies.message=g.unescape(config.cookies.message),config.cookies.dismiss=g.unescape(config.cookies.dismiss),config.cookies.link=g.unescape(config.cookies.link),config.cookies.link_url=g.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(n){$(document.body).append(n),$(document.body).addClass("cookie-consent-open");const a=$(".cookie-consent");a.find("button").on("click",function(){s.setItem("cookieconsent","1"),a.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function r(){const n=utils.params({full:!0});i=n.has("loggedin"),f=n.get("register"),i&&(d.alert({type:"success",title:"[[global:welcome-back]] "+app.user.username+"!",message:"[[global:you-have-successfully-logged-in]]",timeout:5e3}),n.delete("loggedin")),f&&(C.alert({message:utils.escapeHTML(decodeURIComponent(f))}),n.delete("register")),n.has("lang")&&n.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${n.get("lang")}", but that is already the forum default language.`),n.delete("lang"));const a=n.toString();ajaxify.updateHistory(ajaxify.currentPage+(a?`?${a}`:"")+document.location.hash,!0)}return e.showInvalidSession=function(){C.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},e.showSessionMismatch=function(){C.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},e}.apply(p,y),m!==void 0&&(u.exports=m)},41088:(u,p,c)=>{"use strict";var y;y=function(){const m={};return m.apply=function(C){$(C).on("mousewheel",function(g){const s=this.scrollTop,d=this.scrollHeight,o=Math.round(this.getBoundingClientRect().height);if(g.originalEvent.deltaY<0&&s===0||g.originalEvent.deltaY>0&&o+s>=d)return!1})},m}.call(p,c,p,u),y!==void 0&&(u.exports=y)},69749:(u,p,c)=>{"use strict";var y,m;y=[c(17459),c(68636),c(91749),c(29930),c(89336)],m=function(C,g,s,d,o){const e={current:{}};e.init=function(t){if(!config.searchEnabled)return;t=t||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((n,a)=>{i($(a),t)})};function i(t,r){const n=t.find('[component="search/button"]'),a=t.find('[component="search/fields"]'),l=a.find('input[name="query"]'),h=a.find("#quick-search-container");a.hasClass("hidden")&&l.off("blur").on("blur",function(){setTimeout(function(){l.is(":focus")||(a.addClass("hidden"),n.removeClass("hidden"))},200)}),l.off("focus");const v={inputEl:l,resultEl:h};e.enableQuickSearch({searchOptions:r,searchElements:v}),n.off("click").on("click",function(x){return!config.loggedIn&&!app.user.privileges["search:content"]?(d.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(x.stopPropagation(),e.showAndFocusInput(t),!1)}),t.off("submit").on("submit",function(){const x=$(this).find('input[name="query"]'),w=e.getSearchPreferences();return w.term=x.val(),w.in=r.in,s.fire("action:search.submit",{searchOptions:w,searchElements:v}),e.query(w,function(){x.val(""),l.trigger("blur")}),!1})}e.enableQuickSearch=function(t){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const r=Object.assign({in:config.searchDefaultInQuick||"titles"},t.searchOptions),n=t.searchElements.resultEl,a=t.searchElements.inputEl;let l=a.val();const h=n.find(".filter-category");function E(){ajaxify.data.template.category&&ajaxify.data.cid&&C.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(b){const k=$("<div></div>").html(b).text();h.find(".name").text(k)}),h.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function v(){t.searchOptions=Object.assign({},r),t.searchOptions.term=a.val(),E(),ajaxify.data.template.category&&ajaxify.data.cid&&h.find('input[type="checkbox"]').is(":checked")&&(t.searchOptions.categories=[ajaxify.data.cid],t.searchOptions.searchChildren=!0),t.hideDuringSearch||(n.removeClass("hidden").find(".quick-search-results-container").html(""),n.find(".loading-indicator").removeClass("hidden")),s.fire("action:search.quick.start",t),t.searchOptions.searchOnly=1,e.api(t.searchOptions,function(b){if(n.find(".loading-indicator").addClass("hidden"),!b.posts||t.hideOnNoMatches&&!b.posts.length)return n.addClass("hidden").find(".quick-search-results-container").html("");b.posts.forEach(function(k){const D=$("<div>"+k.content+"</div>").text(),_=a.val().toLowerCase().replace(/^in:topic-\d+/,""),S=Math.max(0,D.toLowerCase().indexOf(_)-40);k.snippet=utils.escapeHTML((S>0?"...":"")+D.slice(S,S+80)+(D.length-S>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",b,function(k){k.length&&k.find(".timeago").timeago(),n.toggleClass("hidden",!k.length||!a.is(":focus")).find(".quick-search-results-container").html(k.length?k:"");const D=n.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");e.highlightMatches(t.searchOptions.term,D),s.fire("action:search.quick.complete",{data:b,options:t})})})}n.find('.filter-category input[type="checkbox"]').on("change",function(){a.focus(),v()}),a.off("keyup").on("keyup",utils.debounce(function(){if(a.val().length<3){n.addClass("hidden"),l=a.val();return}if(a.val()!==l){if(l=a.val(),!a.is(":focus"))return n.addClass("hidden");v()}},500));let x=!1;n.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){n.addClass("hidden")}),x=!0}),a.on("blur",function(){setTimeout(function(){!a.is(":focus")&&!x&&!n.hasClass("hidden")&&n.addClass("hidden")},200)});let w=!1;s.on("action:ajaxify.end",function(){ajaxify.isCold()||(w=!0)}),a.on("focus",function(){x=!1;const b=a.val();l=b,b&&n.find("#quick-search-results").children().length&&(E(),w?(v(),w=!1):n.removeClass("hidden"),a[0].setSelectionRange(b.startsWith("in:topic")?b.indexOf(" ")+1:0,b.length))}),a.off("refresh").on("refresh",function(){v()})},e.showAndFocusInput=function(t){const r=t.parents(".dropdown-menu");if(r.length){const n=r.siblings("[data-bs-toggle]"),a=o.Dropdown.getOrCreateInstance(n[0]);a&&a.show()}else t.find('[component="search/fields"]').removeClass("hidden"),t.find('[component="search/button"]').addClass("hidden"),t.find('[component="search/fields"] input[name="query"]').trigger("focus")},e.query=function(t,r){r=r||function(){},ajaxify.go("search?"+f(t),r)},e.api=function(t,r){const n=config.relative_path+"/api/search?"+f(t);t.hasOwnProperty("searchOnly")&&delete t.searchOnly;const a=config.relative_path+"/search?"+f(t);$.get(n,function(l){l.url=a,r(l)})};function f(t){const r=t.in||"titles";let n=t.term.replace(/^[ ?#]*/,"");try{n=encodeURIComponent(n)}catch{return d.error("[[error:invalid-search-term]]")}const a={...t,term:n,in:r};return s.fire("action:search.createQueryString",{query:a,data:t}),decodeURIComponent($.param(a))}return e.getSearchPreferences=function(){try{return JSON.parse(g.getItem("search-preferences")||"{}")}catch{return{}}},e.highlightMatches=function(t,r){if(!t||!r.length)return;t=utils.escapeHTML(t.replace(/^"/,"").replace(/"$/,"").trim());const n=t.split(" ").filter(l=>l.length>1).map(function(l){return utils.escapeRegexChars(l)}).join("|"),a=new RegExp("("+n+")","gi");r.each(function(){const l=$(this),h=[];l.find("*").each(function(){$(this).after("<!-- "+h.length+" -->"),h.push($("<div></div>").append($(this)))}),l.html(l.html().replace(a,function(E,v){return'<strong class="search-match fw-bold text-decoration-underline">'+v+"</strong>"})),h.forEach(function(E,v){l.html(l.html().replace("<!-- "+v+" -->",function(){return E.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-fluid")},e}.apply(p,y),m!==void 0&&(u.exports=m)},43103:(u,p,c)=>{"use strict";var y,m;y=[c(29930)],m=function(C){const g={};return g.init=function(s){const d=s.uploadFormEl;if(d.length&&(d.attr("action",config.relative_path+s.route),s.dragDropAreaEl&&g.handleDragDrop({container:s.dragDropAreaEl,callback:function(o){g.ajaxSubmit({uploadForm:d,upload:o,callback:s.callback})}}),s.pasteEl&&g.handlePaste({container:s.pasteEl,callback:function(o){g.ajaxSubmit({uploadForm:d,upload:o,callback:s.callback})}}),s.uploadBtnEl)){const o=d.find('input[name="files[]"]');s.uploadBtnEl.on("click",function(){o.trigger("click")}),o.on("change",function(e){const i=(e.target||{}).files||($(this).val()?[{name:$(this).val(),type:utils.fileMimeType($(this).val())}]:null);i&&g.ajaxSubmit({uploadForm:d,upload:{files:i,fileNames:Array.from(i).map(f=>f.name)},callback:s.callback})})}},g.handleDragDrop=function(s){let d=!1;const o=s.container,e=s.container.find(".imagedrop");o.on("dragenter",function(){d||(e.css("top","0px"),e.css("height",o.height()+"px"),e.css("line-height",o.height()+"px"),e.show(),e.on("dragleave",function(){e.hide(),e.off("dragleave")}))}),e.on("drop",function(t){t.preventDefault();const r=t.originalEvent.dataTransfer.files;if(r.length){let a;if(window.FormData){a=new FormData;for(var n=0;n<r.length;++n)a.append("files[]",r[n],r[n].name)}s.callback({files:r,formData:a})}return e.hide(),!1});function i(f){return f.preventDefault(),!1}$(document).off("dragstart").on("dragstart",function(){d=!0}).off("dragend").on("dragend, mouseup",function(){d=!1}),e.on("dragover",i),e.on("dragenter",i)},g.handlePaste=function(s){s.container.on("paste",function(o){const e=(o.clipboardData||o.originalEvent.clipboardData||{}).items,i=[],f=[];let t=null;window.FormData&&(t=new FormData),[].forEach.call(e,function(r){const n=r.getAsFile();if(n){const a=utils.generateUUID()+"-"+n.name;t&&t.append("files[]",n,a),i.push(n),f.push(a)}}),i.length&&s.callback({files:i,fileNames:f,formData:t})})},g.ajaxSubmit=function(s){const d=[...s.upload.files];for(let e=0;e<d.length;++e){const i=d[e].type.match(/image./);if(i&&!app.user.privileges["upload:post:image"]||!i&&!app.user.privileges["upload:post:file"])return C.error("[[error:no-privileges]]");if(!app.user.isAdmin&&d[e].size>parseInt(config.maximumFileSize,10)*1024)return s.uploadForm[0].reset(),C.error("[[error:file-too-big, "+config.maximumFileSize+"]]")}const o=Date.now();s.uploadForm.off("submit").on("submit",function(){return $(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:s.upload.formData,error:function(e){let i=e.responseJSON&&(e.responseJSON.error||e.responseJSON.status&&e.responseJSON.status.message)||"[[error:parse-error]]";e&&e.status===413&&(i=e.statusText||"Request Entity Too Large"),C.error(i),C.remove(o)},uploadProgress:function(e,i,f,t){C.alert({alert_id:o,message:"[[modules:composer.uploading, "+t+"%]]"})},success:function(e){const i=e.response.images;if(i&&i.length)for(var f=0;f<i.length;++f)i[f].filename=d[f].name,i[f].isImage=/image./.test(d[f].type);s.callback(i)},complete:function(){s.uploadForm[0].reset(),setTimeout(C.remove,100,o)}}),!1}),s.uploadForm.submit()},g}.apply(p,y),m!==void 0&&(u.exports=m)}}]);
