"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6574],{6574:(h,v,d)=>{var u,i;u=[d(91749),d(52473),d(49897),d(29930)],i=function(r,b,g,f){const c={};let e,n,a;c.showFlagModal=function(t){app.parseAndTranslate("modals/flag",t,function(o){e=o,e.on("hidden.bs.modal",function(){e.remove()}),n=e.find("#flag-post-commit"),a=e.find("#flag-reason-custom"),e.on("click",'input[name="flag-reason"]',function(){$(this).attr("id")==="flag-reason-other"?(a.removeAttr("disabled"),a.val().length||n.attr("disabled",!0)):(a.attr("disabled",!0),n.removeAttr("disabled"))}),n.on("click",function(){const l=$('input[name="flag-reason"]:checked');let s=l.val();l.attr("id")==="flag-reason-other"&&(s=a.val()),A(t.type,t.id,s)}),e.on("click","#flag-reason-other",function(){a.focus()}),e.modal("show"),r.fire("action:flag.showModal",{modalEl:e,type:t.type,id:t.id}),e.find("#flag-reason-custom").on("keyup blur change",E)})},c.resolve=function(t){g.put(`/flags/${t}`,{state:"resolved"}).then(()=>{f.success("[[flags:resolved]]"),r.fire("action:flag.resolved",{flagId:t})}).catch(f.error)};function A(t,o,l){if(!t||!o||!l)return;const s={type:t,id:o,reason:l};g.post("/flags",s,function(m,C){if(m)return f.error(m);if(e.modal("hide"),f.success("[[flags:modal-submit-success]]"),t==="post"){const p=b.get("post","pid",o);p.find('[component="post/flag"]').addClass("hidden").parent().attr("hidden",""),p.find('[component="post/already-flagged"]').removeClass("hidden").parent().attr("hidden",null)}r.fire("action:flag.create",{flagId:C,data:s})})}function E(){e.find("#flag-reason-custom").val()?n.removeAttr("disabled"):n.attr("disabled",!0)}return c}.apply(v,u),i!==void 0&&(h.exports=i)}}]);
