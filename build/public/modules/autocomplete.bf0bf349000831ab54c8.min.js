"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[13417,99127,34271,1091,49897,34405],{49897:(O,g,l)=>{l.r(g),l.d(g,{del:()=>u,get:()=>i,head:()=>a,patch:()=>c,post:()=>o,put:()=>r});var m=l(91749),y=l.n(m),p=l(40027),E=l.n(p);const s=config.relative_path+"/api/v3";async function d(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:s+t.url,typeof n=="function"){_(t).then(e=>n(null,e),e=>n(e));return}try{return await _(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,p.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go("login")});throw e}}async function _(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,m.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:h}=e,v=h.get("content-type"),x=v&&v.startsWith("application/json");let f;if(t.method!=="head"&&(x?f=await e.json():f=await e.text()),!e.ok)throw f?new Error(x?f.status.message:f):new Error(e.statusText);return x&&f&&f.hasOwnProperty("status")&&f.hasOwnProperty("response")?f.response:f}function i(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function a(t,n,e){return d({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},e)}function o(t,n,e){return d({url:t,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function c(t,n,e){return d({url:t,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function r(t,n,e){return d({url:t,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function u(t,n,e){return d({url:t,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}},34405:(O,g,l)=>{var m,y;m=[l(49897),l(29930)],y=function(p,E){const s={},d={delay:200,appendTo:null};s.init=i=>{const a={...d,...i},{input:o,onSelect:c}=a;app.loadJQueryUI(function(){o.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(r,u){_(o,c,r,u)}})})},s.user=function(i,a,o){typeof a=="function"&&(o=a,a={}),a=a||{},s.init({input:i,onSelect:o,source:(c,r)=>{a.query=c.term,p.get("/api/users",a,function(u,t){if(u)return E.error(u);if(t&&t.users){const n=t.users.map(function(e){const h=$("<div></div>").html(e.username).text();return e&&{label:h,value:h,user:{uid:e.uid,name:e.username,slug:e.userslug,username:e.username,userslug:e.userslug,picture:e.picture,banned:e.banned,"icon:text":e["icon:text"],"icon:bgColor":e["icon:bgColor"]}}});r(n)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},s.group=function(i,a){s.init({input:i,onSelect:a,source:(o,c)=>{socket.emit("groups.search",{query:o.term},function(r,u){if(r)return E.error(r);if(u&&u.length){const t=u.map(function(n){return n&&{label:n.name,value:n.name,group:n}});c(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},s.tag=function(i,a){s.init({input:i,onSelect:a,delay:100,source:(o,c)=>{socket.emit("topics.autocompleteTags",{query:o.term,cid:ajaxify.data.cid||0},function(r,u){if(r)return E.error(r);u&&c(u),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function _(i,a,o,c){a=a||function(){};const r=jQuery.Event("keypress");r.which=13,r.keyCode=13,setTimeout(function(){i.trigger(r)},100),a(o,c)}return s}.apply(g,m),y!==void 0&&(O.exports=y)}}]);
