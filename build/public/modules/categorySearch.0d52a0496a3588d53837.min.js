"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[69185,99127,34271,1091,49897],{49897:(v,h,c)=>{c.r(h),c.d(h,{del:()=>w,get:()=>r,head:()=>l,patch:()=>a,post:()=>p,put:()=>m});var u=c(91749),g=c.n(u),y=c(40027),x=c.n(y);const C=config.relative_path+"/api/v3";async function d(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:C+e.url,typeof n=="function"){i(e).then(t=>n(null,t),t=>n(t));return}try{return await i(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again.")return(0,y.confirm)("[[error:api.reauth-required]]",s=>{s&&ajaxify.go("login")});throw t}}async function i(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,u.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:s}=t,f=s.get("content-type"),E=f&&f.startsWith("application/json");let o;if(e.method!=="head"&&(E?o=await t.json():o=await t.text()),!t.ok)throw o?new Error(E?o.status.message:o):new Error(t.statusText);return E&&o&&o.hasOwnProperty("status")&&o.hasOwnProperty("response")?o.response:o}function r(e,n,t){return d({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function l(e,n,t){return d({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},t)}function p(e,n,t){return d({url:e,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function a(e,n,t){return d({url:e,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function m(e,n,t){return d({url:e,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function w(e,n,t){return d({url:e,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}},96349:(v,h,c)=>{var u,g;u=[c(29930),c(89336),c(49897)],g=function(y,x,C){const d={};return d.init=function(i,r){let l=null;r=r||{},r.privilege=r.privilege||"topics:read",r.states=r.states||["watching","tracking","notwatching","ignoring"],r.cacheList=r.hasOwnProperty("cacheList")?r.cacheList:!0;let p=[];Array.isArray(r.localCategories)&&(p=r.localCategories.map(n=>({...n}))),r.selectedCids=r.selectedCids||ajaxify.data.selectedCids||[];const a=i.find('[component="category-selector-search"]');if(!a.length)return;const m=a.parent('[component="category/dropdown"]').length>0||a.parent('[component="category-selector"]').length>0;i.on("show.bs.dropdown",function(){m&&(i.find(".dropdown-toggle").css({visibility:"hidden"}),a.removeClass("hidden"),a.css({"z-index":i.find(".dropdown-toggle").css("z-index")+1}));function n(){const t=a.find("input").val();t.length>1||!t&&!l?w(t,function(s){l=r.cacheList&&(l||s),e(s)}):!t&&l&&e(l)}a.on("click",function(t){t.preventDefault(),t.stopPropagation()}),a.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),i.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||a.find("input").focus()}),i.on("hide.bs.dropdown",function(){m&&(i.find(".dropdown-toggle").css({visibility:"inherit"}),a.addClass("hidden")),a.off("click"),a.find("input").off("keyup")});function w(n,t){C.get("/search/categories",{search:n,query:utils.params(),parentCid:r.parentCid||0,selectedCids:r.selectedCids,privilege:r.privilege,states:r.states,showLinks:r.showLinks},function(s,{categories:f}){if(s)return y.error(s);t(p.concat(f))})}function e(n){const t=r.selectedCids.map(String);n.forEach(function(s){s.selected=t.includes(String(s.cid))}),app.parseAndTranslate(r.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(s){i.find('[component="category/list"]').html(s.find('[component="category/list"]').html()),i.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length);const f=x.Dropdown.getInstance(i.find(".dropdown-toggle").get(0));f&&f.update()})}},d}.apply(h,u),g!==void 0&&(v.exports=g)}}]);
