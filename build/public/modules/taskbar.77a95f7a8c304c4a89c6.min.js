"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[33069],{14063:(r,b,u)=>{r=u.nmd(r);var f,c;f=[u(17459),u(91749)],c=function(p,d){const a={};let e=!1;a.init=function(){if(a.taskbar=$('[component="taskbar"]'),a.tasklist=a.taskbar.find("ul"),!a.taskbar.length||!a.tasklist.length){e=!0;return}a.taskbar.on("click","li",async function(){const t=$(this),i=t.attr("data-module"),s=t.attr("data-uuid"),n=await app.require(i);return t.hasClass("active")?n.minimize(s):(k(),n.load(s),a.toggleNew(s,!1),a.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){a.closeAll()})},a.close=async function(t,i){if(e)return;if(a.tasklist.find('[data-module="'+r+'"][data-uuid="'+i+'"]').length){const n=await app.require(t);n&&typeof n.close=="function"&&n.close(i)}},a.closeAll=function(t){if(e)return;let i="[data-uuid]";t&&(i='[data-module="'+t+'"]'+i),a.tasklist.find(i).each(function(s,n){a.close(t||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},a.discard=function(t,i){if(e)return;a.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]').remove(),m()},a.push=function(t,i,s,n){if(n=n||function(){},e)return n();const o=a.tasklist.find('li[data-uuid="'+i+'"]'),l={module:t,uuid:i,options:s,element:o};d.fire("filter:taskbar.push",l),!o.length&&l.module?g(l,n):n(o)},a.get=function(t){return e?[]:$('[data-module="'+t+'"]').map(function(s,n){return $(n).data()})},a.minimize=function(t,i){if(e)return;a.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]').toggleClass("active",!1)},a.toggleNew=function(t,i,s){if(e)return;a.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",i),s||d.fire("action:taskbar.toggleNew",t)},a.updateActive=function(t){if(e)return;const i=a.tasklist.find("li");i.removeClass("active"),i.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},a.isActive=function(t){return e?!1:a.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function m(){if(e)return;a.tasklist.find("li").length>0?a.taskbar.attr("data-active","1"):a.taskbar.removeAttr("data-active")}function k(){e||a.tasklist.find(".active").removeClass("active")}function g(t,i){if(e)return i();p.translate(t.options.title,function(s){const n=$("<div></div>").text(s||"NodeBB Task").html(),o=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&k(),a.tasklist.append(o),m(),t.element=o,o.data(t),d.fire("action:taskbar.pushed",t),i(o)})}const h=function(t,i,s){switch(i){case"title":t.find('[component="taskbar/title"]').text(s);break;case"icon":t.find("i").attr("class","fa fa-"+s);break;case"image":t.find("a").css("background-image",s?'url("'+s.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",s);break;case"color":t.find("a").css("color",s);break}};return a.update=function(t,i,s){if(e)return;const n=a.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]');if(!n.length)return;const o=n.data();Object.keys(s).forEach(function(l){o[l]=s[l],h(n,l,s[l])}),n.data(o)},a}.apply(b,f),c!==void 0&&(r.exports=c)}}]);
