"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[42289,99127,34271,1091,49897],{28061:(x,y,r)=>{var i,b;i=[r(81335),r(49897),r(40027),r(29930)],b=function(h,d,E,o){const c={};return c.banAccount=function(a,l){a=a||ajaxify.data.theirid,h.render("modals/temporary-ban",{}).then(function(m){E.dialog({className:"ban-modal",title:"[[user:ban-account]]",message:m,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[user:ban-account]]",callback:function(){const u=$(".ban-modal form").serializeArray().reduce(function(f,t){return f[t.name]=t.value,f},{}),g=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;d.put("/users/"+a+"/ban",{until:g,reason:u.reason||""}).then(()=>{if(typeof l=="function")return l();ajaxify.refresh()}).catch(o.error)}}}})})},c.unbanAccount=function(a){d.del("/users/"+a+"/ban").then(()=>{ajaxify.refresh()}).catch(o.error)},c.muteAccount=function(a,l){a=a||ajaxify.data.theirid,h.render("modals/temporary-mute",{}).then(function(m){E.dialog({className:"mute-modal",title:"[[user:mute-account]]",message:m,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[user:mute-account]]",callback:function(){const u=$(".mute-modal form").serializeArray().reduce(function(f,t){return f[t.name]=t.value,f},{}),g=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;d.put("/users/"+a+"/mute",{until:g,reason:u.reason||""}).then(()=>{if(typeof l=="function")return l();ajaxify.refresh()}).catch(o.error)}}}})})},c.unmuteAccount=function(a){d.del("/users/"+a+"/mute").then(()=>{ajaxify.refresh()}).catch(o.error)},c}.apply(y,i),b!==void 0&&(x.exports=b)},49897:(x,y,r)=>{r.r(y),r.d(y,{del:()=>f,get:()=>a,head:()=>l,patch:()=>u,post:()=>m,put:()=>g});var i=r(91749),b=r.n(i),h=r(40027),d=r.n(h);const E=config.relative_path+"/api/v3";async function o(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:E+t.url,typeof n=="function"){c(t).then(e=>n(null,e),e=>n(e));return}try{return await c(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,h.confirm)("[[error:api.reauth-required]]",A=>{A&&ajaxify.go("login")});throw e}}async function c(t){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,i.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(n,t),{headers:A}=e,O=A.get("content-type"),D=O&&O.startsWith("application/json");let s;if(t.method!=="head"&&(D?s=await e.json():s=await e.text()),!e.ok)throw s?new Error(D?s.status.message:s):new Error(e.statusText);return D&&s&&s.hasOwnProperty("status")&&s.hasOwnProperty("response")?s.response:s}function a(t,n,e){return o({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},e)}function l(t,n,e){return o({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},e)}function m(t,n,e){return o({url:t,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function u(t,n,e){return o({url:t,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function g(t,n,e){return o({url:t,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}function f(t,n,e){return o({url:t,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
