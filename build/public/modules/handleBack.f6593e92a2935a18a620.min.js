"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[37418],{60644:(g,h,n)=>{var s,l;s=[n(52473),n(68636),n(96352),n(25967)],l=function(f,c,m,k){const a={};let p;a.init=function(i){p=i,u(),$(window).off("action:popstate",r).on("action:popstate",r)},a.onBackClicked=r;function u(){$('[component="category"]').on("click",'[component="topic/header"]',function(){const i=$(this).parents("[data-index]").attr("data-index"),e=$(window).scrollTop();$('[component="category/topic"]').each(function(t,o){if($(o).offset().top-e>0)return c.setItem("category:bookmark",$(o).attr("data-index")),c.setItem("category:bookmark:clicked",i),c.setItem("category:bookmark:offset",$(o).offset().top-e),!1})})}function r(i){const e=i&&ajaxify.data.template.unread;if(ajaxify.data.template.category||ajaxify.data.template.recent||ajaxify.data.template.popular||e){let t=c.getItem("category:bookmark"),o=c.getItem("category:bookmark:clicked");if(c.removeItem("category:bookmark"),c.removeItem("category:bookmark:clicked"),!utils.isNumber(t))return;if(t=Math.max(0,parseInt(t,10)||0),o=Math.max(0,parseInt(o,10)||0),config.usePagination){const d=Math.ceil((parseInt(t,10)+1)/config.topicsPerPage);parseInt(d,10)!==ajaxify.data.pagination.currentPage?k.loadPage(d,function(){a.scrollToTopic(t,o)}):a.scrollToTopic(t,o)}else{if(t===0){a.scrollToTopic(t,o);return}$('[component="category"]').empty(),p(Math.max(0,t-1)+1,function(){a.scrollToTopic(t,o)})}}}return a.highlightTopic=function(i){const e=f.get("category/topic","index",i);e.length&&!e.hasClass("highlight")&&(e.addClass("highlight"),setTimeout(function(){e.removeClass("highlight")},5e3))},a.scrollToTopic=function(i,e){if(!utils.isNumber(i))return;const t=f.get("category/topic","index",i);if(t.length){const o=c.getItem("category:bookmark:offset");c.removeItem("category:bookmark:offset"),$(window).scrollTop(t.offset().top-o),a.highlightTopic(e),m.update()}},a}.apply(h,s),l!==void 0&&(g.exports=l)}}]);
