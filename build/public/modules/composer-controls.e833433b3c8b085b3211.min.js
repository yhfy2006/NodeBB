(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[86706,6232],{26940:(d,x,f)=>{d.exports=f(94510)},89596:(d,x,f)=>{d.exports=f(62590)},94510:(d,x,f)=>{"use strict";var _,g;_=[f(89596)],g=function(h){var i={};return i.insertIntoTextarea=function(t,n){var e={context:this,textarea:t,value:n,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",e),!e.preventDefault){var r=$(e.textarea),a=r.val(),c=r.parents('[component="composer"]');r.val(a.slice(0,e.textarea.selectionStart)+e.value+a.slice(e.textarea.selectionStart)),h.render(c)}},i.replaceSelectionInTextareaWith=function(t,n){var e={context:this,textarea:t,value:n,preventDefault:!1};if($(window).trigger("action:composer.replaceSelectionInTextareaWith",e),!e.preventDefault){var r=$(e.textarea),a=r.val(),c=r.parents('[component="composer"]');r.val(a.slice(0,e.textarea.selectionStart)+e.value+a.slice(e.textarea.selectionEnd)),h.render(c)}},i.wrapSelectionInTextareaWith=function(t,n,e){var r={context:this,textarea:t,leading:n,trailing:e,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",r),!r.preventDefault){e===void 0&&(e=n);var a=$(t),c=a.val(),s=/^(\s*)([\s\S]*?)(\s*)$/.exec(c.slice(t.selectionStart,t.selectionEnd));return s[2]||(s=[null,"",c.slice(t.selectionStart,t.selectionEnd),""]),a.val(c.slice(0,t.selectionStart)+s[1]+n+s[2]+e+s[3]+c.slice(t.selectionEnd)),[s[1].length,s[3].length]}},i.updateTextareaSelection=function(t,n,e){var r={context:this,textarea:t,start:n,end:e,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",r),!r.preventDefault&&(t.setSelectionRange(r.start,r.end),$(r.textarea).focus())},i.getBlockData=function(t,n,e){var r=t.value;n=n.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var a=new RegExp(n,"g"),c,s=[],v;for(r=r.split(`
`).reduce(function(l,u){return l!==null||(l=e<=u.length?u:null,l===null&&(e-=u.length+1)),l},null);(c=a.exec(r))!==null;)s.push(c.index);return v={in:!!(s.reduce(function(l,u){return e>=u+2&&(l+=1),l},0)%2),atEnd:s.reduce(function(l,u){return l||e===u},!1)},v.atEnd=v.in?v.atEnd:!1,v},i}.apply(x,_),g!==void 0&&(d.exports=g)},62590:(d,x,f)=>{"use strict";var _,g;_=[f(91749)],g=function(h){var i={};return i.render=function(t,n){if(n=n||function(){},!t.find(".preview-container").is(":visible"))return n();var e=t.find("textarea");socket.emit("plugins.composer.renderPreview",e.val(),function(r,a){r||(a=$("<div>"+a+"</div>"),a.find("img:not(.not-responsive)").addClass("img-fluid"),t.find(".preview").html(a),h.fire("action:composer.preview",{postContainer:t,preview:a}),n())})},i.matchScroll=function(t){if(t.find(".preview-container").is(":visible")){var n=t.find("textarea"),e=t.find(".preview");if(n.length&&e.length){var r=n[0].scrollHeight-n.height();if(r===0)return;var a=n.scrollTop()/r;e.scrollTop(Math.max(e[0].scrollHeight-e.height(),0)*a)}}},i.handleToggler=function(t){const n=t.get(0);i.env=utils.findBootstrapEnvironment();const e=["xs","sm"].includes(i.env),r=n.querySelector('.formatting-bar [data-action="preview"]'),a=r.querySelector(".show-text"),c=r.querySelector(".hide-text"),s=localStorage.getItem("composer:previewToggled"),v=config["composer-default"].hidePreviewOnOpen==="on";let l=!e&&(s===null&&!v||s==="true");const u=n.querySelector(".preview-container"),p=n.querySelector(".write-container");if(!r)return;function w(o){e?(u.classList.toggle("hide",!1),p.classList.toggle("maximized",!1),u.classList.toggle("d-none",!o),u.classList.toggle("d-flex",o),u.classList.toggle("w-100",o),p.classList.toggle("d-flex",!o),p.classList.toggle("d-none",o),p.classList.toggle("w-100",!o)):(u.classList.toggle("hide",!o),p.classList.toggle("w-50",o),p.classList.toggle("w-100",!o),localStorage.setItem("composer:previewToggled",o)),a.classList.toggle("hide",o),c.classList.toggle("hide",!o),o&&i.render(t),i.matchScroll(t)}i.toggle=w,r.addEventListener("click",o=>{o.button===0&&(l=!l,w(l))}),w(l)},i}.apply(x,_),g!==void 0&&(d.exports=g)}}]);
