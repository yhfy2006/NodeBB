(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[74953],{46243:(A,w,h)=>{A.exports=h(69627)},69627:function(A,w,h){var P,R,D=this&&this.__awaiter||function(E,c,e,d){function u(t){return t instanceof e?t:new e(function(v){v(t)})}return new(e||(e=Promise))(function(t,v){function a(r){try{n(d.next(r))}catch(o){v(o)}}function y(r){try{n(d.throw(r))}catch(o){v(o)}}function n(r){r.done?t(r.value):u(r.value).then(a,y)}n((d=d.apply(E,c||[])).next())})},B=this&&this.__generator||function(E,c){var e={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},d,u,t,v;return v={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function a(n){return function(r){return y([n,r])}}function y(n){if(d)throw new TypeError("Generator is already executing.");for(;v&&(v=0,n[0]&&(e=0)),e;)try{if(d=1,u&&(t=n[0]&2?u.return:n[0]?u.throw||((t=u.return)&&t.call(u),0):u.next)&&!(t=t.call(u,n[1])).done)return t;switch(u=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,u=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(t=e.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){e.label=n[1];break}if(n[0]===6&&e.label<t[1]){e.label=t[1],t=n;break}if(t&&e.label<t[2]){e.label=t[2],e.ops.push(n);break}t[2]&&e.ops.pop(),e.trys.pop();continue}n=c.call(E,e)}catch(r){n=[6,r],u=0}finally{d=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};P=[h,w],R=function(E,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.init=c.strategy=c.search=c.table=c.buildEmoji=c.buster=c.base=void 0;var e="".concat(config.assetBaseUrl,"/plugins/nodebb-plugin-emoji");c.base=e;var d=config["cache-buster"];c.buster=d;function u(a,y){var n=":".concat(a.name,":"),r=y?" defer":"";return a.image?`<img
      `.concat(y?"data-":"",'src="').concat(e,"/emoji/").concat(a.pack,"/").concat(a.image,"?").concat(d,`"
      class="not-responsive emoji emoji-`).concat(a.pack," emoji--").concat(a.name," ").concat(r,`"
      title="`).concat(n,`"
      alt="`).concat(a.character,`"
    />`):`<span
    class="emoji-`.concat(a.pack," emoji--").concat(a.name,`"
    title="`).concat(n,`"
  ><span>`).concat(a.character,"</span></span>")}c.buildEmoji=u,c.strategy={match:/\B:([^\s\n:]+)$/,search:function(a,y){y((0,c.search)(a.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(a){return":".concat(a.name,": ")},template:function(a){return"".concat(u(a)," ").concat(a.name)},cache:!0};var t;function v(a){var y=this;return t=t||Promise.all([new Promise(function(n,r){h.e(30363).then(function(){var o=[h(89713)];n.apply(null,o)}.bind(this)).catch(r.bind(this))}),new Promise(function(n,r){h.e(95983).then(function(){var o=[h(30593)];n.apply(null,o)}.bind(this)).catch(r.bind(this))}),new Promise(function(n,r){Promise.all([h.e(23662),h.e(65285),h.e(88189)]).then(function(){var o=[h(449)];n.apply(null,o)}.bind(this)).catch(r.bind(this))}),$.getJSON("".concat(e,"/emoji/table.json?").concat(d))]).then(function(n){var r=n[0],o=n[1],g=n[2],M=n[3];c.table=M;var W=Object.keys(c.table).map(function(f){var s=c.table[f];return{name:f,aliases:s.aliases,keywords:s.keywords,character:s.character,image:s.image,pack:s.pack}});function C(f,s){for(var i=s.length,l=0;l<i;l+=1)if(r(f,s[l]))return s[l];return null}function k(f){function s(i,l){var b=l*(1+o(f,i));return i.startsWith(f)?b-2:b}return W.filter(function(i){if(r(f,i.name))return i.score=s(i.name,1),!0;var l=C(f,i.aliases);if(l)return i.score=s(l,3),!0;var b=C(f,i.keywords);return b?(i.score=s(b,7),!0):!1}).sort(function(i,l){return i.score-l.score}).sort(function(i,l){var b=+i.name.startsWith(f),m=+l.name.startsWith(f);return m-b})}c.search=k,g.addButtonDispatch("emoji-add-emoji",function(f,s,i,l){new Promise(function(b,m){h.e(86924).then(function(){var I=[h(86924)];b.apply(null,I)}.bind(this)).catch(m.bind(this))}).then(function(b){var m=b.toggleForInsert;return m(f,s,i,l)})})}).catch(function(n){return D(y,void 0,void 0,function(){var r,o;return B(this,function(g){switch(g.label){case 0:return r=Error("[[emoji:meta-load-failed]]"),console.error(r),[4,app.require("alerts")];case 1:throw o=g.sent(),o.error(r),n}})})}),a&&t.then(function(){return setTimeout(a,0)}),t}c.init=v}.apply(w,P),R!==void 0&&(A.exports=R)}}]);
