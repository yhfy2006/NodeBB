(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[46379,99127,34271,1091,92332,88189,6232,18732,87212,33069,62441,98463,49897,29567,49775,11484,23346],{49897:(E,w,c)=>{"use strict";c.r(w),c.d(w,{del:()=>i,get:()=>l,head:()=>u,patch:()=>t,post:()=>f,put:()=>e});var v=c(91749),h=c.n(v),g=c(40027),d=c.n(g);const n=config.relative_path+"/api/v3";async function a(o,r){if(o.url=o.url.startsWith("/api")?config.relative_path+o.url:n+o.url,typeof r=="function"){m(o).then(s=>r(null,s),s=>r(s));return}try{return await m(o)}catch(s){if(s.message==="A valid login session was not found. Please log in and try again.")return(0,g.confirm)("[[error:api.reauth-required]]",b=>{b&&ajaxify.go("login")});throw s}}async function m(o){const{url:r}=o;delete o.url,o.data&&!(o.data instanceof FormData)&&(o.data=JSON.stringify(o.data||{}),o.headers["content-type"]="application/json; charset=utf-8"),{options:o}=await(0,v.fire)("filter:api.options",{options:o}),o.data&&(o.body=o.data,delete o.data);const s=await fetch(r,o),{headers:b}=s,S=b.get("content-type"),F=S&&S.startsWith("application/json");let p;if(o.method!=="head"&&(F?p=await s.json():p=await s.text()),!s.ok)throw p?new Error(F?p.status.message:p):new Error(s.statusText);return F&&p&&p.hasOwnProperty("status")&&p.hasOwnProperty("response")?p.response:p}function l(o,r,s){return a({url:o+(r&&Object.keys(r).length?"?"+$.param(r):"")},s)}function u(o,r,s){return a({url:o+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"head"},s)}function f(o,r,s){return a({url:o,method:"post",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function t(o,r,s){return a({url:o,method:"patch",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function e(o,r,s){return a({url:o,method:"put",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}function i(o,r,s){return a({url:o,method:"delete",data:r,headers:{"x-csrf-token":config.csrf_token}},s)}},74566:(E,w,c)=>{E.exports=c(12236)},449:(E,w,c)=>{E.exports=c(91943)},89596:(E,w,c)=>{E.exports=c(62590)},99594:(E,w,c)=>{E.exports=c(57904)},68636:(E,w,c)=>{"use strict";var v;v=function(){function h(){this._store={},this._keys=[]}h.prototype.isMock=!0,h.prototype.setItem=function(n,a){n=String(n),this._keys.indexOf(n)===-1&&this._keys.push(n),this._store[n]=a},h.prototype.getItem=function(n){return n=String(n),this._keys.indexOf(n)===-1?null:this._store[n]},h.prototype.removeItem=function(n){n=String(n),this._keys=this._keys.filter(function(a){return a!==n}),this._store[n]=null},h.prototype.clear=function(){this._keys=[],this._store={}},h.prototype.key=function(n){return n=parseInt(n,10)||0,this._keys[n]},Object.defineProperty&&Object.defineProperty(h.prototype,"length",{get:function(){return this._keys.length}});let g;const d=Date.now().toString();try{if(g=window.localStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("localStorage behaved unexpectedly");return g.removeItem(d),g}catch(n){console.warn(n),console.warn("localStorage failed, falling back on sessionStorage");try{if(g=window.sessionStorage,g.setItem(d,d),g.getItem(d)!==d)throw Error("sessionStorage behaved unexpectedly");return g.removeItem(d),g}catch(a){return console.warn(a),console.warn("sessionStorage failed, falling back on memory storage"),new h}}}.call(w,c,w,E),v!==void 0&&(E.exports=v)},14063:(E,w,c)=>{"use strict";E=c.nmd(E);var v,h;v=[c(17459),c(91749)],h=function(g,d){const n={};let a=!1;n.init=function(){if(n.taskbar=$('[component="taskbar"]'),n.tasklist=n.taskbar.find("ul"),!n.taskbar.length||!n.tasklist.length){a=!0;return}n.taskbar.on("click","li",async function(){const t=$(this),e=t.attr("data-module"),i=t.attr("data-uuid"),o=await app.require(e);return t.hasClass("active")?o.minimize(i):(l(),o.load(i),n.toggleNew(i,!1),n.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){n.closeAll()})},n.close=async function(t,e){if(a)return;if(n.tasklist.find('[data-module="'+E+'"][data-uuid="'+e+'"]').length){const o=await app.require(t);o&&typeof o.close=="function"&&o.close(e)}},n.closeAll=function(t){if(a)return;let e="[data-uuid]";t&&(e='[data-module="'+t+'"]'+e),n.tasklist.find(e).each(function(i,o){n.close(t||o.getAttribute("data-module"),o.getAttribute("data-uuid"))})},n.discard=function(t,e){if(a)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').remove(),m()},n.push=function(t,e,i,o){if(o=o||function(){},a)return o();const r=n.tasklist.find('li[data-uuid="'+e+'"]'),s={module:t,uuid:e,options:i,element:r};d.fire("filter:taskbar.push",s),!r.length&&s.module?u(s,o):o(r)},n.get=function(t){return a?[]:$('[data-module="'+t+'"]').map(function(i,o){return $(o).data()})},n.minimize=function(t,e){if(a)return;n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]').toggleClass("active",!1)},n.toggleNew=function(t,e,i){if(a)return;n.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",e),i||d.fire("action:taskbar.toggleNew",t)},n.updateActive=function(t){if(a)return;const e=n.tasklist.find("li");e.removeClass("active"),e.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},n.isActive=function(t){return a?!1:n.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function m(){if(a)return;n.tasklist.find("li").length>0?n.taskbar.attr("data-active","1"):n.taskbar.removeAttr("data-active")}function l(){a||n.tasklist.find(".active").removeClass("active")}function u(t,e){if(a)return e();g.translate(t.options.title,function(i){const o=$("<div></div>").text(i||"NodeBB Task").html(),r=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+o+'" component="taskbar/title">'+o+"</span></a>").attr({title:o,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&l(),n.tasklist.append(r),m(),t.element=r,r.data(t),d.fire("action:taskbar.pushed",t),e(r)})}const f=function(t,e,i){switch(e){case"title":t.find('[component="taskbar/title"]').text(i);break;case"icon":t.find("i").attr("class","fa fa-"+i);break;case"image":t.find("a").css("background-image",i?'url("'+i.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",i);break;case"color":t.find("a").css("color",i);break}};return n.update=function(t,e,i){if(a)return;const o=n.tasklist.find('[data-module="'+t+'"][data-uuid="'+e+'"]');if(!o.length)return;const r=o.data();Object.keys(i).forEach(function(s){r[s]=i[s],f(o,s,i[s])}),o.data(r)},n}.apply(w,v),h!==void 0&&(E.exports=h)},36159:(E,w,c)=>{"use strict";var v,h;v=[c(49897),c(40027),c(29930),c(24187),c(81335),c(17459),c(65285)],h=function(g,d,n,a,m,l){const u={};return u.get=f=>g.get(`/topics/${f}/thumbs`,{}),u.getByPid=f=>g.get(`/posts/${f}`,{}).then(t=>u.get(t.tid)),u.delete=(f,t)=>g.del(`/topics/${f}/thumbs`,{path:t}),u.deleteAll=f=>{u.get(f).then(t=>{Promise.all(t.map(e=>u.delete(f,e.url)))})},u.upload=f=>new Promise(t=>{a.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+`/api/v3/topics/${f}/thumbs`},function(e){t(e)})}),u.modal={},u.modal.open=function(f){const{id:t,pid:e}=f;let{modal:i}=f,o;return new Promise(r=>{Promise.all([u.get(t),e?u.getByPid(e):[]]).then(s=>new Promise(b=>{const S=s.reduce((F,p)=>F.concat(p));o=S.length,b(S)})).then(s=>m.render("modals/topic-thumbs",{thumbs:s})).then(s=>{i?l.translate(s,function(b){i.find(".bootbox-body").html(b),u.modal.handleSort({modal:i,numThumbs:o})}):(i=d.dialog({title:"[[modules:thumbs.modal.title]]",message:s,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(u.upload(t).then(()=>{u.modal.open({...f,modal:i}),Promise.all([c.e(54516),c.e(99166),c.e(47061),c.e(49775)]).then(function(){var b=[c(71431)];(S=>{S.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),r()}).apply(null,b)}).catch(c.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),u.modal.handleDelete({...f,modal:i}),u.modal.handleSort({modal:i,numThumbs:o}))})})},u.modal.handleDelete=f=>{f.modal.get(0).addEventListener("click",e=>{e.target.closest('button[data-action="remove"]')&&d.confirm("[[modules:thumbs.modal.confirm-remove]]",i=>{if(!i)return;const o=e.target.closest("[data-id]").getAttribute("data-id"),r=e.target.closest("[data-path]").getAttribute("data-path");g.del(`/topics/${o}/thumbs`,{path:r}).then(()=>{u.modal.open(f)}).catch(n.error)})})},u.modal.handleSort=({modal:f,numThumbs:t})=>{if(t>1){const e=f.find(".topic-thumbs-modal");e.sortable({items:"[data-id]"}),e.on("sortupdate",u.modal.handleSortChange)}},u.modal.handleSortChange=(f,t)=>{const e=t.item.get(0).parentNode.querySelectorAll("[data-id]");Array.from(e).forEach((i,o)=>{const r=i.getAttribute("data-id");let s=i.getAttribute("data-path");s=s.replace(new RegExp(`^${config.upload_url}`),""),g.put(`/topics/${r}/thumbs/order`,{path:s,order:o}).catch(n.error)})},u}.apply(w,v),h!==void 0&&(E.exports=h)},24187:(E,w,c)=>{"use strict";var v,h;v=[c(64061)],h=function(){const g={};g.show=function(l,u){const f=l.hasOwnProperty("fileSize")&&l.fileSize!==void 0?parseInt(l.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:l.hasOwnProperty("showHelp")&&l.showHelp!==void 0?l.showHelp:!0,fileSize:f,title:l.title||"[[global:upload-file]]",description:l.description||"",button:l.button||"[[global:upload]]",accept:l.accept?l.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const e=t.find("#uploadForm");e.attr("action",l.route),e.find("#params").val(JSON.stringify(l.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),e.submit()}),e.submit(function(){return d(t,f,u),!1})})},g.hideAlerts=function(l){$(l).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function d(l,u,f){n(l,"status","[[uploads:uploading-file]]"),l.find("#upload-progress-bar").css("width","0%"),l.find("#upload-progress-box").show().removeClass("hide");const t=l.find("#fileInput");if(!t.val())return n(l,"error","[[uploads:select-file-to-upload]]");if(!m(t[0],u))return n(l,"error","[[error:file-too-big, "+u+"]]");g.ajaxSubmit(l,f)}function n(l,u,f){g.hideAlerts(l),u==="error"&&l.find("#fileUploadSubmitBtn").removeClass("disabled"),f=f.replace(/&amp;#44/g,"&#44"),l.find("#alert-"+u).translateText(f).removeClass("hide")}g.ajaxSubmit=function(l,u){l.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=a(t),n(l,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,e,i,o){l.find("#upload-progress-bar").css("width",o+"%")},success:function(t){let e=a(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(e=t.response.images),u(e[0].url),n(l,"success","[[uploads:upload-success]]"),setTimeout(function(){g.hideAlerts(l),l.modal("hide")},750)}})};function a(l){if(typeof l=="string")try{return JSON.parse(l)}catch{return{error:"[[error:parse-error]]"}}return l}function m(l,u){return window.FileReader&&u?l.files[0].size<=u*1e3:!0}return g}.apply(w,v),h!==void 0&&(E.exports=h)},12236:(E,w,c)=>{"use strict";var v,h;v=[c(49897),c(29930)],h=function(g,d){const n={};n.init=function(t,e){const i=t.find(".draft-icon"),o=t.attr("data-uuid");function r(){$(`[component="composer"][data-uuid="${o}"]`).length&&(e.save_id||(e.save_id=utils.generateSaveId(app.user.uid)),n.addToDraftList("available",e.save_id),n.addToDraftList("open",e.save_id),l(t,i,e))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(r,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(r,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(r,1e3)),t.on("itemAdded",".tags",utils.debounce(r,1e3)),t.on("thumb.uploaded",r),i.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const s=n.getList("open");s.length&&s.forEach(b=>n.removeFromDraftList("open",b))}),n.migrateGuest(),n.migrateThumbs(...arguments)};function m(t){return parseInt(t,10)>0?localStorage:sessionStorage}n.get=function(t){if(!t)return null;const e=t.split(":")[1],i=m(e);try{const o=i.getItem(t),r=JSON.parse(o)||null;if(!r)throw new Error(`can't parse draft json for ${t}`);return r.save_id=t,r.timestamp&&(r.timestampISO=utils.toISOString(r.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:r,storage:i}),r}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),n.removeFromDraftList("available"),n.removeFromDraftList("open"),null}};function l(t,e,i){if(f(app.user.uid?"localStorage":"sessionStorage")&&i&&i.save_id&&t.length){const o=t.find("input.title"),r=o&&o.length&&o.val(),s=t.find("textarea").val(),b=m(app.user.uid);if(s.length||r&&r.length){const S={save_id:i.save_id,action:i.action,text:s,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(i.action==="topics.post"){const F=t.find("input.tags").val();S.tags=F,S.title=r,S.cid=i.cid}else i.action==="posts.reply"?(S.title=i.title,S.tid=i.tid,S.toPid=i.toPid):i.action==="posts.edit"&&(S.pid=i.pid,S.title=r||i.title);app.user.uid||(S.handle=t.find("input.handle").val()),b.setItem(i.save_id,JSON.stringify(S)),$(window).trigger("action:composer.drafts.save",{storage:b,postData:i,postContainer:t}),e.toggleClass("active",!0)}else n.removeDraft(i.save_id)}}n.removeDraft=function(t){if(!t)return;n.removeFromDraftList("available",t),n.removeFromDraftList("open",t);const e=t.split(":")[1],i=m(e);i.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:i,save_id:t})},n.getList=function(t){try{const e=localStorage.getItem(`drafts:${t}`);return JSON.parse(e)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},n.addToDraftList=function(t,e){if(!f(app.user.uid?"localStorage":"sessionStorage")||!e)return;const i=n.getList(t);i.includes(e)||(i.push(e),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},n.removeFromDraftList=function(t,e){if(!f(app.user.uid?"localStorage":"sessionStorage")||!e)return;const i=n.getList(t);i.includes(e)&&(i.splice(i.indexOf(e),1),localStorage.setItem("drafts:"+t,JSON.stringify(i)))},n.migrateGuest=function(){if(f("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,e=Object.keys(sessionStorage).filter(function(r){return t.test(r)}),i=new Set([]),o=e.map(function(r){const s=r.split(":");return s[1]=app.user.uid,i.add(s.join(":")),s.join(":")});return e.forEach(function(r,s){localStorage.setItem(o[s],sessionStorage.getItem(r)),sessionStorage.removeItem(r)}),i.forEach(function(r){n.addToDraftList("available",r)}),i}},n.migrateThumbs=function(t,e){if(!app.uid)return;const i=t.attr("data-uuid"),o=n.get(e.save_id);o&&o.uuid&&g.put(`/topics/${o.uuid}/thumbs`,{tid:i}).then(()=>{Promise.all([c.e(23662),c.e(65285),c.e(54516),c.e(99166),c.e(47061),c.e(11484)]).then(function(){var r=[c(71431)];(function(s){s.updateThumbCount(i,t)}).apply(null,r)}).catch(c.oe)})},n.listAvailable=function(){return n.getList("available").map(n.get).filter(Boolean)},n.getAvailableCount=function(){return n.listAvailable().length},n.open=function(t){if(!t)return;const e=n.get(t);u(t,e)},n.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=n.getList("available"),e=n.getList("open");t.length&&t.forEach(function(i){if(!i||e.includes(i))return;const o=n.get(i);if(!o||!o.text&&!o.title){n.removeFromDraftList("available",i),n.removeFromDraftList("open",i);return}u(i,o)})};function u(t,e){const o=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(o,10)&&Promise.all([c.e(23662),c.e(65285),c.e(54516),c.e(99166),c.e(47061),c.e(11484)]).then(function(){var r=[c(71431)];(function(s){e.action==="topics.post"?s.newTopic({save_id:e.save_id,cid:e.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(e.handle),title:utils.escapeHTML(e.title),body:e.text,tags:String(e.tags||"").split(",")}):e.action==="posts.reply"?g.get("/topics/"+e.tid,{},function(b,S){if(b)return d.error(b);s.newReply({save_id:e.save_id,tid:e.tid,toPid:e.toPid,title:S.title,body:e.text})}):e.action==="posts.edit"&&s.editPost({save_id:e.save_id,pid:e.pid,title:e.title?utils.escapeHTML(e.title):void 0,body:e.text})}).apply(null,r)}).catch(c.oe)}function f(t){var e;try{e=window[t];var i="__storage_test__";return e.setItem(i,i),e.removeItem(i),!0}catch(o){return o instanceof DOMException&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}return n}.apply(w,v),h!==void 0&&(E.exports=h)},91943:(E,w,c)=>{"use strict";var v,h;v=[c(89596),c(99594),c(36159),c(51916)],h=function(g,d,n,a){var m={},l={picture:function(){var e=this;e.find("#files").attr("accept","image/*").click()},upload:function(){var e=this;e.find("#files").attr("accept","").click()},thumbs:function(){m.exitFullscreen();var e=this;Promise.all([c.e(54516),c.e(99166),c.e(47061),c.e(29567)]).then(function(){var i=[c(71431)];(function(o){const r=e.get(0).getAttribute("data-uuid"),s=o.posts[r];(s.action==="topics.post"||s.action==="posts.edit"&&s.isMain)&&n.modal.open({id:r,pid:s.pid}).then(()=>{e.trigger("thumb.uploaded"),o.updateThumbCount(r,e)})}).apply(null,i)}).catch(c.oe)},tags:function(){var e=this;e.find(".tags-container").toggleClass("hidden")},zen:function(){var e=this;$(window).one("resize",function(){function i(){a.isFullscreen||(app.toggleNavbar(!0),$("html").removeClass("zen-mode"),d.reposition(e),$(window).off("resize",i))}a.isFullscreen&&(app.toggleNavbar(!1),$("html").addClass("zen-mode"),e.find(".write").focus(),$(window).on("resize",i),$(window).one("action:composer.topics.post action:composer.posts.reply action:composer.posts.edit action:composer.discard",a.exit))}),a.toggle(e.get(0)),$(window).trigger("action:composer.fullscreen",{postContainer:e})}},u=[];m.exitFullscreen=function(){a.isEnabled&&a.isFullscreen&&a.exit()},m.addComposerButtons=function(){const e=$(".formatting-bar"),i=e.find(".formatting-group #fileForm");u.forEach(r=>{let s="";Array.isArray(r.dropdownItems)&&r.dropdownItems.length?s=t(r):s=`
					<li title="${r.title||""}">
						<button data-format="${r.name}" class="btn btn-sm btn-link text-reset position-relative" aria-label="${r.title||""}">
							<i class="${r.iconClass}"></i>
							${f(r)}
						</button>
					</li>
				`,i.before(s)}),e.find(".formatting-group>li").tooltip({container:"#content",animation:!1,trigger:"manual"}).on("mouseenter",function(r){const s=$(r.target);s.hasClass("dropdown-menu")||!!s.parents(".dropdown-menu").length||$(this).tooltip("show")}).on("click mouseleave",function(){$(this).tooltip("hide")})};function f(e){let i="";return e.badge&&(i='<span class="px-1 position-absolute top-0 start-100 translate-middle badge rounded text-bg-info"></span>'),i}function t(e){const i=e.dropdownItems.map(function(o){return`
				<li>
					<a href="#" data-format="${o.name}" class="dropdown-item rounded-1 position-relative" role="menuitem">
						<i class="${o.iconClass} text-secondary"></i> ${o.text}
						${f(o)}
					</a>
				</li>
			`});return`
			<li class="dropdown bottom-sheet" tab-index="-1" title="${e.title}">
				<button class="btn btn-sm btn-link text-reset" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-label="${e.title}">
					<i class="${e.iconClass}"></i>
				</button>
				<ul class="dropdown-menu p-1" role="menu">
				${i}
				</ul>
			</li>
		`}return m.addButton=function(e,i,o,r){r=r||e.replace("fa fa-",""),l[r]=i,u.push({name:r,iconClass:e,title:o})},m.addDropdown=function(e){u.push({iconClass:e.iconClass,title:e.title,dropdownItems:e.dropdownItems}),e.dropdownItems.forEach(i=>{i.name&&i.onClick&&(l[i.name]=i.onClick)})},m.getDispatchTable=function(){return l},m.addButtonDispatch=function(e,i){l[e]=i},m.addHandler=function(e){e.on("click",".formatting-bar [data-format]",function(i){var o=$(this).attr("data-format"),r=$(this).parents('[component="composer"]').find("textarea")[0];l.hasOwnProperty(o)&&(l[o].call(e,r,r.selectionStart,r.selectionEnd,i),g.render(e))})},m}.apply(w,v),h!==void 0&&(E.exports=h)},62590:(E,w,c)=>{"use strict";var v,h;v=[c(91749)],h=function(g){var d={};return d.render=function(n,a){if(a=a||function(){},!n.find(".preview-container").is(":visible"))return a();var m=n.find("textarea");socket.emit("plugins.composer.renderPreview",m.val(),function(l,u){l||(u=$("<div>"+u+"</div>"),u.find("img:not(.not-responsive)").addClass("img-fluid"),n.find(".preview").html(u),g.fire("action:composer.preview",{postContainer:n,preview:u}),a())})},d.matchScroll=function(n){if(n.find(".preview-container").is(":visible")){var a=n.find("textarea"),m=n.find(".preview");if(a.length&&m.length){var l=a[0].scrollHeight-a.height();if(l===0)return;var u=a.scrollTop()/l;m.scrollTop(Math.max(m[0].scrollHeight-m.height(),0)*u)}}},d.handleToggler=function(n){const a=n.get(0);d.env=utils.findBootstrapEnvironment();const m=["xs","sm"].includes(d.env),l=a.querySelector('.formatting-bar [data-action="preview"]'),u=l.querySelector(".show-text"),f=l.querySelector(".hide-text"),t=localStorage.getItem("composer:previewToggled"),e=config["composer-default"].hidePreviewOnOpen==="on";let i=!m&&(t===null&&!e||t==="true");const o=a.querySelector(".preview-container"),r=a.querySelector(".write-container");if(!l)return;function s(b){m?(o.classList.toggle("hide",!1),r.classList.toggle("maximized",!1),o.classList.toggle("d-none",!b),o.classList.toggle("d-flex",b),o.classList.toggle("w-100",b),r.classList.toggle("d-flex",!b),r.classList.toggle("d-none",b),r.classList.toggle("w-100",!b)):(o.classList.toggle("hide",!b),r.classList.toggle("w-50",b),r.classList.toggle("w-100",!b),localStorage.setItem("composer:previewToggled",b)),u.classList.toggle("hide",b),f.classList.toggle("hide",!b),b&&d.render(n),d.matchScroll(n)}d.toggle=s,l.addEventListener("click",b=>{b.button===0&&(i=!i,s(i))}),s(i)},d}.apply(w,v),h!==void 0&&(E.exports=h)},57904:(E,w,c)=>{"use strict";var v,h;v=[c(14063)],h=function(g){var d={},n=0,a=.3,m=.05,l=768,u=$("body"),f=$(window),t=$('[component="navbar"]');const e=document.getElementById("content");var i=t[0];function o(){return localStorage.getItem("composer:resizeRatio")||.5}function r(p){localStorage.setItem("composer:resizeRatio",Math.min(p,1))}function s(){var p;i?p=i.getBoundingClientRect():p={bottom:0};var A=Math.max(p.bottom,0),y={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return y.width=y.right,y.height=y.bottom,y.boundedTop=A,y.boundedHeight=y.bottom-A,y}function b(p,A){var y=s(),I=p[0],L=window.getComputedStyle(I),T=parseInt(L.getPropertyValue("min-height"),10),k=Math.max(T/window.innerHeight,a);if(y.width>=l){const z=(y.height-y.boundedHeight)/y.height;A=Math.min(Math.max(A,k+z),1);var O=A*y.boundedHeight/y.height;I.style.top=((1-O)*100).toString()+"%";var R=I.getBoundingClientRect();e.style.paddingBottom=(R.bottom-R.top).toString()+"px"}else I.style.top=0,e.style.paddingBottom=0;p.ratio=A,g.updateActive(p.attr("data-uuid"))}var S=b,F=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return F&&(S=function(p,A){F(function(){b(p,A),setTimeout(function(){f.trigger("action:composer.resize"),p.trigger("action:composer.resize")},0)})}),d.reposition=function(p){var A=o();A>=1-m&&(A=1,p.addClass("maximized")),S(p,A)},d.maximize=function(p,A){A?S(p,1):d.reposition(p)},d.handleResize=function(p){var A=0,y=0,I=0,L=p.find(".resizer"),T=L[0];function k(x){var C=T.getBoundingClientRect(),P=(C.top+C.bottom)/2;A=(P-x.clientY)/2,y=x.clientY,f.on("mousemove",O),f.on("mouseup",R),u.on("touchmove",z)}function O(x){var C=x.clientY-A,P=s(),D=(P.height-C)/P.boundedHeight;S(p,D)}function R(x){x.preventDefault(),I=x.clientY,p.find("textarea").focus(),f.off("mousemove",O),f.off("mouseup",R),u.off("touchmove",z);var C=I-A,P=s(),D=(P.height-C)/P.boundedHeight;I-y===0&&p.hasClass("maximized")?(p.removeClass("maximized"),D=!n||n>=1-m?.5:n,S(p,D)):I-y===0||D>=1-m?(S(p,1),p.addClass("maximized"),n=D):p.removeClass("maximized"),r(D)}function z(x){x.preventDefault(),O(x.touches[0])}L.on("mousedown",function(x){x.button===0&&(x.preventDefault(),k(x))}).on("touchstart",function(x){x.preventDefault(),k(x.touches[0])}).on("touchend",R)},d}.apply(w,v),h!==void 0&&(E.exports=h)},51916:E=>{/*!
* screenfull
* v5.2.0 - 2021-11-03
* (c) Sindre Sorhus; MIT License
*/(function(){"use strict";var w=typeof window<"u"&&typeof window.document<"u"?window.document:{},c=E.exports,v=function(){for(var d,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,m=n.length,l={};a<m;a++)if(d=n[a],d&&d[1]in w){for(a=0;a<d.length;a++)l[n[0][a]]=d[a];return l}return!1}(),h={change:v.fullscreenchange,error:v.fullscreenerror},g={request:function(d,n){return new Promise(function(a,m){var l=function(){this.off("change",l),a()}.bind(this);this.on("change",l),d=d||w.documentElement;var u=d[v.requestFullscreen](n);u instanceof Promise&&u.then(l).catch(m)}.bind(this))},exit:function(){return new Promise(function(d,n){if(!this.isFullscreen){d();return}var a=function(){this.off("change",a),d()}.bind(this);this.on("change",a);var m=w[v.exitFullscreen]();m instanceof Promise&&m.then(a).catch(n)}.bind(this))},toggle:function(d,n){return this.isFullscreen?this.exit():this.request(d,n)},onchange:function(d){this.on("change",d)},onerror:function(d){this.on("error",d)},on:function(d,n){var a=h[d];a&&w.addEventListener(a,n,!1)},off:function(d,n){var a=h[d];a&&w.removeEventListener(a,n,!1)},raw:v};if(!v){c?E.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(g,{isFullscreen:{get:function(){return!!w[v.fullscreenElement]}},element:{enumerable:!0,get:function(){return w[v.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!w[v.fullscreenEnabled]}}}),c?E.exports=g:window.screenfull=g})()}}]);
