"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[95737,99127,34271,1091,49897],{30637:(O,m,a)=>{var l,g;l=[a(49897),a(81335),a(40027),a(29930)],g=function(c,D,p,r){const i={};function u(){return ajaxify.data.template.name.startsWith("admin/")}return i.handle=function(){$('[component="user/invite"]').on("click",function(f){f.preventDefault(),c.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(d=>{D.parse("modals/invite",{groups:d},function(o){p.dialog({message:o,title:`[[${u()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${u()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${u()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:i.send}}})})}).catch(r.error)})},i.send=function(){const f=$("#invite-modal-emails"),d=$("#invite-modal-groups"),o={emails:f.val().split(",").map(h=>h.trim()).filter(Boolean).filter((h,v,e)=>v===e.indexOf(h)).join(","),groupsToJoin:d.val()};o.emails&&c.post(`/users/${app.user.uid}/invites`,o).then(()=>{r.success(`[[${u()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${o.emails.replace(/,/g,"&#44; ")}]]`)}).catch(r.error)},i}.apply(m,l),g!==void 0&&(O.exports=g)},49897:(O,m,a)=>{a.r(m),a.d(m,{del:()=>v,get:()=>u,head:()=>f,patch:()=>o,post:()=>d,put:()=>h});var l=a(91749),g=a.n(l),c=a(40027),D=a.n(c);const p=config.relative_path+"/api/v3";async function r(e,n){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:p+e.url,typeof n=="function"){i(e).then(t=>n(null,t),t=>n(t));return}try{return await i(e)}catch(t){if(t.message==="A valid login session was not found. Please log in and try again.")return(0,c.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go("login")});throw t}}async function i(e){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,l.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const t=await fetch(n,e),{headers:E}=t,P=E.get("content-type"),y=P&&P.startsWith("application/json");let s;if(e.method!=="head"&&(y?s=await t.json():s=await t.text()),!t.ok)throw s?new Error(y?s.status.message:s):new Error(t.statusText);return y&&s&&s.hasOwnProperty("status")&&s.hasOwnProperty("response")?s.response:s}function u(e,n,t){return r({url:e+(n&&Object.keys(n).length?"?"+$.param(n):"")},t)}function f(e,n,t){return r({url:e+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},t)}function d(e,n,t){return r({url:e,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function o(e,n,t){return r({url:e,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function h(e,n,t){return r({url:e,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}function v(e,n,t){return r({url:e,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},t)}}}]);
