"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[34271,99127,1091,49897],{49897:(k,f,a)=>{a.r(f),a.d(f,{del:()=>P,get:()=>g,head:()=>y,patch:()=>O,post:()=>E,put:()=>m});var c=a(91749),w=a.n(c),h=a(40027),_=a.n(h);const i=config.relative_path+"/api/v3";async function s(t,r){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:i+t.url,typeof r=="function"){l(t).then(e=>r(null,e),e=>r(e));return}try{return await l(t)}catch(e){if(e.message==="A valid login session was not found. Please log in and try again.")return(0,h.confirm)("[[error:api.reauth-required]]",u=>{u&&ajaxify.go("login")});throw e}}async function l(t){const{url:r}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,c.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const e=await fetch(r,t),{headers:u}=e,d=u.get("content-type"),o=d&&d.startsWith("application/json");let n;if(t.method!=="head"&&(o?n=await e.json():n=await e.text()),!e.ok)throw n?new Error(o?n.status.message:n):new Error(e.statusText);return o&&n&&n.hasOwnProperty("status")&&n.hasOwnProperty("response")?n.response:n}function g(t,r,e){return s({url:t+(r&&Object.keys(r).length?"?"+$.param(r):"")},e)}function y(t,r,e){return s({url:t+(r&&Object.keys(r).length?"?"+$.param(r):""),method:"head"},e)}function E(t,r,e){return s({url:t,method:"post",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function O(t,r,e){return s({url:t,method:"patch",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function m(t,r,e){return s({url:t,method:"put",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}function P(t,r,e){return s({url:t,method:"delete",data:r,headers:{"x-csrf-token":config.csrf_token}},e)}}}]);
