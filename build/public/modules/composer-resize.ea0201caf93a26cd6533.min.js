(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[18732,33069],{99594:(g,R,v)=>{g.exports=v(57904)},14063:(g,R,v)=>{"use strict";g=v.nmd(g);var _,h;_=[v(17459),v(91749)],h=function(I,f){const e={};let d=!1;e.init=function(){if(e.taskbar=$('[component="taskbar"]'),e.tasklist=e.taskbar.find("ul"),!e.taskbar.length||!e.tasklist.length){d=!0;return}e.taskbar.on("click","li",async function(){const t=$(this),i=t.attr("data-module"),a=t.attr("data-uuid"),n=await app.require(i);return t.hasClass("active")?n.minimize(a):(B(),n.load(a),e.toggleNew(a,!1),e.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){e.closeAll()})},e.close=async function(t,i){if(d)return;if(e.tasklist.find('[data-module="'+g+'"][data-uuid="'+i+'"]').length){const n=await app.require(t);n&&typeof n.close=="function"&&n.close(i)}},e.closeAll=function(t){if(d)return;let i="[data-uuid]";t&&(i='[data-module="'+t+'"]'+i),e.tasklist.find(i).each(function(a,n){e.close(t||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},e.discard=function(t,i){if(d)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]').remove(),w()},e.push=function(t,i,a,n){if(n=n||function(){},d)return n();const c=e.tasklist.find('li[data-uuid="'+i+'"]'),l={module:t,uuid:i,options:a,element:c};f.fire("filter:taskbar.push",l),!c.length&&l.module?C(l,n):n(c)},e.get=function(t){return d?[]:$('[data-module="'+t+'"]').map(function(a,n){return $(n).data()})},e.minimize=function(t,i){if(d)return;e.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]').toggleClass("active",!1)},e.toggleNew=function(t,i,a){if(d)return;e.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",i),a||f.fire("action:taskbar.toggleNew",t)},e.updateActive=function(t){if(d)return;const i=e.tasklist.find("li");i.removeClass("active"),i.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},e.isActive=function(t){return d?!1:e.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function w(){if(d)return;e.tasklist.find("li").length>0?e.taskbar.attr("data-active","1"):e.taskbar.removeAttr("data-active")}function B(){d||e.tasklist.find(".active").removeClass("active")}function C(t,i){if(d)return i();I.translate(t.options.title,function(a){const n=$("<div></div>").text(a||"NodeBB Task").html(),c=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&B(),e.tasklist.append(c),w(),t.element=c,c.data(t),f.fire("action:taskbar.pushed",t),i(c)})}const b=function(t,i,a){switch(i){case"title":t.find('[component="taskbar/title"]').text(a);break;case"icon":t.find("i").attr("class","fa fa-"+a);break;case"image":t.find("a").css("background-image",a?'url("'+a.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",a);break;case"color":t.find("a").css("color",a);break}};return e.update=function(t,i,a){if(d)return;const n=e.tasklist.find('[data-module="'+t+'"][data-uuid="'+i+'"]');if(!n.length)return;const c=n.data();Object.keys(a).forEach(function(l){c[l]=a[l],b(n,l,a[l])}),n.data(c)},e}.apply(R,_),h!==void 0&&(g.exports=h)},57904:(g,R,v)=>{"use strict";var _,h;_=[v(14063)],h=function(I){var f={},e=0,d=.3,w=.05,B=768,C=$("body"),b=$(window),t=$('[component="navbar"]');const i=document.getElementById("content");var a=t[0];function n(){return localStorage.getItem("composer:resizeRatio")||.5}function c(o){localStorage.setItem("composer:resizeRatio",Math.min(o,1))}function l(){var o;a?o=a.getBoundingClientRect():o={bottom:0};var s=Math.max(o.bottom,0),r={top:0,left:0,right:window.innerWidth,bottom:window.innerHeight};return r.width=r.right,r.height=r.bottom,r.boundedTop=s,r.boundedHeight=r.bottom-s,r}function S(o,s){var r=l(),m=o[0],y=window.getComputedStyle(m),N=parseInt(y.getPropertyValue("min-height"),10),D=Math.max(N/window.innerHeight,d);if(r.width>=B){const M=(r.height-r.boundedHeight)/r.height;s=Math.min(Math.max(s,D+M),1);var x=s*r.boundedHeight/r.height;m.style.top=((1-x)*100).toString()+"%";var A=m.getBoundingClientRect();i.style.paddingBottom=(A.bottom-A.top).toString()+"px"}else m.style.top=0,i.style.paddingBottom=0;o.ratio=s,I.updateActive(o.attr("data-uuid"))}var z=S,F=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return F&&(z=function(o,s){F(function(){S(o,s),setTimeout(function(){b.trigger("action:composer.resize"),o.trigger("action:composer.resize")},0)})}),f.reposition=function(o){var s=n();s>=1-w&&(s=1,o.addClass("maximized")),z(o,s)},f.maximize=function(o,s){s?z(o,1):f.reposition(o)},f.handleResize=function(o){var s=0,r=0,m=0,y=o.find(".resizer"),N=y[0];function D(u){var E=N.getBoundingClientRect(),p=(E.top+E.bottom)/2;s=(p-u.clientY)/2,r=u.clientY,b.on("mousemove",x),b.on("mouseup",A),C.on("touchmove",M)}function x(u){var E=u.clientY-s,p=l(),k=(p.height-E)/p.boundedHeight;z(o,k)}function A(u){u.preventDefault(),m=u.clientY,o.find("textarea").focus(),b.off("mousemove",x),b.off("mouseup",A),C.off("touchmove",M);var E=m-s,p=l(),k=(p.height-E)/p.boundedHeight;m-r===0&&o.hasClass("maximized")?(o.removeClass("maximized"),k=!e||e>=1-w?.5:e,z(o,k)):m-r===0||k>=1-w?(z(o,1),o.addClass("maximized"),e=k):o.removeClass("maximized"),c(k)}function M(u){u.preventDefault(),x(u.touches[0])}y.on("mousedown",function(u){u.button===0&&(u.preventDefault(),D(u))}).on("touchstart",function(u){u.preventDefault(),D(u.touches[0])}).on("touchend",A)},f}.apply(R,_),h!==void 0&&(g.exports=h)}}]);
