(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[6232],{89596:(a,v,d)=>{a.exports=d(62590)},62590:(a,v,d)=>{"use strict";var p,f;p=[d(91749)],f=function(_){var r={};return r.render=function(i,t){if(t=t||function(){},!i.find(".preview-container").is(":visible"))return t();var n=i.find("textarea");socket.emit("plugins.composer.renderPreview",n.val(),function(l,s){l||(s=$("<div>"+s+"</div>"),s.find("img:not(.not-responsive)").addClass("img-fluid"),i.find(".preview").html(s),_.fire("action:composer.preview",{postContainer:i,preview:s}),t())})},r.matchScroll=function(i){if(i.find(".preview-container").is(":visible")){var t=i.find("textarea"),n=i.find(".preview");if(t.length&&n.length){var l=t[0].scrollHeight-t.height();if(l===0)return;var s=t.scrollTop()/l;n.scrollTop(Math.max(n[0].scrollHeight-n.height(),0)*s)}}},r.handleToggler=function(i){const t=i.get(0);r.env=utils.findBootstrapEnvironment();const n=["xs","sm"].includes(r.env),l=t.querySelector('.formatting-bar [data-action="preview"]'),s=l.querySelector(".show-text"),x=l.querySelector(".hide-text"),m=localStorage.getItem("composer:previewToggled"),h=config["composer-default"].hidePreviewOnOpen==="on";let g=!n&&(m===null&&!h||m==="true");const c=t.querySelector(".preview-container"),o=t.querySelector(".write-container");if(!l)return;function u(e){n?(c.classList.toggle("hide",!1),o.classList.toggle("maximized",!1),c.classList.toggle("d-none",!e),c.classList.toggle("d-flex",e),c.classList.toggle("w-100",e),o.classList.toggle("d-flex",!e),o.classList.toggle("d-none",e),o.classList.toggle("w-100",!e)):(c.classList.toggle("hide",!e),o.classList.toggle("w-50",e),o.classList.toggle("w-100",!e),localStorage.setItem("composer:previewToggled",e)),s.classList.toggle("hide",e),x.classList.toggle("hide",!e),e&&r.render(i),r.matchScroll(i)}r.toggle=u,l.addEventListener("click",e=>{e.button===0&&(g=!g,u(g))}),u(g)},r}.apply(v,p),f!==void 0&&(a.exports=f)}}]);
