"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[61861,87212],{10870:(m,f,r)=>{var c,s;c=[r(40027),r(17459),r(68636),r(29930),r(91749)],s=function(n,o,e,a,d){const l={};let g,u;l.show=function(){d.one("action:ajaxify.end",()=>{h(),p(),l.showEmailConfirmWarning()})},l.showEmailConfirmWarning=function(t){if(!config.emailPrompt||!app.user.uid||parseInt(e.getItem("email-confirm-dismiss"),10)===1)return;const i={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{e.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(i.message="[[error:no-email-to-confirm]]",i.clickfn=function(){a.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},a.alert(i)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(i.message=t||"[[error:email-not-confirmed]]",i.clickfn=function(){a.remove("email_confirm"),ajaxify.go("/me/edit/email")},a.alert(i)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(i.message="[[error:email-not-confirmed-email-sent]]",a.alert(i))};function p(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||e.getItem("cookieconsent")==="1"||(config.cookies.message=o.unescape(config.cookies.message),config.cookies.dismiss=o.unescape(config.cookies.dismiss),config.cookies.link=o.unescape(config.cookies.link),config.cookies.link_url=o.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(t){$(document.body).append(t),$(document.body).addClass("cookie-consent-open");const i=$(".cookie-consent");i.find("button").on("click",function(){e.setItem("cookieconsent","1"),i.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function h(){const t=utils.params({full:!0});g=t.has("loggedin"),u=t.get("register"),g&&(a.alert({type:"success",title:"[[global:welcome-back]] "+app.user.username+"!",message:"[[global:you-have-successfully-logged-in]]",timeout:5e3}),t.delete("loggedin")),u&&(n.alert({message:utils.escapeHTML(decodeURIComponent(u))}),t.delete("register")),t.has("lang")&&t.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${t.get("lang")}", but that is already the forum default language.`),t.delete("lang"));const i=t.toString();ajaxify.updateHistory(ajaxify.currentPage+(i?`?${i}`:"")+document.location.hash,!0)}return l.showInvalidSession=function(){n.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},l.showSessionMismatch=function(){n.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},l}.apply(f,c),s!==void 0&&(m.exports=s)},68636:(m,f,r)=>{var c;c=function(){function s(){this._store={},this._keys=[]}s.prototype.isMock=!0,s.prototype.setItem=function(e,a){e=String(e),this._keys.indexOf(e)===-1&&this._keys.push(e),this._store[e]=a},s.prototype.getItem=function(e){return e=String(e),this._keys.indexOf(e)===-1?null:this._store[e]},s.prototype.removeItem=function(e){e=String(e),this._keys=this._keys.filter(function(a){return a!==e}),this._store[e]=null},s.prototype.clear=function(){this._keys=[],this._store={}},s.prototype.key=function(e){return e=parseInt(e,10)||0,this._keys[e]},Object.defineProperty&&Object.defineProperty(s.prototype,"length",{get:function(){return this._keys.length}});let n;const o=Date.now().toString();try{if(n=window.localStorage,n.setItem(o,o),n.getItem(o)!==o)throw Error("localStorage behaved unexpectedly");return n.removeItem(o),n}catch(e){console.warn(e),console.warn("localStorage failed, falling back on sessionStorage");try{if(n=window.sessionStorage,n.setItem(o,o),n.getItem(o)!==o)throw Error("sessionStorage behaved unexpectedly");return n.removeItem(o),n}catch(a){return console.warn(a),console.warn("sessionStorage failed, falling back on memory storage"),new s}}}.call(f,r,f,m),c!==void 0&&(m.exports=c)}}]);
