(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[37573],{35347:(_t,tt,me)=>{var Ge,We;Ge=[me(74692),me(49897),me(29930),me(46243),me(17459)],We=function(nt,Se,Qe,K,J){"use strict";function Ce(t){var e=Object.create(null);return t&&Object.keys(t).forEach(function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}),e.default=t,Object.freeze(e)}var ee=Ce(Qe),R=ajaxify;function H(){}function X(t,e){for(const n in e)t[n]=e[n];return t}function Oe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function I(t){return t()}function q(){return Object.create(null)}function te(t){t.forEach(I)}function Fe(t){return typeof t=="function"}function Re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vt(t){return Object.keys(t).length===0}function u(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function de(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ne(t){return document.createTextNode(t)}function j(){return ne(" ")}function De(){return ne("")}function V(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function f(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function En(t){return Array.from(t.childNodes)}function it(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ie(t,e){t.value=e??""}function wn(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function ze(t,e,n){t.classList.toggle(e,!!n)}function kn(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class St{is_svg=!1;e=void 0;n=void 0;t=void 0;a=void 0;constructor(e=!1){this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=ve(n.nodeName):this.e=d(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)S(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}let Je;function He(t){Je=t}function bt(){if(!Je)throw new Error("Function called outside component initialization");return Je}function Cn(t){bt().$$.on_mount.push(t)}function Dt(){const t=bt();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=kn(e,n,{cancelable:i});return s.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}const Ke=[],Pe=[];let Ye=[];const yt=[],An=Promise.resolve();let Et=!1;function jn(){Et||(Et=!0,An.then(At))}function wt(t){Ye.push(t)}function kt(t){yt.push(t)}const Ct=new Set;let Ve=0;function At(){if(Ve!==0)return;const t=Je;do{try{for(;Ve<Ke.length;){const e=Ke[Ve];Ve++,He(e),Tn(e.$$)}}catch(e){throw Ke.length=0,Ve=0,e}for(He(null),Ke.length=0,Ve=0;Pe.length;)Pe.pop()();for(let e=0;e<Ye.length;e+=1){const n=Ye[e];Ct.has(n)||(Ct.add(n),n())}Ye.length=0}while(Ke.length);for(;yt.length;)yt.pop()();Et=!1,Ct.clear(),He(t)}function Tn(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(wt)}}function Nn(t){const e=[],n=[];Ye.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ye=e}const st=new Set;let $e;function rt(){$e={r:0,c:[],p:$e}}function lt(){$e.r||te($e.c),$e=$e.p}function oe(t,e){t&&t.i&&(st.delete(t),t.i(e))}function fe(t,e,n,i){if(t&&t.o){if(st.has(t))return;st.add(t),$e.c.push(()=>{st.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function ot(t,e){const n=e.token={};function i(s,l,r,o){if(e.token!==n)return;e.resolved=o;let c=e.ctx;r!==void 0&&(c=c.slice(),c[r]=o);const a=s&&(e.current=s)(c);let p=!1;e.block&&(e.blocks?e.blocks.forEach((m,_)=>{_!==l&&m&&(rt(),fe(m,1,1,()=>{e.blocks[_]===m&&(e.blocks[_]=null)}),lt())}):e.block.d(1),a.c(),oe(a,1),a.m(e.mount(),e.anchor),p=!0),e.block=a,e.blocks&&(e.blocks[l]=a),p&&At()}if(Oe(t)){const s=bt();if(t.then(l=>{He(s),i(e.then,1,e.value,l),He(null)},l=>{if(He(s),i(e.catch,2,e.error,l),He(null),!e.hasCatch)throw l}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function Pt(t,e,n){const i=e.slice(),{resolved:s}=t;t.current===t.then&&(i[t.value]=s),t.current===t.catch&&(i[t.error]=s),t.block.p(i,n)}function Le(t){return t?.length!==void 0?t:Array.from(t)}function Mt(t,e){fe(t,1,1,()=>{e.delete(t.key)})}function Rt(t,e,n,i,s,l,r,o,c,a,p,m){let _=t.length,g=l.length,v=_;const w={};for(;v--;)w[t[v].key]=v;const h=[],E=new Map,k=new Map,A=[];for(v=g;v--;){const O=m(s,l,v),z=n(O);let W=r.get(z);W?i&&A.push(()=>W.p(O,e)):(W=a(z,O),W.c()),E.set(z,h[v]=W),z in w&&k.set(z,Math.abs(v-w[z]))}const Y=new Set,L=new Set;function Z(O){oe(O,1),O.m(o,p),r.set(O.key,O),p=O.first,g--}for(;_&&g;){const O=h[g-1],z=t[_-1],W=O.key,se=z.key;O===z?(p=O.first,_--,g--):E.has(se)?!r.has(W)||Y.has(W)?Z(O):L.has(se)?_--:k.get(W)>k.get(se)?(L.add(W),Z(O)):(Y.add(se),_--):(c(z,r),_--)}for(;_--;){const O=t[_];E.has(O.key)||c(O,r)}for(;g;)Z(h[g-1]);return te(A),h}function Ht(t,e){const n={},i={},s={$$scope:1};let l=t.length;for(;l--;){const r=t[l],o=e[l];if(o){for(const c in r)c in o||(i[c]=1);for(const c in o)s[c]||(n[c]=o[c],s[c]=1);t[l]=o}else for(const c in r)s[c]=1}for(const r in i)r in n||(n[r]=void 0);return n}function zt(t){return typeof t=="object"&&t!==null?t:{}}function jt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function Te(t){t&&t.c()}function Ae(t,e,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),wt(()=>{const l=t.$$.on_mount.map(I).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...l):te(l),t.$$.on_mount=[]}),s.forEach(wt)}function je(t,e){const n=t.$$;n.fragment!==null&&(Nn(n.after_update),te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function On(t,e){t.$$.dirty[0]===-1&&(Ke.push(t),jn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ue(t,e,n,i,s,l,r,o=[-1]){const c=Je;He(t);const a=t.$$={fragment:null,ctx:[],props:l,update:H,not_equal:s,bound:q(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:q(),dirty:o,skip_bound:!1,root:e.target||c.$$.root};r&&r(a.root);let p=!1;if(a.ctx=n?n(t,e.props||{},(m,_,...g)=>{const v=g.length?g[0]:_;return a.ctx&&s(a.ctx[m],a.ctx[m]=v)&&(!a.skip_bound&&a.bound[m]&&a.bound[m](v),p&&On(t,m)),_}):[],a.update(),p=!0,te(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const m=En(e.target);a.fragment&&a.fragment.l(m),m.forEach(C)}else a.fragment&&a.fragment.c();e.intro&&oe(t.$$.fragment),Ae(t,e.target,e.anchor),At()}He(c)}class Be{$$=void 0;$$set=void 0;$destroy(){je(this,1),this.$destroy=H}$on(e,n){if(!Fe(n))return H;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const In="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(In);var at=config,Ln=utils;function Wt(t,e,n){const i=t.slice();return i[36]=e[n],i}function Ft(t,e,n){const i=t.slice();return i[36]=e[n],i}function $t(t){let e,n=t[36]+"",i,s,l,r;function o(){return t[32](t[36])}return{c(){e=d("button"),i=ne(n),s=ne(" x"),f(e,"class","btn btn-info btn-sm")},m(c,a){S(c,e,a),u(e,i),u(e,s),l||(r=V(e,"click",o),l=!0)},p(c,a){t=c,a[0]&4&&n!==(n=t[36]+"")&&it(i,n)},d(c){c&&C(e),l=!1,r()}}}function Ut(t){let e,n=t[36]+"",i,s,l,r;function o(){return t[34](t[36])}return{c(){e=d("button"),i=ne(n),s=ne(" x"),f(e,"class","btn btn-info btn-sm")},m(c,a){S(c,e,a),u(e,i),u(e,s),l||(r=V(e,"click",o),l=!0)},p(c,a){t=c,a[0]&8&&n!==(n=t[36]+"")&&it(i,n)},d(c){c&&C(e),l=!1,r()}}}function Sn(t){let e,n,i,s,l;return{c(){e=d("button"),n=d("i"),f(n,"class","fa fa-trash"),f(e,"class","btn btn-warning"),f(e,"type","button"),e.disabled=i=t[12]||t[13]},m(r,o){S(r,e,o),u(e,n),s||(l=V(e,"click",t[21]),s=!0)},p(r,o){o[0]&12288&&i!==(i=r[12]||r[13])&&(e.disabled=i)},d(r){r&&C(e),s=!1,l()}}}function Dn(t){let e,n,i,s,l;return{c(){e=d("button"),n=d("i"),f(n,"class","fa fa-check"),f(e,"class","btn btn-success"),f(e,"type","button"),e.disabled=i=!t[11]},m(r,o){S(r,e,o),u(e,n),s||(l=V(e,"click",t[20]),s=!0)},p(r,o){o[0]&2048&&i!==(i=!r[11])&&(e.disabled=i)},d(r){r&&C(e),s=!1,l()}}}function Bt(t){let e,n,i,s,l,r,o,c,a,p,m,_;return{c(){e=d("tr"),n=d("td"),i=d("button"),s=ne("Cancel"),l=j(),r=d("td"),r.innerHTML='<span class="help-block">Are you sure you want to delete this emoji?</span>',o=j(),c=d("td"),a=d("button"),p=ne("Yes"),f(i,"class","btn btn-outline-secondary"),f(i,"type","button"),i.disabled=t[13],f(r,"colspan",3),f(a,"class","btn btn-danger"),f(a,"type","button"),a.disabled=t[13],f(e,"class","svelte-11gdgpc"),ze(e,"fadeout",t[13])},m(g,v){S(g,e,v),u(e,n),u(n,i),u(i,s),u(e,l),u(e,r),u(e,o),u(e,c),u(c,a),u(a,p),m||(_=[V(i,"click",t[23]),V(a,"click",t[22])],m=!0)},p(g,v){v[0]&8192&&(i.disabled=g[13]),v[0]&8192&&(a.disabled=g[13]),v[0]&8192&&ze(e,"fadeout",g[13])},d(g){g&&C(e),m=!1,te(_)}}}function Qt(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> is required</span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function Kt(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Image</strong> is required</span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function Yt(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function Vt(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function Pn(t){let e,n,i,s,l,r,o=K.buildEmoji({character:"",pack:"customizations",keywords:[],name:t[0],aliases:t[2],image:t[1]})+"",c,a,p,m,_,g,v,w,h,E,k,A,Y,L,Z,O,z,W,se,he,ae,ue,be,_e,pe,Ne,P,ie,Q,ye,G,F,Ee,ce=Le(t[2]),U=[];for(let b=0;b<ce.length;b+=1)U[b]=$t(Ft(t,ce,b));let x=Le(t[3]),B=[];for(let b=0;b<x.length;b+=1)B[b]=Ut(Wt(t,x,b));function ge(b,N){return b[5]||b[18]?Dn:Sn}let re=ge(t),y=re(t),M=(t[12]||t[13])&&Bt(t),T=t[5]&&t[6].nameRequired&&Qt(),le=t[5]&&t[6].imageRequired&&Kt(),we=t[5]&&t[6].nameInvalid&&Yt(),ke=t[5]&&t[6].aliasInvalid&&Vt();return{c(){e=d("tr"),n=d("td"),i=d("input"),s=j(),l=d("td"),r=d("button"),c=j(),a=d("form"),p=d("input"),m=j(),_=d("input"),g=j(),v=d("td"),w=d("div"),h=d("input"),E=j(),k=d("div"),A=d("button"),A.textContent="+",Y=j(),L=d("span");for(let b=0;b<U.length;b+=1)U[b].c();Z=j(),O=d("td"),z=d("div"),W=d("input"),se=j(),he=d("div"),ae=d("button"),ae.textContent="+",ue=j(),be=d("span");for(let b=0;b<B.length;b+=1)B[b].c();_e=j(),pe=d("td"),y.c(),Ne=j(),M&&M.c(),P=j(),T&&T.c(),ie=j(),le&&le.c(),Q=j(),we&&we.c(),ye=j(),ke&&ke.c(),G=De(),f(i,"type","text"),f(i,"class","form-control emoji-name svelte-11gdgpc"),f(r,"type","button"),f(r,"class","btn btn-outline-secondary"),f(p,"type","file"),f(p,"name","emojiImage"),f(p,"accept","image/*"),f(_,"type","hidden"),f(_,"name","fileName"),f(a,"action",`${at.relative_path}/api/admin/plugins/emoji/upload`),f(a,"method","post"),f(a,"enctype","multipart/form-data"),wn(a,"display","none"),f(h,"type","text"),f(h,"class","form-control"),f(A,"class","btn btn-outline-secondary"),f(k,"class","input-group-addon"),f(w,"class","input-group"),f(W,"type","text"),f(W,"class","form-control"),f(ae,"class","btn btn-outline-secondary"),f(he,"class","input-group-addon"),f(z,"class","input-group"),f(e,"class","svelte-11gdgpc"),ze(e,"fadeout",t[13])},m(b,N){S(b,e,N),u(e,n),u(n,i),Ie(i,t[0]),u(e,s),u(e,l),u(l,r),r.innerHTML=o,u(l,c),u(l,a),u(a,p),t[28](p),u(a,m),u(a,_),t[29](_),t[30](a),u(e,g),u(e,v),u(v,w),u(w,h),Ie(h,t[4]),u(w,E),u(w,k),u(k,A),u(v,Y),u(v,L);for(let D=0;D<U.length;D+=1)U[D]&&U[D].m(L,null);u(e,Z),u(e,O),u(O,z),u(z,W),Ie(W,t[10]),u(z,se),u(z,he),u(he,ae),u(O,ue),u(O,be);for(let D=0;D<B.length;D+=1)B[D]&&B[D].m(be,null);u(e,_e),u(e,pe),y.m(pe,null),S(b,Ne,N),M&&M.m(b,N),S(b,P,N),T&&T.m(b,N),S(b,ie,N),le&&le.m(b,N),S(b,Q,N),we&&we.m(b,N),S(b,ye,N),ke&&ke.m(b,N),S(b,G,N),F||(Ee=[V(i,"input",t[27]),V(r,"click",t[19]),V(h,"input",t[31]),V(A,"click",t[15]),V(W,"input",t[33]),V(ae,"click",t[17])],F=!0)},p(b,N){if(N[0]&1&&i.value!==b[0]&&Ie(i,b[0]),N[0]&7&&o!==(o=K.buildEmoji({character:"",pack:"customizations",keywords:[],name:b[0],aliases:b[2],image:b[1]})+"")&&(r.innerHTML=o),N[0]&16&&h.value!==b[4]&&Ie(h,b[4]),N[0]&16388){ce=Le(b[2]);let D;for(D=0;D<ce.length;D+=1){const et=Ft(b,ce,D);U[D]?U[D].p(et,N):(U[D]=$t(et),U[D].c(),U[D].m(L,null))}for(;D<U.length;D+=1)U[D].d(1);U.length=ce.length}if(N[0]&1024&&W.value!==b[10]&&Ie(W,b[10]),N[0]&65544){x=Le(b[3]);let D;for(D=0;D<x.length;D+=1){const et=Wt(b,x,D);B[D]?B[D].p(et,N):(B[D]=Ut(et),B[D].c(),B[D].m(be,null))}for(;D<B.length;D+=1)B[D].d(1);B.length=x.length}re===(re=ge(b))&&y?y.p(b,N):(y.d(1),y=re(b),y&&(y.c(),y.m(pe,null))),N[0]&8192&&ze(e,"fadeout",b[13]),b[12]||b[13]?M?M.p(b,N):(M=Bt(b),M.c(),M.m(P.parentNode,P)):M&&(M.d(1),M=null),b[5]&&b[6].nameRequired?T||(T=Qt(),T.c(),T.m(ie.parentNode,ie)):T&&(T.d(1),T=null),b[5]&&b[6].imageRequired?le||(le=Kt(),le.c(),le.m(Q.parentNode,Q)):le&&(le.d(1),le=null),b[5]&&b[6].nameInvalid?we||(we=Yt(),we.c(),we.m(ye.parentNode,ye)):we&&(we.d(1),we=null),b[5]&&b[6].aliasInvalid?ke||(ke=Vt(),ke.c(),ke.m(G.parentNode,G)):ke&&(ke.d(1),ke=null)},i:H,o:H,d(b){b&&(C(e),C(Ne),C(P),C(ie),C(Q),C(ye),C(G)),t[28](null),t[29](null),t[30](null),de(U,b),de(B,b),y.d(),M&&M.d(b),T&&T.d(b),le&&le.d(b),we&&we.d(b),ke&&ke.d(b),F=!1,te(Ee)}}}const Xt=/[^a-z\-.+0-9_]/i;function Tt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every((n,i)=>Tt(n,e[i]));if(Array.isArray(t)||Array.isArray(e))return!1;if(typeof t=="object"){const n=Object.keys(t);return Object.keys(e).length!==n.length?!1:n.every(i=>Tt(t[i],e[i]))}return!1}function Mn(t,e,n){let{emoji:i}=e,{id:s}=e,l=i.name,r=i.image,o=i.aliases.slice(),c=i.ascii.slice();function a(){n(0,l=i.name),n(1,r=i.image),n(2,o=i.aliases.slice()),n(3,c=i.ascii.slice())}let p,m,_,g="";function v(F){n(2,o=o.filter(Ee=>Ee!==F))}function w(){!g||o.includes(g)||(n(2,o=[...o,g]),n(4,g=""))}let h="";function E(F){n(3,c=c.filter(Ee=>Ee!==F))}function k(){!h||c.includes(h)||(n(3,c=[...c,h]),n(10,h=""))}const A=!i.name&&!i.image&&!i.aliases.length&&!i.ascii.length;let Y=!1;const L={nameRequired:!1,imageRequired:!1,nameInvalid:!1,aliasInvalid:!1,any:!1};let Z=!1;function O(){m.click(),jQuery(m).one("change",()=>{if(!m.files.length)return;const F=`${Ln.generateUUID()}-${m.files[0].name}`;n(9,_.value=F,_),jQuery(p).ajaxSubmit({headers:{"x-csrf-token":at.csrf_token},success:()=>{n(1,r=F),n(8,m.value="",m)},error:()=>{const Ee=Error("Failed to upload file");console.error(Ee),ee.error(Ee),n(8,m.value="",m)}})})}const z=Dt();function W(){z("save",{id:s,emoji:{name:l,image:r,aliases:o,ascii:c}})}let se=!1,he=!1;function ae(){n(12,se=!0)}function ue(){n(12,se=!1),n(13,he=!0),setTimeout(()=>{z("delete",{id:s})},250)}function be(){n(12,se=!1)}function _e(){l=this.value,n(0,l)}function pe(F){Pe[F?"unshift":"push"](()=>{m=F,n(8,m)})}function Ne(F){Pe[F?"unshift":"push"](()=>{_=F,n(9,_)})}function P(F){Pe[F?"unshift":"push"](()=>{p=F,n(7,p)})}function ie(){g=this.value,n(4,g)}const Q=F=>v(F);function ye(){h=this.value,n(10,h)}const G=F=>E(F);return t.$$set=F=>{"emoji"in F&&n(24,i=F.emoji),"id"in F&&n(25,s=F.id)},t.$$.update=()=>{t.$$.dirty[0]&16777231&&n(5,Y=!Tt({name:l,image:r,aliases:o,ascii:c},i)),t.$$.dirty[0]&1&&n(6,L.nameRequired=!l,L),t.$$.dirty[0]&2&&n(6,L.imageRequired=!r,L),t.$$.dirty[0]&1&&n(6,L.nameInvalid=Xt.test(l),L),t.$$.dirty[0]&16&&n(6,L.aliasInvalid=Xt.test(g),L),t.$$.dirty[0]&64&&n(6,L.any=L.nameRequired||L.imageRequired||L.nameInvalid||L.aliasInvalid,L),t.$$.dirty[0]&96&&n(11,Z=Y&&!L.any)},[l,r,o,c,g,Y,L,p,m,_,h,Z,se,he,v,w,E,k,A,O,W,ae,ue,be,i,s,a,_e,pe,Ne,P,ie,Q,ye,G]}class qt extends Be{constructor(e){super(),Ue(this,e,Mn,Pn,Re,{emoji:24,id:25,reset:26},null,[-1,-1])}get reset(){return this.$$.ctx[26]}}function Gt(t,e,n){const i=t.slice();return i[9]=e[n],i}function Jt(t,e){let n,i,s;const l=[e[9]];let r={};for(let o=0;o<l.length;o+=1)r=X(r,l[o]);return i=new qt({props:r}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=De(),Te(i.$$.fragment),this.first=n},m(o,c){S(o,n,c),Ae(i,o,c),s=!0},p(o,c){e=o;const a=c&1?Ht(l,[zt(e[9])]):{};i.$set(a)},i(o){s||(oe(i.$$.fragment,o),s=!0)},o(o){fe(i.$$.fragment,o),s=!1},d(o){o&&C(n),je(i,o)}}}function Rn(t){let e,n,i,s,l=[],r=new Map,o,c,a,p,m,_=Le(t[0]);const g=h=>h[9].id;for(let h=0;h<_.length;h+=1){let E=Gt(t,_,h),k=g(E);r.set(k,l[h]=Jt(k,E))}function v(h){t[7](h)}let w={id:-1,emoji:t[2]};return t[1]!==void 0&&(w.reset=t[1]),a=new qt({props:w}),Pe.push(()=>jt(a,"reset",v)),a.$on("save",t[5]),{c(){e=d("table"),n=d("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=j(),s=d("tbody");for(let h=0;h<l.length;h+=1)l[h].c();o=j(),c=d("tfoot"),Te(a.$$.fragment),f(e,"class","table")},m(h,E){S(h,e,E),u(e,n),u(e,i),u(e,s);for(let k=0;k<l.length;k+=1)l[k]&&l[k].m(s,null);u(e,o),u(e,c),Ae(a,c,null),m=!0},p(h,[E]){E&25&&(_=Le(h[0]),rt(),l=Rt(l,E,g,1,h,_,r,s,Mt,Jt,null,Gt),lt());const k={};E&4&&(k.emoji=h[2]),!p&&E&2&&(p=!0,k.reset=h[1],kt(()=>p=!1)),a.$set(k)},i(h){if(!m){for(let E=0;E<_.length;E+=1)oe(l[E]);oe(a.$$.fragment,h),m=!0}},o(h){for(let E=0;E<l.length;E+=1)fe(l[E]);fe(a.$$.fragment,h),m=!1},d(h){h&&C(e);for(let E=0;E<l.length;E+=1)l[E].d();je(a)}}}function Hn(t,e,n){let{emojis:i}=e,s;function l(_){const{id:g,emoji:v}=_.detail;Se.put(`/admin/plugins/emoji/customizations/emoji/${g}`,{item:v}).then(()=>{n(6,i=Object.assign(Object.assign({},i),{[g]:v}))},()=>ee.error())}function r(_){const{id:g}=_.detail;Se.del(`/admin/plugins/emoji/customizations/emoji/${g}`,{}).then(()=>{delete i[g],n(6,i=Object.assign({},i))},()=>ee.error())}const o={name:"",image:"",aliases:[],ascii:[]};let c,a=Object.assign({},o);function p(_){const{emoji:g}=_.detail;Se.post("/admin/plugins/emoji/customizations/emoji",{item:g}).then(({id:v})=>{n(6,i=Object.assign(Object.assign({},i),{[v]:g})),n(2,a=Object.assign({},o)),c()},()=>ee.error())}function m(_){c=_,n(1,c)}return t.$$set=_=>{"emojis"in _&&n(6,i=_.emojis)},t.$$.update=()=>{t.$$.dirty&64&&n(0,s=Object.keys(i).map(_=>({id:parseInt(_,10),emoji:i[_]})))},[s,c,a,l,r,p,i,m]}class zn extends Be{constructor(e){super(),Ue(this,e,Hn,Rn,Re,{emojis:6})}}var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof me.g<"u"?me.g:typeof self<"u"?self:{};function Wn(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var Nt={},Ze={},Zt={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function s(c,a,p){this.fn=c,this.context=a,this.once=p||!1}function l(c,a,p,m,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var g=new s(p,m||c,_),v=n?n+a:a;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],g]:c._events[v].push(g):(c._events[v]=g,c._eventsCount++),c}function r(c,a){--c._eventsCount===0?c._events=new i:delete c._events[a]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var a=[],p,m;if(this._eventsCount===0)return a;for(m in p=this._events)e.call(p,m)&&a.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(p)):a},o.prototype.listeners=function(a){var p=n?n+a:a,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var _=0,g=m.length,v=new Array(g);_<g;_++)v[_]=m[_].fn;return v},o.prototype.listenerCount=function(a){var p=n?n+a:a,m=this._events[p];return m?m.fn?1:m.length:0},o.prototype.emit=function(a,p,m,_,g,v){var w=n?n+a:a;if(!this._events[w])return!1;var h=this._events[w],E=arguments.length,k,A;if(h.fn){switch(h.once&&this.removeListener(a,h.fn,void 0,!0),E){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,p),!0;case 3:return h.fn.call(h.context,p,m),!0;case 4:return h.fn.call(h.context,p,m,_),!0;case 5:return h.fn.call(h.context,p,m,_,g),!0;case 6:return h.fn.call(h.context,p,m,_,g,v),!0}for(A=1,k=new Array(E-1);A<E;A++)k[A-1]=arguments[A];h.fn.apply(h.context,k)}else{var Y=h.length,L;for(A=0;A<Y;A++)switch(h[A].once&&this.removeListener(a,h[A].fn,void 0,!0),E){case 1:h[A].fn.call(h[A].context);break;case 2:h[A].fn.call(h[A].context,p);break;case 3:h[A].fn.call(h[A].context,p,m);break;case 4:h[A].fn.call(h[A].context,p,m,_);break;default:if(!k)for(L=1,k=new Array(E-1);L<E;L++)k[L-1]=arguments[L];h[A].fn.apply(h[A].context,k)}}return!0},o.prototype.on=function(a,p,m){return l(this,a,p,m,!1)},o.prototype.once=function(a,p,m){return l(this,a,p,m,!0)},o.prototype.removeListener=function(a,p,m,_){var g=n?n+a:a;if(!this._events[g])return this;if(!p)return r(this,g),this;var v=this._events[g];if(v.fn)v.fn===p&&(!_||v.once)&&(!m||v.context===m)&&r(this,g);else{for(var w=0,h=[],E=v.length;w<E;w++)(v[w].fn!==p||_&&!v[w].once||m&&v[w].context!==m)&&h.push(v[w]);h.length?this._events[g]=h.length===1?h[0]:h:r(this,g)}return this},o.prototype.removeAllListeners=function(a){var p;return a?(p=n?n+a:a,this._events[p]&&r(this,p)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(Zt);var ct=Zt.exports,Ot={},xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.SearchResult=void 0;const Fn=/\$&/g,$n=/\$(\d)/g;class Un{constructor(e,n,i){this.data=e,this.term=n,this.strategy=i}getReplacementData(e){let n=this.strategy.replace(this.data);if(n==null)return null;let i="";Array.isArray(n)&&(i=n[1],n=n[0]);const s=this.strategy.match(e);if(s==null||s.index==null)return null;const l=n.replace(Fn,s[0]).replace($n,(r,o)=>s[parseInt(o)]);return{start:s.index,end:s.index+s[0].length,beforeCursor:l,afterCursor:i}}replace(e,n){const i=this.getReplacementData(e);if(i!==null)return n=i.afterCursor+n,[[e.slice(0,i.start),i.beforeCursor,e.slice(i.end)].join(""),n]}render(){return this.strategy.renderTemplate(this.data,this.term)}getStrategyId(){return this.strategy.getId()}}xe.SearchResult=Un,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Strategy=t.DEFAULT_INDEX=void 0;const e=xe;t.DEFAULT_INDEX=1;class n{constructor(s){this.props=s,this.cache={}}destroy(){return this.cache={},this}replace(s){return this.props.replace(s)}execute(s,l){var r;const o=this.matchWithContext(s);if(!o)return!1;const c=o[(r=this.props.index)!==null&&r!==void 0?r:t.DEFAULT_INDEX];return this.search(c,a=>{l(a.map(p=>new e.SearchResult(p,c,this)))},o),!0}renderTemplate(s,l){if(this.props.template)return this.props.template(s,l);if(typeof s=="string")return s;throw new Error(`Unexpected render data type: ${typeof s}. Please implement template parameter by yourself`)}getId(){return this.props.id||null}match(s){return typeof this.props.match=="function"?this.props.match(s):s.match(this.props.match)}search(s,l,r){this.props.cache?this.searchWithCach(s,l,r):this.props.search(s,l,r)}matchWithContext(s){const l=this.context(s);return l===!1?null:this.match(l===!0?s:l)}context(s){return this.props.context?this.props.context(s):!0}searchWithCach(s,l,r){this.cache[s]!=null?l(this.cache[s]):this.props.search(s,o=>{this.cache[s]=o,l(o)},r)}}t.Strategy=n}(Ot),Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.Completer=void 0;const Bn=ct,Qn=Ot;class Kn extends Bn.EventEmitter{constructor(e){super(),this.handleQueryResult=n=>{this.emit("hit",{searchResults:n})},this.strategies=e.map(n=>new Qn.Strategy(n))}destroy(){return this.strategies.forEach(e=>e.destroy()),this}run(e){for(const n of this.strategies)if(n.execute(e,this.handleQueryResult))return;this.handleQueryResult([])}}Ze.Completer=Kn;var It={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.createCustomEvent=void 0;const Yn=typeof window<"u"&&!!window.CustomEvent,Vn=(t,e)=>{if(Yn)return new CustomEvent(t,e);const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,e?.cancelable||!1,e?.detail||void 0),n};Xe.createCustomEvent=Vn,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Dropdown=t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME=t.DEFAULT_DROPDOWN_CLASS_NAME=t.DEFAULT_DROPDOWN_PLACEMENT=t.DEFAULT_DROPDOWN_MAX_COUNT=void 0;const e=ct,n=Xe;t.DEFAULT_DROPDOWN_MAX_COUNT=10,t.DEFAULT_DROPDOWN_PLACEMENT="auto",t.DEFAULT_DROPDOWN_CLASS_NAME="dropdown-menu textcomplete-dropdown",t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME="textcomplete-item",t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME=`${t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME} active`;class i extends e.EventEmitter{constructor(r,o){super(),this.el=r,this.option=o,this.shown=!1,this.items=[],this.activeIndex=null}static create(r){const o=document.createElement("ul");o.className=r.className||t.DEFAULT_DROPDOWN_CLASS_NAME,Object.assign(o.style,{display:"none",position:"absolute",zIndex:"1000"},r.style);const c=r.parent||document.body;return c?.appendChild(o),new i(o,r)}render(r,o){const c=(0,n.createCustomEvent)("render",{cancelable:!0});return this.emit("render",c),c.defaultPrevented?this:(this.clear(),r.length===0?this.hide():(this.items=r.slice(0,this.option.maxCount||t.DEFAULT_DROPDOWN_MAX_COUNT).map((a,p)=>{var m;return new s(this,p,a,((m=this.option)===null||m===void 0?void 0:m.item)||{})}),this.setStrategyId(r[0]).renderEdge(r,"header").renderItems().renderEdge(r,"footer").show().setOffset(o).activate(0),this.emit("rendered",(0,n.createCustomEvent)("rendered")),this))}destroy(){var r;return this.clear(),(r=this.el.parentNode)===null||r===void 0||r.removeChild(this.el),this}select(r){const o={searchResult:r.searchResult},c=(0,n.createCustomEvent)("select",{cancelable:!0,detail:o});return this.emit("select",c),c.defaultPrevented?this:(this.hide(),this.emit("selected",(0,n.createCustomEvent)("selected",{detail:o})),this)}show(){if(!this.shown){const r=(0,n.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",r),r.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,n.createCustomEvent)("shown"))}return this}hide(){if(this.shown){const r=(0,n.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",r),r.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.clear(),this.emit("hidden",(0,n.createCustomEvent)("hidden"))}return this}clear(){return this.items.forEach(r=>r.destroy()),this.items=[],this.el.innerHTML="",this.activeIndex=null,this}up(r){return this.shown?this.moveActiveItem("prev",r):this}down(r){return this.shown?this.moveActiveItem("next",r):this}moveActiveItem(r,o){if(this.activeIndex!=null){const c=r==="next"?this.getNextActiveIndex():this.getPrevActiveIndex();c!=null&&(this.activate(c),o.preventDefault())}return this}activate(r){return this.activeIndex!==r&&(this.activeIndex!=null&&this.items[this.activeIndex].deactivate(),this.activeIndex=r,this.items[r].activate()),this}isShown(){return this.shown}getActiveItem(){return this.activeIndex!=null?this.items[this.activeIndex]:null}setOffset(r){const o=document.documentElement;if(o){const c=this.el.offsetWidth;if(r.left){const m=this.option.dynamicWidth?o.scrollWidth:o.clientWidth;r.left+c>m&&(r.left=m-c),this.el.style.left=`${r.left}px`}else r.right&&(r.right-c<0&&(r.right=0),this.el.style.right=`${r.right}px`);let a=!1;const p=this.option.placement||t.DEFAULT_DROPDOWN_PLACEMENT;if(p==="auto"){const m=this.items.length*r.lineHeight;a=r.clientTop!=null&&r.clientTop+m>o.clientHeight}p==="top"||a?(this.el.style.bottom=`${o.clientHeight-r.top+r.lineHeight}px`,this.el.style.top="auto"):(this.el.style.top=`${r.top}px`,this.el.style.bottom="auto")}return this}getNextActiveIndex(){if(this.activeIndex==null)throw new Error;return this.activeIndex<this.items.length-1?this.activeIndex+1:this.option.rotate?0:null}getPrevActiveIndex(){if(this.activeIndex==null)throw new Error;return this.activeIndex!==0?this.activeIndex-1:this.option.rotate?this.items.length-1:null}renderItems(){const r=document.createDocumentFragment();for(const o of this.items)r.appendChild(o.el);return this.el.appendChild(r),this}setStrategyId(r){const o=r.getStrategyId();return o&&(this.el.dataset.strategy=o),this}renderEdge(r,o){const c=this.option[o],a=document.createElement("li");return a.className=`textcomplete-${o}`,a.innerHTML=typeof c=="function"?c(r.map(p=>p.data)):c||"",this.el.appendChild(a),this}}t.Dropdown=i;class s{constructor(r,o,c,a){this.dropdown=r,this.index=o,this.searchResult=c,this.props=a,this.active=!1,this.onClick=_=>{_.preventDefault(),this.dropdown.select(this)},this.className=this.props.className||t.DEFAULT_DROPDOWN_ITEM_CLASS_NAME,this.activeClassName=this.props.activeClassName||t.DEFAULT_DROPDOWN_ITEM_ACTIVE_CLASS_NAME;const p=document.createElement("li");p.className=this.active?this.activeClassName:this.className;const m=document.createElement("span");m.tabIndex=-1,m.innerHTML=this.searchResult.render(),p.appendChild(m),p.addEventListener("click",this.onClick),this.el=p}destroy(){var r;const o=this.el;return(r=o.parentNode)===null||r===void 0||r.removeChild(o),o.removeEventListener("click",this.onClick,!1),this}activate(){return this.active||(this.active=!0,this.el.className=this.activeClassName,this.dropdown.el.scrollTop=this.el.offsetTop),this}deactivate(){return this.active&&(this.active=!1,this.el.className=this.className),this}}}(It);var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.Editor=void 0;const Xn=ct,dt=Xe;class qn extends Xn.EventEmitter{destroy(){return this}applySearchResult(e){throw new Error("Not implemented.")}getCursorOffset(){throw new Error("Not implemented.")}getBeforeCursor(){throw new Error("Not implemented.")}emitMoveEvent(e){const n=(0,dt.createCustomEvent)("move",{cancelable:!0,detail:{code:e}});return this.emit("move",n),n}emitEnterEvent(){const e=(0,dt.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",e),e}emitChangeEvent(){const e=(0,dt.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",e),e}emitEscEvent(){const e=(0,dt.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",e),e}getCode(e){return e.keyCode===9||e.keyCode===13?"ENTER":e.keyCode===27?"ESC":e.keyCode===38?"UP":e.keyCode===40||e.keyCode===78&&e.ctrlKey?"DOWN":e.keyCode===80&&e.ctrlKey?"UP":"OTHER"}}ut.Editor=qn;var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.Textcomplete=void 0;const Gn=ct,Jn=It,Zn=Ze,xn=["show","shown","render","rendered","selected","hidden","hide"];class ei extends Gn.EventEmitter{constructor(e,n,i){super(),this.editor=e,this.isQueryInFlight=!1,this.nextPendingQuery=null,this.handleHit=({searchResults:s})=>{s.length?this.dropdown.render(s,this.editor.getCursorOffset()):this.dropdown.hide(),this.isQueryInFlight=!1,this.nextPendingQuery!==null&&this.trigger(this.nextPendingQuery)},this.handleMove=s=>{s.detail.code==="UP"?this.dropdown.up(s):this.dropdown.down(s)},this.handleEnter=s=>{const l=this.dropdown.getActiveItem();l?(this.dropdown.select(l),s.preventDefault()):this.dropdown.hide()},this.handleEsc=s=>{this.dropdown.isShown()&&(this.dropdown.hide(),s.preventDefault())},this.handleChange=s=>{s.detail.beforeCursor!=null?this.trigger(s.detail.beforeCursor):this.dropdown.hide()},this.handleSelect=s=>{this.emit("select",s),s.defaultPrevented||this.editor.applySearchResult(s.detail.searchResult)},this.handleResize=()=>{this.dropdown.isShown()&&this.dropdown.setOffset(this.editor.getCursorOffset())},this.completer=new Zn.Completer(n),this.dropdown=Jn.Dropdown.create(i?.dropdown||{}),this.startListening()}destroy(e=!0){return this.completer.destroy(),this.dropdown.destroy(),e&&this.editor.destroy(),this.stopListening(),this}isShown(){return this.dropdown.isShown()}hide(){return this.dropdown.hide(),this}trigger(e){return this.isQueryInFlight?this.nextPendingQuery=e:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(e)),this}startListening(){var e;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect);for(const n of xn)this.dropdown.on(n,i=>this.emit(n,i));this.completer.on("hit",this.handleHit),(e=this.dropdown.el.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.handleResize)}stopListening(){var e;(e=this.dropdown.el.ownerDocument.defaultView)===null||e===void 0||e.removeEventListener("resize",this.handleResize),this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}ft.Textcomplete=ei,function(t){var e=Me&&Me.__createBinding||(Object.create?function(i,s,l,r){r===void 0&&(r=l);var o=Object.getOwnPropertyDescriptor(s,l);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(i,r,o)}:function(i,s,l,r){r===void 0&&(r=l),i[r]=s[l]}),n=Me&&Me.__exportStar||function(i,s){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&e(s,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(Ze,t),n(It,t),n(ut,t),n(xe,t),n(Ot,t),n(ft,t),n(Xe,t)}(Nt);var xt={},ht={};function en(t,e,n){const i=t.value,s=e+(n||""),l=document.activeElement;let r=0,o=0;for(;r<i.length&&r<s.length&&i[r]===s[r];)r++;for(;i.length-o-1>=0&&s.length-o-1>=0&&i[i.length-o-1]===s[s.length-o-1];)o++;r=Math.min(r,Math.min(i.length,s.length)-o),t.setSelectionRange(r,i.length-o);const c=s.substring(r,s.length-o);if(t.focus(),!document.execCommand("insertText",!1,c)){t.value=s;const a=document.createEvent("Event");a.initEvent("input",!0,!0),t.dispatchEvent(a)}return t.setSelectionRange(e.length,e.length),l.focus(),t}function ti(t,e,n){const i=t.selectionEnd,s=t.value.substr(0,t.selectionStart)+e,l=t.value.substring(t.selectionStart,i)+(n||"")+t.value.substr(i);return en(t,s,l),t.selectionEnd=i+e.length,t}var ni=Object.freeze({__proto__:null,update:en,wrapCursor:ti}),ii=Wn(ni),tn={exports:{}};(function(t){(function(){var e=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n=typeof window<"u",i=n&&window.mozInnerScreenX!=null;function s(l,r,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var c=o&&o.debug||!1;if(c){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var p=document.createElement("div");p.id="input-textarea-caret-position-mirror-div",document.body.appendChild(p);var m=p.style,_=window.getComputedStyle?window.getComputedStyle(l):l.currentStyle,g=l.nodeName==="INPUT";m.whiteSpace="pre-wrap",g||(m.wordWrap="break-word"),m.position="absolute",c||(m.visibility="hidden"),e.forEach(function(h){g&&h==="lineHeight"?m.lineHeight=_.height:m[h]=_[h]}),i?l.scrollHeight>parseInt(_.height)&&(m.overflowY="scroll"):m.overflow="hidden",p.textContent=l.value.substring(0,r),g&&(p.textContent=p.textContent.replace(/\s/g,"\xA0"));var v=document.createElement("span");v.textContent=l.value.substring(r)||".",p.appendChild(v);var w={top:v.offsetTop+parseInt(_.borderTopWidth),left:v.offsetLeft+parseInt(_.borderLeftWidth),height:parseInt(_.lineHeight)};return c?v.style.backgroundColor="#aaa":document.body.removeChild(p),w}t.exports=s})()})(tn);var si=tn.exports,nn={},mt={};Object.defineProperty(mt,"__esModule",{value:!0}),mt.calculateElementOffset=void 0;const ri=t=>{const e=t.getBoundingClientRect(),n=t.ownerDocument;if(n==null)throw new Error("Given element does not belong to document");const{defaultView:i,documentElement:s}=n;if(i==null)throw new Error("Given element does not belong to window");const l={top:e.top+i.pageYOffset,left:e.left+i.pageXOffset};return s&&(l.top-=s.clientTop,l.left-=s.clientLeft),l};mt.calculateElementOffset=ri;var pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.getLineHeightPx=void 0;const li=48,oi=57,sn=t=>li<=t&&t<=oi,ai=t=>{const e=getComputedStyle(t),n=e.lineHeight;if(sn(n.charCodeAt(0))){const i=parseFloat(n);return sn(n.charCodeAt(n.length-1))?i*parseFloat(e.fontSize):i}return ci(t.nodeName,e)};pt.getLineHeightPx=ai;const ci=(t,e)=>{const n=document.body;if(!n)return 0;const i=document.createElement(t);i.innerHTML="&nbsp;",Object.assign(i.style,{fontSize:e.fontSize,fontFamily:e.fontFamily,padding:"0"}),n.appendChild(i),i instanceof HTMLTextAreaElement&&(i.rows=1);const s=i.offsetHeight;return n.removeChild(i),s};var gt={};Object.defineProperty(gt,"__esModule",{value:!0}),gt.isSafari=void 0;const ui=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);gt.isSafari=ui,function(t){var e=Me&&Me.__createBinding||(Object.create?function(i,s,l,r){r===void 0&&(r=l);var o=Object.getOwnPropertyDescriptor(s,l);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(i,r,o)}:function(i,s,l,r){r===void 0&&(r=l),i[r]=s[l]}),n=Me&&Me.__exportStar||function(i,s){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&e(s,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(mt,t),n(pt,t),n(gt,t)}(nn);var di=Me&&Me.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.TextareaEditor=void 0;const fi=ii,hi=di(si),rn=Nt,ln=nn;class mi extends rn.Editor{constructor(e){super(),this.el=e,this.onInput=()=>{this.emitChangeEvent()},this.onKeydown=n=>{const i=this.getCode(n);let s;i==="UP"||i==="DOWN"?s=this.emitMoveEvent(i):i==="ENTER"?s=this.emitEnterEvent():i==="ESC"&&(s=this.emitEscEvent()),s&&s.defaultPrevented&&n.preventDefault()},this.startListening()}destroy(){return super.destroy(),this.stopListening(),this}applySearchResult(e){const n=this.getBeforeCursor();if(n!=null){const i=e.replace(n,this.getAfterCursor());this.el.focus(),Array.isArray(i)&&((0,fi.update)(this.el,i[0],i[1]),this.el&&this.el.dispatchEvent((0,rn.createCustomEvent)("input")))}}getCursorOffset(){const e=(0,ln.calculateElementOffset)(this.el),n=this.getElScroll(),i=this.getCursorPosition(),s=(0,ln.getLineHeightPx)(this.el),l=e.top-n.top+i.top+s,r=e.left-n.left+i.left,o=this.el.getBoundingClientRect().top;if(this.el.dir!=="rtl")return{top:l,left:r,lineHeight:s,clientTop:o};{const c=document.documentElement?document.documentElement.clientWidth-r:0;return{top:l,right:c,lineHeight:s,clientTop:o}}}getBeforeCursor(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}getAfterCursor(){return this.el.value.substring(this.el.selectionEnd)}getElScroll(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}getCursorPosition(){return(0,hi.default)(this.el,this.el.selectionEnd)}startListening(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}stopListening(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}ht.TextareaEditor=mi,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextareaEditor=void 0;var e=ht;Object.defineProperty(t,"TextareaEditor",{enumerable:!0,get:function(){return e.TextareaEditor}})}(xt);function on(t,e,n){const i=t.slice();return i[31]=e[n],i}function an(t,e,n){const i=t.slice();return i[31]=e[n],i}function cn(t){let e,n=K.buildEmoji(t[11])+"",i;return{c(){e=new St(!1),i=De(),e.a=i},m(s,l){e.m(n,s,l),S(s,i,l)},p(s,l){l[0]&2048&&n!==(n=K.buildEmoji(s[11])+"")&&e.p(n)},d(s){s&&(C(i),e.d())}}}function un(t){let e,n=t[31]+"",i,s,l,r;function o(){return t[27](t[31])}return{c(){e=d("button"),i=ne(n),s=ne(" x"),f(e,"class","btn btn-info btn-sm")},m(c,a){S(c,e,a),u(e,i),u(e,s),l||(r=V(e,"click",o),l=!0)},p(c,a){t=c,a[0]&2&&n!==(n=t[31]+"")&&it(i,n)},d(c){c&&C(e),l=!1,r()}}}function dn(t){let e,n=t[31]+"",i,s,l,r;function o(){return t[29](t[31])}return{c(){e=d("button"),i=ne(n),s=ne(" x"),f(e,"class","btn btn-info btn-sm")},m(c,a){S(c,e,a),u(e,i),u(e,s),l||(r=V(e,"click",o),l=!0)},p(c,a){t=c,a[0]&4&&n!==(n=t[31]+"")&&it(i,n)},d(c){c&&C(e),l=!1,r()}}}function pi(t){let e,n,i,s,l;return{c(){e=d("button"),n=d("i"),f(n,"class","fa fa-trash"),f(e,"class","btn btn-warning"),f(e,"type","button"),e.disabled=i=t[8]||t[9]},m(r,o){S(r,e,o),u(e,n),s||(l=V(e,"click",t[18]),s=!0)},p(r,o){o[0]&768&&i!==(i=r[8]||r[9])&&(e.disabled=i)},d(r){r&&C(e),s=!1,l()}}}function gi(t){let e,n,i,s,l;return{c(){e=d("button"),n=d("i"),f(n,"class","fa fa-check"),f(e,"class","btn btn-success"),f(e,"type","button"),e.disabled=i=!t[10]},m(r,o){S(r,e,o),u(e,n),s||(l=V(e,"click",t[17]),s=!0)},p(r,o){o[0]&1024&&i!==(i=!r[10])&&(e.disabled=i)},d(r){r&&C(e),s=!1,l()}}}function fn(t){let e,n,i,s,l,r,o,c,a,p,m,_;return{c(){e=d("tr"),n=d("td"),i=d("button"),s=ne("Cancel"),l=j(),r=d("td"),r.innerHTML='<span class="help-block">Are you sure you want to delete this extension?</span>',o=j(),c=d("td"),a=d("button"),p=ne("Yes"),f(i,"class","btn btn-outline-secondary"),f(i,"type","button"),i.disabled=t[9],f(r,"colspan",3),f(a,"class","btn btn-danger"),f(a,"type","button"),a.disabled=t[9],f(e,"class","svelte-11gdgpc"),ze(e,"fadeout",t[9])},m(g,v){S(g,e,v),u(e,n),u(n,i),u(i,s),u(e,l),u(e,r),u(e,o),u(e,c),u(c,a),u(a,p),m||(_=[V(i,"click",t[20]),V(a,"click",t[19])],m=!0)},p(g,v){v[0]&512&&(i.disabled=g[9]),v[0]&512&&(a.disabled=g[9]),v[0]&512&&ze(e,"fadeout",g[9])},d(g){g&&C(e),m=!1,te(_)}}}function hn(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> is required</span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function mn(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Name</strong> must be an existing emoji</span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function pn(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span><strong>Aliases</strong> can only contain letters, numbers, and <code>_-+.</code></span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function gn(t){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="5"><span>Must provide at least one <strong>Alias</strong> or <strong>ASCII Pattern</strong>.</span></td>',f(e,"class","text-danger svelte-11gdgpc")},m(n,i){S(n,e,i)},d(n){n&&C(e)}}}function _i(t){let e,n,i,s,l,r,o,c,a,p,m,_,g,v,w,h,E,k,A,Y,L,Z,O,z,W,se,he,ae,ue,be,_e,pe,Ne,P=t[11]&&cn(t),ie=Le(t[1]),Q=[];for(let y=0;y<ie.length;y+=1)Q[y]=un(an(t,ie,y));let ye=Le(t[2]),G=[];for(let y=0;y<ye.length;y+=1)G[y]=dn(on(t,ye,y));function F(y,M){return y[5]||y[12]?gi:pi}let Ee=F(t),ce=Ee(t),U=(t[8]||t[9])&&fn(t),x=t[5]&&t[4].nameRequired&&hn(),B=t[5]&&t[4].nameInvalid&&mn(),ge=t[5]&&t[4].aliasInvalid&&pn(),re=t[5]&&t[4].noChange&&gn();return{c(){e=d("tr"),n=d("td"),i=d("input"),s=j(),l=d("td"),P&&P.c(),r=j(),o=d("td"),c=d("div"),a=d("input"),p=j(),m=d("div"),_=d("button"),_.textContent="+",g=j(),v=d("span");for(let y=0;y<Q.length;y+=1)Q[y].c();w=j(),h=d("td"),E=d("div"),k=d("input"),A=j(),Y=d("div"),L=d("button"),L.textContent="+",Z=j(),O=d("span");for(let y=0;y<G.length;y+=1)G[y].c();z=j(),W=d("td"),ce.c(),se=j(),U&&U.c(),he=j(),x&&x.c(),ae=j(),B&&B.c(),ue=j(),ge&&ge.c(),be=j(),re&&re.c(),_e=De(),f(i,"type","text"),f(i,"class","form-control emoji-name svelte-11gdgpc"),f(a,"type","text"),f(a,"class","form-control"),f(_,"class","btn btn-outline-secondary"),f(m,"class","input-group-addon"),f(c,"class","input-group"),f(k,"type","text"),f(k,"class","form-control"),f(L,"class","btn btn-outline-secondary"),f(Y,"class","input-group-addon"),f(E,"class","input-group"),f(e,"class","svelte-11gdgpc"),ze(e,"fadeout",t[9])},m(y,M){S(y,e,M),u(e,n),u(n,i),Ie(i,t[0]),t[25](i),u(e,s),u(e,l),P&&P.m(l,null),u(e,r),u(e,o),u(o,c),u(c,a),Ie(a,t[3]),u(c,p),u(c,m),u(m,_),u(o,g),u(o,v);for(let T=0;T<Q.length;T+=1)Q[T]&&Q[T].m(v,null);u(e,w),u(e,h),u(h,E),u(E,k),Ie(k,t[6]),u(E,A),u(E,Y),u(Y,L),u(h,Z),u(h,O);for(let T=0;T<G.length;T+=1)G[T]&&G[T].m(O,null);u(e,z),u(e,W),ce.m(W,null),S(y,se,M),U&&U.m(y,M),S(y,he,M),x&&x.m(y,M),S(y,ae,M),B&&B.m(y,M),S(y,ue,M),ge&&ge.m(y,M),S(y,be,M),re&&re.m(y,M),S(y,_e,M),pe||(Ne=[V(i,"input",t[24]),V(a,"input",t[26]),V(_,"click",t[14]),V(k,"input",t[28]),V(L,"click",t[16])],pe=!0)},p(y,M){if(M[0]&1&&i.value!==y[0]&&Ie(i,y[0]),y[11]?P?P.p(y,M):(P=cn(y),P.c(),P.m(l,null)):P&&(P.d(1),P=null),M[0]&8&&a.value!==y[3]&&Ie(a,y[3]),M[0]&8194){ie=Le(y[1]);let T;for(T=0;T<ie.length;T+=1){const le=an(y,ie,T);Q[T]?Q[T].p(le,M):(Q[T]=un(le),Q[T].c(),Q[T].m(v,null))}for(;T<Q.length;T+=1)Q[T].d(1);Q.length=ie.length}if(M[0]&64&&k.value!==y[6]&&Ie(k,y[6]),M[0]&32772){ye=Le(y[2]);let T;for(T=0;T<ye.length;T+=1){const le=on(y,ye,T);G[T]?G[T].p(le,M):(G[T]=dn(le),G[T].c(),G[T].m(O,null))}for(;T<G.length;T+=1)G[T].d(1);G.length=ye.length}Ee===(Ee=F(y))&&ce?ce.p(y,M):(ce.d(1),ce=Ee(y),ce&&(ce.c(),ce.m(W,null))),M[0]&512&&ze(e,"fadeout",y[9]),y[8]||y[9]?U?U.p(y,M):(U=fn(y),U.c(),U.m(he.parentNode,he)):U&&(U.d(1),U=null),y[5]&&y[4].nameRequired?x||(x=hn(),x.c(),x.m(ae.parentNode,ae)):x&&(x.d(1),x=null),y[5]&&y[4].nameInvalid?B||(B=mn(),B.c(),B.m(ue.parentNode,ue)):B&&(B.d(1),B=null),y[5]&&y[4].aliasInvalid?ge||(ge=pn(),ge.c(),ge.m(be.parentNode,be)):ge&&(ge.d(1),ge=null),y[5]&&y[4].noChange?re||(re=gn(),re.c(),re.m(_e.parentNode,_e)):re&&(re.d(1),re=null)},i:H,o:H,d(y){y&&(C(e),C(se),C(he),C(ae),C(ue),C(be),C(_e)),t[25](null),P&&P.d(),de(Q,y),de(G,y),ce.d(),U&&U.d(y),x&&x.d(y),B&&B.d(y),ge&&ge.d(y),re&&re.d(y),pe=!1,te(Ne)}}}const vi=/[^a-z\-.+0-9_]/i;function Lt(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length)return t.every((n,i)=>Lt(n,e[i]));if(Array.isArray(t)||Array.isArray(e))return!1;if(typeof t=="object"){const n=Object.keys(t);return Object.keys(e).length!==n.length?!1:n.every(i=>Lt(t[i],e[i]))}return!1}function bi(t,e,n){let i,s,l,{item:r}=e,{id:o}=e,c=r.name,a=r.aliases.slice(),p=r.ascii.slice();function m(){n(0,c=r.name),n(1,a=r.aliases.slice()),n(2,p=r.ascii.slice())}const _=!r.name&&!r.aliases.length&&!r.ascii.length;let g="";function v(P){n(1,a=a.filter(ie=>ie!==P))}function w(){!g||a.includes(g)||(n(1,a=[...a,g]),n(3,g=""))}let h="";function E(P){n(2,p=p.filter(ie=>ie!==P))}function k(){!h||p.includes(h)||(n(2,p=[...p,h]),n(6,h=""))}const A={nameRequired:!1,nameInvalid:!1,aliasInvalid:!1,noChange:!1,any:!1};let Y;Cn(()=>{const P=new xt.TextareaEditor(Y);new Nt.Textcomplete(P,[Object.assign(Object.assign({},K.strategy),{replace:Q=>Q.name,match:/^(.+)$/})],{dropdown:{style:{zIndex:2e4}}}).on("selected",()=>{n(0,c=Y.value)})});const L=Dt();function Z(){L("save",{id:o,item:{name:c,aliases:a,ascii:p}})}let O=!1,z=!1;function W(){n(8,O=!0)}function se(){n(8,O=!1),n(9,z=!0),setTimeout(()=>{L("delete",{id:o})},250)}function he(){n(8,O=!1)}function ae(){c=this.value,n(0,c)}function ue(P){Pe[P?"unshift":"push"](()=>{Y=P,n(7,Y)})}function be(){g=this.value,n(3,g)}const _e=P=>v(P);function pe(){h=this.value,n(6,h)}const Ne=P=>E(P);return t.$$set=P=>{"item"in P&&n(21,r=P.item),"id"in P&&n(22,o=P.id)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(11,i=c&&K.table[c]),t.$$.dirty[0]&2097159&&n(5,s=!Lt({name:c,aliases:a,ascii:p},r)),t.$$.dirty[0]&1&&n(4,A.nameRequired=!c,A),t.$$.dirty[0]&1&&n(4,A.nameInvalid=!K.table[c],A),t.$$.dirty[0]&8&&n(4,A.aliasInvalid=vi.test(g),A),t.$$.dirty[0]&6&&n(4,A.noChange=!a.length&&!p.length,A),t.$$.dirty[0]&16&&n(4,A.any=A.nameRequired||A.nameInvalid||A.aliasInvalid||A.noChange,A),t.$$.dirty[0]&48&&n(10,l=s&&!A.any)},[c,a,p,g,A,s,h,Y,O,z,l,i,_,v,w,E,k,Z,W,se,he,r,o,m,ae,ue,be,_e,pe,Ne]}class _n extends Be{constructor(e){super(),Ue(this,e,bi,_i,Re,{item:21,id:22,reset:23},null,[-1,-1])}get reset(){return this.$$.ctx[23]}}function vn(t,e,n){const i=t.slice();return i[10]=e[n],i}function bn(t,e){let n,i,s;const l=[e[10]];let r={};for(let o=0;o<l.length;o+=1)r=X(r,l[o]);return i=new _n({props:r}),i.$on("save",e[3]),i.$on("delete",e[4]),{key:t,first:null,c(){n=De(),Te(i.$$.fragment),this.first=n},m(o,c){S(o,n,c),Ae(i,o,c),s=!0},p(o,c){e=o;const a=c&1?Ht(l,[zt(e[10])]):{};i.$set(a)},i(o){s||(oe(i.$$.fragment,o),s=!0)},o(o){fe(i.$$.fragment,o),s=!1},d(o){o&&C(n),je(i,o)}}}function yi(t){let e,n,i,s,l=[],r=new Map,o,c,a,p,m,_=Le(t[0]);const g=h=>h[10].id;for(let h=0;h<_.length;h+=1){let E=vn(t,_,h),k=g(E);r.set(k,l[h]=bn(k,E))}function v(h){t[8](h)}let w={id:-1,item:t[2]};return t[1]!==void 0&&(w.reset=t[1]),a=new _n({props:w}),Pe.push(()=>jt(a,"reset",v)),a.$on("save",t[5]),{c(){e=d("table"),n=d("thead"),n.innerHTML="<tr><th>Name</th><th>Image</th><th>Aliases</th><th>ASCII patterns</th><th></th></tr>",i=j(),s=d("tbody");for(let h=0;h<l.length;h+=1)l[h].c();o=j(),c=d("tfoot"),Te(a.$$.fragment),f(e,"class","table")},m(h,E){S(h,e,E),u(e,n),u(e,i),u(e,s);for(let k=0;k<l.length;k+=1)l[k]&&l[k].m(s,null);u(e,o),u(e,c),Ae(a,c,null),m=!0},p(h,[E]){E&25&&(_=Le(h[0]),rt(),l=Rt(l,E,g,1,h,_,r,s,Mt,bn,null,vn),lt());const k={};E&4&&(k.item=h[2]),!p&&E&2&&(p=!0,k.reset=h[1],kt(()=>p=!1)),a.$set(k)},i(h){if(!m){for(let E=0;E<_.length;E+=1)oe(l[E]);oe(a.$$.fragment,h),m=!0}},o(h){for(let E=0;E<l.length;E+=1)fe(l[E]);fe(a.$$.fragment,h),m=!1},d(h){h&&C(e);for(let E=0;E<l.length;E+=1)l[E].d();je(a)}}}function Ei(t,e,n){let{type:i="adjunct"}=e,{record:s}=e,l;function r(g){const{id:v,item:w}=g.detail;Se.put(`/admin/plugins/emoji/customizations/${i}/${v}`,{item:w}).then(()=>{n(6,s=Object.assign(Object.assign({},s),{[v]:w}))},()=>ee.error())}function o(g){const{id:v}=g.detail;Se.del(`/admin/plugins/emoji/customizations/${i}/${v}`,{}).then(()=>{delete s[v],n(6,s=Object.assign({},s))},()=>ee.error())}const c={name:"",aliases:[],ascii:[]};let a,p=Object.assign({},c);function m(g){const{item:v}=g.detail;Se.post(`/admin/plugins/emoji/customizations/${i}`,{item:v}).then(({id:w})=>{n(6,s=Object.assign(Object.assign({},s),{[w]:v})),n(2,p=Object.assign({},c)),a()},()=>ee.error())}function _(g){a=g,n(1,a)}return t.$$set=g=>{"type"in g&&n(7,i=g.type),"record"in g&&n(6,s=g.record)},t.$$.update=()=>{t.$$.dirty&64&&n(0,l=Object.keys(s).map(g=>({id:parseInt(g,10),item:s[g]})))},[l,a,p,r,o,m,s,i,_]}class wi extends Be{constructor(e){super(),Ue(this,e,Ei,yi,Re,{type:7,record:6})}}function ki(t){let e,n,i,s,l,r,o,c,a,p,m,_,g,v,w,h,E,k,A,Y,L,Z;return g=new zn({props:{emojis:t[0].emojis}}),A=new wi({props:{record:t[0].adjuncts}}),{c(){e=d("div"),n=d("div"),i=d("div"),s=d("div"),s.innerHTML='<h4 class="modal-title" id="editModalLabel">Customize Emoji</h4> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>',l=j(),r=d("div"),o=d("p"),o.innerHTML=`Below you can add custom emoji, and also add new aliases
          and ASCII patterns for existing emoji. While this list is
          edited live, you must still <strong>Build Emoji Assets</strong>
          to actually use these customizations.`,c=j(),a=d("div"),p=d("div"),p.innerHTML='<h3 class="card-title">Custom Emoji</h3>',m=j(),_=d("div"),Te(g.$$.fragment),v=j(),w=d("div"),h=d("div"),h.innerHTML='<h3 class="card-title">Custom Extensions</h3>',E=j(),k=d("div"),Te(A.$$.fragment),Y=j(),L=d("link"),f(s,"class","modal-header"),f(p,"class","card-header"),f(_,"class","card-body"),f(a,"class","card"),f(h,"class","card-header"),f(k,"class","card-body"),f(w,"class","card"),f(r,"class","modal-body"),f(i,"class","modal-content"),f(n,"class","modal-dialog modal-lg"),f(e,"class","modal fade"),f(e,"tabindex","-1"),f(e,"role","dialog"),f(e,"aria-labelledby","editModalLabel"),f(e,"aria-hidden","true"),f(L,"rel","stylesheet"),f(L,"href",`${at.assetBaseUrl}/plugins/nodebb-plugin-emoji/emoji/styles.css?${at["cache-buster"]}`)},m(O,z){S(O,e,z),u(e,n),u(n,i),u(i,s),u(i,l),u(i,r),u(r,o),u(r,c),u(r,a),u(a,p),u(a,m),u(a,_),Ae(g,_,null),u(r,v),u(r,w),u(w,h),u(w,E),u(w,k),Ae(A,k,null),t[3](e),S(O,Y,z),u(document.head,L),Z=!0},p(O,[z]){const W={};z&1&&(W.emojis=O[0].emojis),g.$set(W);const se={};z&1&&(se.record=O[0].adjuncts),A.$set(se)},i(O){Z||(oe(g.$$.fragment,O),oe(A.$$.fragment,O),Z=!0)},o(O){fe(g.$$.fragment,O),fe(A.$$.fragment,O),Z=!1},d(O){O&&(C(e),C(Y)),je(g),je(A),t[3](null),C(L)}}}function Ci(t,e,n){let{data:i}=e,s;function l(){nt(s).modal("show")}function r(o){Pe[o?"unshift":"push"](()=>{s=o,n(1,s)})}return t.$$set=o=>{"data"in o&&n(0,i=o.data)},[i,s,l,r]}class Ai extends Be{constructor(e){super(),Ue(this,e,Ci,ki,Re,{data:0,show:2})}get show(){return this.$$.ctx[2]}}function ji(t){return{c:H,m:H,p:H,d:H}}function Ti(t){let e,n=t[2]+"",i;return{c(){e=new St(!1),i=De(),e.a=i},m(s,l){e.m(n,s,l),S(s,i,l)},p(s,l){l&1&&n!==(n=s[2]+"")&&e.p(n)},d(s){s&&(C(i),e.d())}}}function Ni(t){return{c:H,m:H,p:H,d:H}}function Oi(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:Ni,then:Ti,catch:ji,value:2};return ot(n=t[1].translate(t[0]),i),{c(){e=De(),i.block.c()},m(s,l){S(s,e,l),i.block.m(s,i.anchor=l),i.mount=()=>e.parentNode,i.anchor=e},p(s,[l]){t=s,i.ctx=t,l&1&&n!==(n=t[1].translate(t[0]))&&ot(n,i)||Pt(i,t,l)},i:H,o:H,d(s){s&&C(e),i.block.d(s),i.token=null,i=null}}}function Ii(t,e,n){const i=J.Translator.create();let{src:s}=e;return t.$$set=l=>{"src"in l&&n(0,s=l.src)},[s,i]}class qe extends Be{constructor(e){super(),Ue(this,e,Ii,Oi,Re,{src:0})}}function yn(t){let e,n,i,s={ctx:t,current:null,token:null,hasCatch:!1,pending:Di,then:Si,catch:Li,value:12,blocks:[,,,]};return ot(n=t[2],s),{c(){e=De(),s.block.c()},m(l,r){S(l,e,r),s.block.m(l,s.anchor=r),s.mount=()=>e.parentNode,s.anchor=e,i=!0},p(l,r){t=l,s.ctx=t,r&4&&n!==(n=t[2])&&ot(n,s)||Pt(s,t,r)},i(l){i||(oe(s.block),i=!0)},o(l){for(let r=0;r<3;r+=1){const o=s.blocks[r];fe(o)}i=!1},d(l){l&&C(e),s.block.d(l),s.token=null,s=null}}}function Li(t){return{c:H,m:H,p:H,i:H,o:H,d:H}}function Si(t){let e,n,i;function s(r){t[10](r)}let l={data:t[12]};return t[1]!==void 0&&(l.show=t[1]),e=new Ai({props:l}),Pe.push(()=>jt(e,"show",s)),{c(){Te(e.$$.fragment)},m(r,o){Ae(e,r,o),i=!0},p(r,o){const c={};o&4&&(c.data=r[12]),!n&&o&2&&(n=!0,c.show=r[1],kt(()=>n=!1)),e.$set(c)},i(r){i||(oe(e.$$.fragment,r),i=!0)},o(r){fe(e.$$.fragment,r),i=!1},d(r){je(e,r)}}}function Di(t){return{c:H,m:H,p:H,i:H,o:H,d:H}}function Pi(t){let e,n,i,s,l,r,o,c,a,p,m,_,g,v,w,h,E,k,A,Y,L,Z,O,z,W,se,he,ae,ue,be,_e,pe,Ne,P,ie,Q,ye,G,F,Ee,ce,U,x,B,ge,re,y,M,T,le,we,ke;k=new qe({props:{src:"[[admin/plugins/emoji:settings.parseAscii]]"}}),W=new qe({props:{src:"[[admin/plugins/emoji:settings.parseNative]]"}}),pe=new qe({props:{src:"[[admin/plugins/emoji:settings.customFirst]]"}}),F=new qe({props:{src:"[[admin/plugins/emoji:settings.parseTitles]]"}}),B=new qe({props:{src:"[[admin/plugins/emoji:build]]"}}),y=new qe({props:{src:"[[admin/plugins/emoji:build_description]]"}});let b=t[2]&&yn(t);return{c(){e=d("div"),n=d("div"),i=d("div"),i.innerHTML='<h4 class="fw-bold tracking-tight mb-0">Emoji</h4>',s=j(),l=d("div"),r=d("button"),r.textContent="Customize",o=j(),c=d("button"),c.textContent="Save Changes",a=j(),p=d("form"),m=d("div"),_=d("div"),g=d("div"),v=d("div"),w=d("input"),h=j(),E=d("label"),Te(k.$$.fragment),A=j(),Y=d("div"),L=d("div"),Z=d("input"),O=j(),z=d("label"),Te(W.$$.fragment),se=j(),he=d("div"),ae=d("div"),ue=d("input"),be=j(),_e=d("label"),Te(pe.$$.fragment),Ne=j(),P=d("div"),ie=d("div"),Q=d("input"),ye=j(),G=d("label"),Te(F.$$.fragment),Ee=j(),ce=d("div"),U=d("div"),x=d("button"),Te(B.$$.fragment),ge=j(),re=d("p"),Te(y.$$.fragment),M=j(),b&&b.c(),T=De(),f(i,"class","col-12 col-md-8 px-0 mb-1 mb-md-0"),f(r,"class","edit btn btn-light btn-sm fw-semibold ff-secondary text-center text-nowrap"),f(r,"type","button"),f(c,"class","btn btn-primary btn-sm fw-semibold ff-secondary text-center text-nowrap"),f(c,"type","button"),f(l,"class","col-12 col-md-4 px-0 px-md-3 text-end"),f(n,"component","settings/main/header"),f(n,"class","row border-bottom py-2 m-0 sticky-top acp-page-main-header align-items-center"),f(w,"id","emoji-parseAscii"),f(w,"type","checkbox"),f(w,"class","form-check-input"),f(E,"class","form-check-label"),f(E,"for","emoji-parseAscii"),f(v,"class","form-check"),f(g,"class","mb-3"),f(Z,"id","emoji-parseNative"),f(Z,"type","checkbox"),f(Z,"class","form-check-input"),f(z,"class","form-check-label"),f(z,"for","emoji-parseNative"),f(L,"class","form-check"),f(Y,"class","mb-3"),f(ue,"id","emoji-customFirst"),f(ue,"type","checkbox"),f(ue,"class","form-check-input"),f(_e,"class","form-check-label"),f(_e,"for","emoji-customFirst"),f(ae,"class","form-check"),f(he,"class","mb-3"),f(Q,"id","emoji-parseTitles"),f(Q,"type","checkbox"),f(Q,"class","form-check-input"),f(G,"class","form-check-label"),f(G,"for","emoji-parseTitles"),f(ie,"class","form-check"),f(P,"class","mb-3"),f(_,"class","card-body"),f(x,"type","button"),f(x,"class","btn btn-primary"),f(x,"aria-describedby","emoji-build_description"),f(re,"id","emoji-build_description"),f(re,"class","form-text"),f(U,"class","mb-3"),f(ce,"class","card-footer"),f(m,"class","card"),f(p,"id","emoji-settings"),f(e,"class","acp-page-container")},m(N,D){S(N,e,D),u(e,n),u(n,i),u(n,s),u(n,l),u(l,r),u(l,o),u(l,c),u(e,a),u(e,p),u(p,m),u(m,_),u(_,g),u(g,v),u(v,w),w.checked=t[0].parseAscii,u(v,h),u(v,E),Ae(k,E,null),u(_,A),u(_,Y),u(Y,L),u(L,Z),Z.checked=t[0].parseNative,u(L,O),u(L,z),Ae(W,z,null),u(_,se),u(_,he),u(he,ae),u(ae,ue),ue.checked=t[0].customFirst,u(ae,be),u(ae,_e),Ae(pe,_e,null),u(_,Ne),u(_,P),u(P,ie),u(ie,Q),Q.checked=t[0].parseTitles,u(ie,ye),u(ie,G),Ae(F,G,null),u(m,Ee),u(m,ce),u(ce,U),u(U,x),Ae(B,x,null),u(U,ge),u(U,re),Ae(y,re,null),S(N,M,D),b&&b.m(N,D),S(N,T,D),le=!0,we||(ke=[V(r,"click",t[5]),V(c,"click",t[3]),V(w,"change",t[6]),V(Z,"change",t[7]),V(ue,"change",t[8]),V(Q,"change",t[9]),V(x,"click",t[4])],we=!0)},p(N,[D]){D&1&&(w.checked=N[0].parseAscii),D&1&&(Z.checked=N[0].parseNative),D&1&&(ue.checked=N[0].customFirst),D&1&&(Q.checked=N[0].parseTitles),N[2]?b?(b.p(N,D),D&4&&oe(b,1)):(b=yn(N),b.c(),oe(b,1),b.m(T.parentNode,T)):b&&(rt(),fe(b,1,1,()=>{b=null}),lt())},i(N){le||(oe(k.$$.fragment,N),oe(W.$$.fragment,N),oe(pe.$$.fragment,N),oe(F.$$.fragment,N),oe(B.$$.fragment,N),oe(y.$$.fragment,N),oe(b),le=!0)},o(N){fe(k.$$.fragment,N),fe(W.$$.fragment,N),fe(pe.$$.fragment,N),fe(F.$$.fragment,N),fe(B.$$.fragment,N),fe(y.$$.fragment,N),fe(b),le=!1},d(N){N&&(C(e),C(M),C(T)),je(k),je(W),je(pe),je(F),je(B),je(y),b&&b.d(N),we=!1,te(ke)}}}function Mi(t,e,n){let{settings:i}=e;function s(){Se.put("/admin/plugins/emoji/settings",i).then(()=>ee.success(),w=>ee.error(w))}function l(){Se.put("/admin/plugins/emoji/build",{}).then(()=>ee.success(),w=>ee.error(w))}let r,o;function c(){return Se.get("/admin/plugins/emoji/customizations",{})}function a(){n(2,o=o||Promise.all([c(),K.init()]).then(([w])=>w)),o.then(()=>setTimeout(()=>r(),0))}function p(){i.parseAscii=this.checked,n(0,i)}function m(){i.parseNative=this.checked,n(0,i)}function _(){i.customFirst=this.checked,n(0,i)}function g(){i.parseTitles=this.checked,n(0,i)}function v(w){r=w,n(1,r)}return t.$$set=w=>{"settings"in w&&n(0,i=w.settings)},[i,r,o,s,l,a,p,m,_,g,v]}class Ri extends Be{constructor(e){super(),Ue(this,e,Mi,Pi,Re,{settings:0})}}nt(window).on("action:ajaxify.end",()=>{R.data.template["admin/plugins/emoji"]&&new Ri({target:document.getElementById("content"),props:{settings:R.data.settings}})})}.apply(tt,Ge),We!==void 0&&(_t.exports=We)},69627:function(_t,tt,me){var Ge,We,nt=this&&this.__awaiter||function(Qe,K,J,Ce){function ee(R){return R instanceof J?R:new J(function(H){H(R)})}return new(J||(J=Promise))(function(R,H){function X(q){try{I(Ce.next(q))}catch(te){H(te)}}function Oe(q){try{I(Ce.throw(q))}catch(te){H(te)}}function I(q){q.done?R(q.value):ee(q.value).then(X,Oe)}I((Ce=Ce.apply(Qe,K||[])).next())})},Se=this&&this.__generator||function(Qe,K){var J={label:0,sent:function(){if(R[0]&1)throw R[1];return R[1]},trys:[],ops:[]},Ce,ee,R,H;return H={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function X(I){return function(q){return Oe([I,q])}}function Oe(I){if(Ce)throw new TypeError("Generator is already executing.");for(;H&&(H=0,I[0]&&(J=0)),J;)try{if(Ce=1,ee&&(R=I[0]&2?ee.return:I[0]?ee.throw||((R=ee.return)&&R.call(ee),0):ee.next)&&!(R=R.call(ee,I[1])).done)return R;switch(ee=0,R&&(I=[I[0]&2,R.value]),I[0]){case 0:case 1:R=I;break;case 4:return J.label++,{value:I[1],done:!1};case 5:J.label++,ee=I[1],I=[0];continue;case 7:I=J.ops.pop(),J.trys.pop();continue;default:if(R=J.trys,!(R=R.length>0&&R[R.length-1])&&(I[0]===6||I[0]===2)){J=0;continue}if(I[0]===3&&(!R||I[1]>R[0]&&I[1]<R[3])){J.label=I[1];break}if(I[0]===6&&J.label<R[1]){J.label=R[1],R=I;break}if(R&&J.label<R[2]){J.label=R[2],J.ops.push(I);break}R[2]&&J.ops.pop(),J.trys.pop();continue}I=K.call(Qe,J)}catch(q){I=[6,q],ee=0}finally{Ce=R=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}};Ge=[me,tt],We=function(Qe,K){"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.init=K.strategy=K.search=K.table=K.buildEmoji=K.buster=K.base=void 0;var J="".concat(config.assetBaseUrl,"/plugins/nodebb-plugin-emoji");K.base=J;var Ce=config["cache-buster"];K.buster=Ce;function ee(X,Oe){var I=":".concat(X.name,":"),q=Oe?" defer":"";return X.image?`<img
      `.concat(Oe?"data-":"",'src="').concat(J,"/emoji/").concat(X.pack,"/").concat(X.image,"?").concat(Ce,`"
      class="not-responsive emoji emoji-`).concat(X.pack," emoji--").concat(X.name," ").concat(q,`"
      title="`).concat(I,`"
      alt="`).concat(X.character,`"
    />`):`<span
    class="emoji-`.concat(X.pack," emoji--").concat(X.name,`"
    title="`).concat(I,`"
  ><span>`).concat(X.character,"</span></span>")}K.buildEmoji=ee,K.strategy={match:/\B:([^\s\n:]+)$/,search:function(X,Oe){Oe((0,K.search)(X.toLowerCase().replace(/[_-]/g,"")).slice(0,10))},index:1,replace:function(X){return":".concat(X.name,": ")},template:function(X){return"".concat(ee(X)," ").concat(X.name)},cache:!0};var R;function H(X){var Oe=this;return R=R||Promise.all([new Promise(function(I,q){me.e(30363).then(function(){var te=[me(89713)];I.apply(null,te)}.bind(this)).catch(q.bind(this))}),new Promise(function(I,q){me.e(95983).then(function(){var te=[me(30593)];I.apply(null,te)}.bind(this)).catch(q.bind(this))}),new Promise(function(I,q){Promise.all([me.e(23662),me.e(65285),me.e(88189)]).then(function(){var te=[me(449)];I.apply(null,te)}.bind(this)).catch(q.bind(this))}),$.getJSON("".concat(J,"/emoji/table.json?").concat(Ce))]).then(function(I){var q=I[0],te=I[1],Fe=I[2],Re=I[3];K.table=Re;var vt=Object.keys(K.table).map(function(C){var de=K.table[C];return{name:C,aliases:de.aliases,keywords:de.keywords,character:de.character,image:de.image,pack:de.pack}});function u(C,de){for(var d=de.length,ve=0;ve<d;ve+=1)if(q(C,de[ve]))return de[ve];return null}function S(C){function de(d,ve){var ne=ve*(1+te(C,d));return d.startsWith(C)?ne-2:ne}return vt.filter(function(d){if(q(C,d.name))return d.score=de(d.name,1),!0;var ve=u(C,d.aliases);if(ve)return d.score=de(ve,3),!0;var ne=u(C,d.keywords);return ne?(d.score=de(ne,7),!0):!1}).sort(function(d,ve){return d.score-ve.score}).sort(function(d,ve){var ne=+d.name.startsWith(C),j=+ve.name.startsWith(C);return j-ne})}K.search=S,Fe.addButtonDispatch("emoji-add-emoji",function(C,de,d,ve){new Promise(function(ne,j){me.e(86924).then(function(){var De=[me(86924)];ne.apply(null,De)}.bind(this)).catch(j.bind(this))}).then(function(ne){var j=ne.toggleForInsert;return j(C,de,d,ve)})})}).catch(function(I){return nt(Oe,void 0,void 0,function(){var q,te;return Se(this,function(Fe){switch(Fe.label){case 0:return q=Error("[[emoji:meta-load-failed]]"),console.error(q),[4,app.require("alerts")];case 1:throw te=Fe.sent(),te.error(q),I}})})}),X&&R.then(function(){return setTimeout(X,0)}),R}K.init=H}.apply(tt,Ge),We!==void 0&&(_t.exports=We)}}]);
