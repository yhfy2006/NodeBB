"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[28310],{28310:(h,C,d)=>{var u,m;u=[d(65348),d(29930),d(91749)],m=function(v,p,A){const o={};let n,e;o.init=function(i,l,s){n||(o.tids=i,o.currentCid=l,o.onComplete=s,o.moveAll=!i,c())};function c(){app.parseAndTranslate("modals/move-topic",{},function(i){n=i,$("body").append(n),(o.moveAll||o.tids&&o.tids.length>1)&&n.find(".card-header").translateText("[[topic:move-topics]]"),v.init(n.find('[component="category-selector"]'),{onSelect:r,privilege:"moderate"}),n.find("#move_thread_commit").on("click",t),n.find("#move_topic_cancel").on("click",a)})}function r(i){e=i,n.find("#move_thread_commit").prop("disabled",!1)}function t(){const i=n.find("#move_thread_commit");if(!i.prop("disabled")&&e&&e.cid){i.prop("disabled",!0),a();let l="[[topic:topic-move-success, "+e.name+"]]";o.tids&&o.tids.length>1?l="[[topic:topic-move-multiple-success, "+e.name+"]]":o.tids||(l="[[topic:topic-move-all-success, "+e.name+"]]");const s={tids:o.tids?o.tids.slice():null,cid:e.cid,currentCid:o.currentCid,onComplete:o.onComplete};if(config.undoTimeout>0)return p.alert({alert_id:"tids_move_"+(o.tids?o.tids.join("-"):"all"),title:"[[topic:thread-tools.move]]",message:l,type:"success",timeout:config.undoTimeout,timeoutfn:function(){f(s)},clickfn:function(g,y){delete y.timeoutfn,p.success("[[topic:topic-move-undone]]")}});f(s)}}function f(i){A.fire("action:topic.move",i),socket.emit(i.tids?"topics.move":"topics.moveAll",i,function(l){if(l)return p.error(l);typeof i.onComplete=="function"&&i.onComplete()})}function a(){n&&(n.remove(),n=null)}return o}.apply(C,u),m!==void 0&&(h.exports=m)},96349:(h,C,d)=>{var u,m;u=[d(29930),d(89336),d(49897)],m=function(v,p,A){const o={};return o.init=function(n,e){let c=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","tracking","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let r=[];Array.isArray(e.localCategories)&&(r=e.localCategories.map(l=>({...l}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const t=n.find('[component="category-selector-search"]');if(!t.length)return;const f=t.parent('[component="category/dropdown"]').length>0||t.parent('[component="category-selector"]').length>0;n.on("show.bs.dropdown",function(){f&&(n.find(".dropdown-toggle").css({visibility:"hidden"}),t.removeClass("hidden"),t.css({"z-index":n.find(".dropdown-toggle").css("z-index")+1}));function l(){const s=t.find("input").val();s.length>1||!s&&!c?a(s,function(g){c=e.cacheList&&(c||g),i(g)}):!s&&c&&i(c)}t.on("click",function(s){s.preventDefault(),s.stopPropagation()}),t.find("input").val("").on("keyup",utils.debounce(l,300)),l()}),n.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||t.find("input").focus()}),n.on("hide.bs.dropdown",function(){f&&(n.find(".dropdown-toggle").css({visibility:"inherit"}),t.addClass("hidden")),t.off("click"),t.find("input").off("keyup")});function a(l,s){A.get("/search/categories",{search:l,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(g,{categories:y}){if(g)return v.error(g);s(r.concat(y))})}function i(l){const s=e.selectedCids.map(String);l.forEach(function(g){g.selected=s.includes(String(g.cid))}),app.parseAndTranslate(e.template,{categoryItems:l.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(g){n.find('[component="category/list"]').html(g.find('[component="category/list"]').html()),n.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!l.length);const y=p.Dropdown.getInstance(n.find(".dropdown-toggle").get(0));y&&y.update()})}},o}.apply(C,u),m!==void 0&&(h.exports=m)},65348:(h,C,d)=>{var u,m;u=[d(96349),d(40027),d(91749),d(17459)],m=function(v,p,A,o){const n={};return n.init=function(e,c){if(!e||!e.length)return;c=c||{};const r=c.onSelect||function(){};c.states=c.states||["watching","tracking","notwatching","ignoring"],c.template=c.template||"partials/category/selector-dropdown-left",A.fire("action:category.selector.options",{el:e,options:c}),v.init(e,c);const t={el:e,selectedCategory:null};e.on("click","[data-cid]",function(){const a=$(this);return a.hasClass("disabled")?!1:(t.selectCategory(a.attr("data-cid")),r(t.selectedCategory))});let f=t.el.find('[component="category-selector-selected"]').html();return o.translate(f,a=>{f=a}),t.selectCategory=function(a){const i=t.el.find('[data-cid="'+a+'"]');t.selectedCategory={cid:a,name:i.attr("data-name")},i.length?t.el.find('[component="category-selector-selected"]').html(i.find('[component="category-markup"]').html()):t.el.find('[component="category-selector-selected"]').html(f)},t.getSelectedCategory=function(){return t.selectedCategory},t.getSelectedCid=function(){return t.selectedCategory?t.selectedCategory.cid:0},c.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(c.template,{selectedCategory:c.selectedCategory},function(a){t.el.find('[component="category-selector-selected"]').html(a.find('[component="category-selector-selected"]').html())}),t},n.modal=function(e){e=e||{},e.onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},function(c){const r=p.dialog({title:e.title||"[[modules:composer.select-category]]",message:c,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:f}}}),t=n.init(r.find('[component="category-selector"]'),e);function f(a){return a.preventDefault(),t.selectedCategory&&(e.onSubmit(t.selectedCategory),r.modal("hide")),!1}e.openOnLoad&&r.on("shown.bs.modal",function(){r.find(".dropdown-toggle").dropdown("toggle")}),r.find("form").on("submit",f)})},n}.apply(C,u),m!==void 0&&(h.exports=m)}}]);
