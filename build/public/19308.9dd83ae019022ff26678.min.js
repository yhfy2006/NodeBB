"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[19308,65274,42032,95004,11848,48118,48815,66173,87353],{40054:(h,g,A)=>{var u;u=function(){let l=null;function E(e){const c=$(l.createElement("button",{class:"btn btn-sm btn-primary remove",title:"Remove Item"},"-"));return c.click(function(d){d.preventDefault(),e.remove(),c.remove(),e.each(function(y,f){f=$(f),f.is("[data-key]")&&l.destructElement(f)})}),c}function m(e,c,d,y,f,a){d=l.deepClone(d);const t=d["data-type"]||d.type||"text",n=$(l.createElementOfType(t,d.tagName,d));n.attr("data-parent","_"+c),delete d["data-type"],delete d.tagName;for(const r in d)if(d.hasOwnProperty(r)){const s=d[r];r.search("data-")===0?n.data(r.substring(5),s):r.search("prop-")===0?n.prop(r.substring(5),s):n.attr(r,s)}l.fillField(n,y),$('[data-parent="_'+c+'"]',e).length&&a(f),a(n),a(E(n.add(f)))}function i(e,c,d,y){const f=$(document.createTextNode(" ")),a=e.data("new")||"",t=$(l.createElement("button",{class:"btn btn-sm btn-primary add",title:"Expand Array"},"+"));t.click(function(n){n.preventDefault(),m(e,c,d,a,y.clone(),function(r){f.before(r)})}),e.append(f),e.append(t)}return{types:["array","div"],use:function(){l=this.helper},create:function(e,c){return l.createElement(c||"div")},set:function(e,c){let d=e.data("attributes");const y=e.data("key")||e.data("parent");let f=e.data("split")||", ";f=function(){try{return $(f)}catch{return $(document.createTextNode(f))}}(),typeof d!="object"&&(d={}),e.empty(),c instanceof Array||(c=[]);for(let a=0;a<c.length;a+=1)m(e,y,d,c[a],f.clone(),function(t){e.append(t)});i(e,y,d,f)},get:function(e,c,d){const y=e.data("key")||e.data("parent"),f=$('[data-parent="_'+y+'"]',e),a=[];if(f.each(function(t,n){n=$(n);const r=l.readValue(n);if(l.isTrue(n.data("empty"))||r!==void 0&&(r==null||r.length!==0))return a.push(r)}),d||a.length)return a}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},75210:(h,g,A)=>{var u;u=function(){let l=null;return{types:["checkbox"],use:function(){l=this},create:function(){return l.helper.createElement("input",{type:"checkbox"})},set:function(m,i){m.prop("checked",i)},get:function(m,i,o){const e=m.prop("checked");if(e!=null)return o?i?e?1:0:e:e||void 0}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},17708:(h,g,A)=>{var u;u=function(){let l=null,E=null,m=null;const i=Object.freeze({0:"",8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:"Space",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",187:"=",189:"-",190:".",191:"/",219:"[",220:"\\",221:"]"});function o(){this.c=!1,this.a=!1,this.s=!1,this.m=!1,this.code=0,this.char=""}function e(t){const n=t.ctrlKey!==E.c||t.altKey!==E.a||t.shiftKey!==E.s||t.metaKey!==E.m,r=t.ctrlKey+t.altKey+t.shiftKey+t.metaKey-E.c-E.a-E.s-E.m,s=new o;if(s.c=t.ctrlKey,s.a=t.altKey,s.s=t.shiftKey,s.m=t.metaKey,E=s,n){if(r<0)return null;s.code=m.code,s.char=m.char}else s.code=t.which,s.char=c(s.code);return m=s,s}function c(t){return t=+t,t===0?"":t>=48&&t<=90?String.fromCharCode(t).toUpperCase():t>=112&&t<=123?"F"+(t-111):i[t]||"#"+t}function d(t,n,r,s){let p="";if(!(t instanceof o))return p;if(!t.char)return n?"Enter a key":"";(!s||/CtrlAShifMea#/.test(s))&&(s=n?" + ":"+"),t.c&&(p+=(r?"C":"Ctrl")+s),t.a&&(p+=(r?"A":"Alt")+s),t.s&&(p+=(r?"S":"Shift")+s),t.m&&(p+=(r?"M":"Meta")+s);let _;return n?_=t.char:t.code&&(_="#"+t.code||0),p+_}function y(t){if(t instanceof o)return t;const n=new o,r=/([^CtrlAShifMea#\d]+)(?:#|\d)/.exec(t),s=r!=null?t.split(r[1]):[t];for(let p=0;p<s.length;p+=1){const _=s[p];switch(_){case"C":case"Ctrl":n.c=!0;break;case"A":case"Alt":n.a=!0;break;case"S":case"Shift":n.s=!0;break;case"M":case"Meta":n.m=!0;break;default:{const S=/\d+/.exec(_);S!=null&&(n.code=S[0]),n.char=c(n.code)}}}return n}const f={types:["key"],use:function(){l=this.helper},init:function(t){return t.focus(function(){m=t.data("keyData")||new o,E=new o}).keydown(function(n){n.preventDefault(),a(t,n)}).keyup(function(n){a(t,n)}),t},set:function(t,n){const r=y(n||"");t.data("keyData",r),r.code?t.removeClass("alert-danger"):t.addClass("alert-danger"),t.val(d(r,!0,!1," + "))},get:function(t,n,r){const s=t.data("keyData"),p=t.data("split")||t.data("separator")||"+",_=!l.isFalse(t.data("short"));if(n){if(r||s!=null&&s.char)return d(s,!1,_,p)}else if(r||s!=null&&s.code)return s}};function a(t,n){n=n||window.event,n.which=n.which||n.keyCode||n.key;const r=e(n);r!=null&&f.set(t,r)}return f}.call(g,A,g,h),u!==void 0&&(h.exports=u)},474:(h,g,A)=>{var u;u=function(){return{types:["number"],get:function(l,E,m){const i=l.val();return m?i?+i:0:i?+i:void 0}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},46700:(h,g,A)=>{var u;u=function(){let l=null;function E(i,o,e,c,d,y,f){const a=e["data-prepend"],t=e["data-append"];delete e["data-prepend"],delete e["data-append"],e=l.deepClone(e);const n=e["data-type"]||e.type||"text",r=$(l.createElementOfType(n,e.tagName,e));r.attr("data-parent","_"+o),r.attr("data-prop",c),delete e["data-type"],delete e.tagName;for(const s in e)if(e.hasOwnProperty(s)){const p=e[s];s.search("data-")===0?r.data(s.substring(5),p):s.search("prop-")===0?r.prop(s.substring(5),p):r.attr(s,p)}l.fillField(r,d),$('[data-parent="_'+o+'"]',i).length&&f(y),a&&f(a),f(r),t&&f(t)}return{types:["object"],use:function(){l=this.helper},create:function(i,o){return l.createElement(o||"div")},set:function(i,o){const e=i.data("attributes")||i.data("properties"),c=i.data("key")||i.data("parent");let d=i.data("split")||", ",y,f,a;if(d=function(){try{return $(d)}catch{return $(document.createTextNode(d))}}(),i.empty(),typeof o!="object"&&(o={}),Array.isArray(e))for(y in e)e.hasOwnProperty(y)&&(a=e[y],typeof a!="object"&&(a={}),f=a["data-prop"]||a["data-property"]||y,o[f]===void 0&&a["data-new"]!==void 0&&(o[f]=a["data-new"]),E(i,c,a,f,o[f],d.clone(),function(t){i.append(t)}))},get:function(i,o,e){const c=i.data("key")||i.data("parent"),d=$('[data-parent="_'+c+'"]',i),y={};if(d.each(function(f,a){a=$(a);const t=l.readValue(a),n=a.data("prop");if(l.isTrue(a.data("empty"))||t!==void 0&&(t==null||t.length!==0))return y[n]=t,t}),e||Object.keys(y).length)return y}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},71575:(h,g,A)=>{var u;u=function(){let l=null;function E(i,o){for(let e=0;e<o.length;e+=1){const c=o[e],d=c.text||c.value;delete c.text,i.append($(l.helper.createElement("option",c)).text(d))}}return{types:["select"],use:function(){l=this},create:function(i,o,e){const c=$(l.helper.createElement("select"));return E(c,e["data-options"]),delete e["data-options"],c},init:function(i){const o=i.data("options");o!=null&&E(i,o)},set:function(i,o){i.val(o||"")},get:function(i,o,e){const c=i.val();if(e||c)return c}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)},59175:(h,g,A)=>{var u,l;u=[A(81335),A(40027),A(91749),A(65285)],l=function(E,m,i){let o;const e={types:["sorted-list"],use:function(){o=this},set:function(a,t){const n=a.attr("data-sorted-list");t[n]=[],a.find('[data-type="item"]').each(function(r,s){const p=$(s).attr("data-sorted-list-uuid"),_=o.helper.serializeForm($('[data-sorted-list-object="'+n+'"][data-sorted-list-uuid="'+p+'"]'));f(_),t[n].push(_)})},get:async(a,t)=>{const{listEl:n,key:r,formTpl:s,formValues:p}=await i.fire("filter:settings.sorted-list.load",{listEl:a.find('[data-type="list"]'),key:a.attr("data-sorted-list"),formTpl:a.attr("data-form-template"),formValues:{}}),_=await E.render(s,p);$('[data-sorted-list="'+r+'"] [data-type="add"]').on("click",function(){const C=m.confirm(_,function(K){K&&e.addItem(C.find("form").children(),a)});i.fire("action:settings.sorted-list.modal",{modal:C})});const D=a.parents("form").attr("data-socket-get"),k=ajaxify.data[D?t:"settings"][r];if(Array.isArray(k)&&typeof k[0]!="string"){const C=await Promise.all(k.map(async K=>{({item:K}=await i.fire("filter:settings.sorted-list.loadItem",{item:K}));const T=utils.generateUUID(),w=$(_).deserialize(K);return w.attr("data-sorted-list-uuid",T),w.attr("data-sorted-list-object",r),$("#content").append(w.hide()),{itemUUID:T,item:K}}));for(const{itemUUID:K,item:T}of C){const w=await y(a,K,T);i.fire("action:settings.sorted-list.itemLoaded",{element:w})}i.fire("action:settings.sorted-list.loaded",{containerEl:a.get(0),listEl:n.get(0),hash:t,key:r})}n.sortable().addClass("pointer")},addItem:async(a,t)=>{const n=t.attr("data-sorted-list"),r=utils.generateUUID(),s=$('<form class="" data-sorted-list-uuid="'+r+'" data-sorted-list-object="'+n+'"></form>');s.append(a),$("#content").append(s.hide());let p=o.helper.serializeForm(s);({item:p}=await i.fire("filter:settings.sorted-list.loadItem",{item:p})),y(t,r,p)}};function c(a,t){a.find('[data-sorted-list-uuid="'+t+'"] [data-type="remove"]').on("click",function(){$('[data-sorted-list-uuid="'+t+'"]').remove()})}function d(a,t){const n=a.find('[data-type="list"]'),r=a.attr("data-sorted-list");$('[data-sorted-list-uuid="'+t+'"] [data-type="edit"]').on("click",function(){const p=$('[data-sorted-list-uuid="'+t+'"][data-sorted-list-object="'+r+'"]'),_=p.clone(!0).show();_.find("select").each((D,k)=>{k.value=p.find(`select#${k.id}`).val()});const S=m.confirm(_,async D=>{if(D){const k=$('<form class="" data-sorted-list-uuid="'+t+'" data-sorted-list-object="'+r+'"></form>');k.append(S.find("form").children()),$("#content").find('[data-sorted-list-uuid="'+t+'"][data-sorted-list-object="'+r+'"]').remove(),$("#content").append(k.hide());let C=o.helper.serializeForm(k);({item:C}=await i.fire("filter:settings.sorted-list.loadItem",{item:C})),f(C);const K=n.find('[data-sorted-list-uuid="'+t+'"]');y(a,t,C,K)}});i.fire("action:settings.sorted-list.modal",{modal:S})})}function y(a,t,n,r){const s=a.find('[data-type="list"]'),p=a.attr("data-item-template");return f(n),new Promise(_=>{app.parseAndTranslate(p,n,function(S){S=$(S),r?r.replaceWith(S):s.append(S),S.attr("data-sorted-list-uuid",t),c(a,t),d(a,t),i.fire("action:settings.sorted-list.parse",{itemHtml:S}),_(S.get(0))})})}function f(a){return Object.entries(a||{}).forEach(([t,n])=>{a[t]=typeof n=="string"?utils.stripHTMLTags(n,utils.stripTags):n})}return e}.apply(g,u),l!==void 0&&(h.exports=l)},50397:(h,g,A)=>{var u;u=function(){let l=null;return{types:["textarea"],use:function(){l=this},create:function(){return l.helper.createElement("textarea")},set:function(m,i,o){o&&i!=null&&typeof i.trim=="function"&&(i=i.trim()),m.val(i||"")},get:function(m,i,o){let e=m.val();if(i&&(e==null?e=void 0:e=e.trim()),o||e)return e}}}.call(g,A,g,h),u!==void 0&&(h.exports=u)}}]);
